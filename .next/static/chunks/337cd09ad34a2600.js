(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,233525,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"warnOnce",{enumerable:!0,get:function(){return o}});let o=e=>{}},563542,e=>{"use strict";var t=e.i(684053),n=e.i(531503),o=e.i(359306),s=e.i(33151),r=e.i(591681),i=e.i(878921),a=e.i(344742),l=class{constructor(e){this.instructions=e.instructions,this.actions=e.actions||[],this.includeCopilotReadable=!1!==e.includeCopilotReadable,this.includeCopilotActions=!1!==e.includeCopilotActions,this.forwardedParameters=e.forwardedParameters}run(e,l){return(0,o.__async)(this,null,function*(){var u,d,c,p,g;let f=this.includeCopilotActions?Object.assign({},e.actions):{};for(let e of this.actions)f[e.name]=e;let C="";l&&(C=("string"==typeof l?l:JSON.stringify(l))+"\n\n"),this.includeCopilotReadable&&(C+=e.getContextString([],n.defaultCopilotContextCategories));let m=[new r.TextMessage({content:(p=C,g=this.instructions,`
Please act as an efficient, competent, conscientious, and industrious professional assistant.

Help the user achieve their goals, and you do so in a way that is as efficient as possible, without unnecessary fluff, but also without sacrificing professionalism.
Always be polite and respectful, and prefer brevity over verbosity.

The user has provided you with the following context:
\`\`\`
${p}
\`\`\`

They have also provided you with functions you can call to initiate actions on their behalf.

Please assist them as best you can.

This is not a conversation, so please do not ask questions. Just call a function without saying anything else.

The user has given you the following task to complete:

\`\`\`
${g}
\`\`\`
`),role:r.Role.System})],v=new s.CopilotRuntimeClient({url:e.copilotApiConfig.chatApiEndpoint,publicApiKey:e.copilotApiConfig.publicApiKey,headers:e.copilotApiConfig.headers,credentials:e.copilotApiConfig.credentials}),h=yield v.generateCopilotResponse({data:{frontend:{actions:(0,t.processActionsForRuntimeRequest)(Object.values(f)),url:window.location.href},messages:(0,i.convertMessagesToGqlInput)((0,i.filterAgentStateMessages)(m)),metadata:{requestType:a.CopilotRequestType.Task},forwardedParameters:(0,o.__spreadValues)({toolChoice:"required"},null!=(u=this.forwardedParameters)?u:{})},properties:e.copilotApiConfig.properties}).toPromise(),y=e.getFunctionCallHandler(f);for(let e of(0,i.convertGqlOutputToMessages)((null==(c=null==(d=h.data)?void 0:d.generateCopilotResponse)?void 0:c.messages)||[]).filter(e=>e.isActionExecutionMessage()))yield y({messages:m,name:e.name,args:e.arguments})})}},u=e.i(536564),d=e.i(41184),c=e.i(940252),p=e.i(271645),g=e.i(317931);function f(e,t){var n;let{setLangGraphInterruptAction:s,removeLangGraphInterruptAction:r,langGraphInterruptAction:i,threadId:a}=(0,p.useContext)(c.CopilotContext),{runChatCompletion:l}=(0,u.useCopilotChat)(),{addToast:f}=(0,d.useToast)(),C=(0,g.dataToUUID)(JSON.stringify(e),"lgAction"),m=(0,p.useMemo)(()=>!!(null==i?void 0:i.id),[i]),v=(0,p.useMemo)(()=>(null==i?void 0:i.id)&&(null==i?void 0:i.id)===C,[i]);(0,p.useEffect)(()=>{var e;m&&v&&(null==(e=null==i?void 0:i.event)?void 0:e.response)&&l()},[null==(n=null==i?void 0:i.event)?void 0:n.response,l,m,v]),(0,p.useEffect)(()=>{!e||(!m||v||e.enabled?m&&v||s(a,(0,o.__spreadProps)((0,o.__spreadValues)({},e),{id:C})):f({type:"warning",message:"An action is already registered for the interrupt event"}))},[e,m,v,s,r,a,...t||[]])}function C(e,t,n=[]){let{addDocumentContext:o,removeDocumentContext:s}=(0,c.useCopilotContext)(),r=(0,p.useRef)();return(0,p.useEffect)(()=>{let n=o(e,t);return r.current=n,()=>{s(n)}},[o,s,...n]),r.current}var m=e.i(558331);function v(e,t){let{setAction:n,removeAction:s,actions:r,chatComponentsCache:i}=(0,c.useCopilotContext)(),a=(0,p.useRef)((0,g.randomId)()),l=(0,p.useRef)(null),u=(0,p.useRef)(null),{addToast:f}=(0,d.useToast)();if(h(e=(0,o.__spreadValues)({},e))&&(e.renderAndWait||e.renderAndWaitForResponse)){e._isRenderAndWait=!0;let t=e.renderAndWait||e.renderAndWaitForResponse;e.renderAndWait=void 0,e.renderAndWaitForResponse=void 0,e._setActivatingMessageId=e=>{u.current=e},e.handler=(0,m.useAsyncCallback)(()=>(0,o.__async)(this,null,function*(){let e,t,n=u.current,o=new Promise((n,o)=>{e=n,t=o});return l.current={promise:o,resolve:e,reject:t,messageId:n},yield o}),[]),e.render=n=>{let o=n.messageId,s=n.status;"executing"===n.status&&(l.current&&l.current.promise?l.current.messageId!==o&&u.current!==o&&(s="inProgress"):s="inProgress");let r={status:s,args:n.args,result:n.result,handler:"executing"===s&&l.current&&l.current.messageId===o?l.current.resolve:void 0,respond:"executing"===s&&l.current&&l.current.messageId===o?l.current.resolve:void 0};if(t){var i;return(null==(i=e.parameters)?void 0:i.length)===0?t(r):t(r)}return(0,p.createElement)(p.Fragment)}}void 0===t&&r[a.current]&&(h(e)&&(r[a.current].handler=e.handler),"function"==typeof e.render&&null!==i.current&&(i.current.actions[e.name]=e.render)),(0,p.useEffect)(()=>{Object.values(r).some(t=>t.name===e.name&&t!==r[a.current])&&f({type:"warning",message:`Found an already registered action with name ${e.name}.`,id:`dup-action-${e.name}`})},[r]),(0,p.useEffect)(()=>(n(a.current,e),null!==i.current&&void 0!==e.render&&(i.current.actions[e.name]=e.render),()=>{s(a.current)}),[n,s,h(e)?e.description:void 0,e.name,h(e)?e.disabled:void 0,h(e)?e.available:void 0,JSON.stringify(h(e)?e.parameters:[]),"string"==typeof e.render?e.render:void 0,...t||[]])}function h(e){return"*"!==e.name}function y(e,t){v((0,o.__spreadProps)((0,o.__spreadValues)({},e),{available:"disabled"===e.available?e.available:"frontend"}),t)}function _(e,t){return`${e}: ${"string"==typeof t?t:JSON.stringify(t)}`}function b({description:e,value:t,parentId:n,categories:o,convert:s,available:r="enabled"},i){let{addContext:a,removeContext:l}=(0,c.useCopilotContext)(),u=(0,p.useRef)(),d=(s=s||_)(e,t);return(0,p.useEffect)(()=>{if("disabled"===r)return;let e=a(d,n,o);return u.current=e,()=>{l(e)}},[r,d,n,a,l,...i||[]]),u.current}function A(e,t){v((0,o.__spreadProps)((0,o.__spreadValues)({},e),{name:"*"}),t)}function R(e,t){v(e,t)}function S(e,t){let{render:n}=e,s=(0,o.__objRest)(e,["render"]);v((0,o.__spreadProps)((0,o.__spreadValues)({},s),{available:"disabled"===e.available?e.available:"remote",renderAndWaitForResponse:n}),t)}var x=e.i(945284);function w(e,t){let{setCoAgentStateRender:n,removeCoAgentStateRender:o,coAgentStateRenders:s,chatComponentsCache:r,availableAgents:i}=(0,p.useContext)(c.CopilotContext),a=(0,p.useRef)((0,g.randomId)()),{setBannerError:l,addToast:u}=(0,d.useToast)();(0,p.useEffect)(()=>{(null==i?void 0:i.length)&&!i.some(t=>t.name===e.name)&&(e.name,l(new x.CopilotKitAgentDiscoveryError({agentName:e.name,availableAgents:i.map(e=>({name:e.name,id:e.id}))})))},[i]);let f=`${e.name}-${e.nodeName||"global"}`;void 0===t&&s[a.current]&&(s[a.current].handler=e.handler,"function"==typeof e.render&&null!==r.current&&(r.current.coAgentStateRenders[f]=e.render)),(0,p.useEffect)(()=>{let t=a.current;Object.entries(s).some(([n,o])=>{if(n===t||o.name!==e.name)return!1;let s=!!e.nodeName,r=!!o.nodeName;return!s&&!r||s===r&&e.nodeName===o.nodeName})&&u({type:"warning",message:e.nodeName?`Found multiple state renders for agent ${e.name} and node ${e.nodeName}. State renders might get overridden`:`Found multiple state renders for agent ${e.name}. State renders might get overridden`,id:`dup-action-${e.name}`})},[s]),(0,p.useEffect)(()=>(n(a.current,e),null!==r.current&&void 0!==e.render&&(r.current.coAgentStateRenders[f]=e.render),()=>{o(a.current)}),[n,o,e.name,"string"==typeof e.render?e.render:void 0,...t||[]])}var E=e.i(124105);function I({instructions:e,available:t="enabled"},n){let{setAdditionalInstructions:o}=(0,c.useCopilotContext)();(0,p.useEffect)(()=>{if("disabled"!==t)return o(t=>[...t||[],e]),()=>{o(t=>(null==t?void 0:t.filter(t=>t!==e))||[])}},[t,e,o,...n||[]])}function T(e,t){let{authConfig_c:n,authStates_c:s,setAuthStates_c:r}=(0,c.useCopilotContext)(),i=(0,p.useRef)(null),a=(0,p.useCallback)(t=>"function"==typeof e.render?e.render(t):e.render||p.default.createElement(p.Fragment),[e]),l=(0,p.useCallback)(t=>Object.values(s||{}).some(e=>"authenticated"===e.status)?a(t):(i.current=t,(null==n?void 0:n.SignInComponent)?p.default.createElement(n.SignInComponent,{onSignInComplete:t=>{null==r||r(n=>(0,o.__spreadProps)((0,o.__spreadValues)({},n),{[e.name]:t})),i.current&&(a(i.current),i.current=null)}}):p.default.createElement(p.Fragment)),[e,s,r]);v((0,o.__spreadProps)((0,o.__spreadValues)({},e),{render:l}),t)}var M=e.i(794410);function P(e={}){let{copilotApiConfig:t,setBannerError:n}=(0,c.useCopilotContext)(),s=!!t.publicApiKey,r=(0,u.useCopilotChat)(e);return((0,p.useEffect)(()=>{s?n(null):(n(new x.CopilotKitError({message:"You're using useCopilotChatHeadless_c, a premium-only feature, which offers extensive headless chat capabilities. To continue, you'll need to provide a free public license key.",code:x.CopilotKitErrorCode.MISSING_PUBLIC_API_KEY_ERROR,severity:x.Severity.WARNING,visibility:x.ErrorVisibility.BANNER})),M.styledConsole.logCopilotKitPlatformMessage())},[s]),s)?r:{visibleMessages:[],messages:[],sendMessage:()=>(0,o.__async)(void 0,null,function*(){}),appendMessage:()=>(0,o.__async)(void 0,null,function*(){}),setMessages:()=>{},deleteMessage:()=>{},reloadMessages:()=>(0,o.__async)(void 0,null,function*(){}),stopGeneration:()=>{},reset:()=>{},isLoading:!1,runChatCompletion:()=>(0,o.__async)(void 0,null,function*(){return[]}),mcpServers:[],setMcpServers:()=>{},suggestions:[],setSuggestions:()=>{},generateSuggestions:()=>(0,o.__async)(void 0,null,function*(){}),resetSuggestions:()=>{},isLoadingSuggestions:!1,interrupt:null}}function O(e={}){let{visibleMessages:t,appendMessage:n,reloadMessages:o,stopGeneration:s,reset:r,isLoading:i,runChatCompletion:a,mcpServers:l,setMcpServers:d}=(0,u.useCopilotChat)(e);return{visibleMessages:t,appendMessage:n,reloadMessages:o,stopGeneration:s,reset:r,isLoading:i,runChatCompletion:a,mcpServers:l,setMcpServers:d}}var N=e.i(527908),F=e.i(851284),K={MAX_RETRIES:3,COOLDOWN_MS:5e3},$=e.i(86204),G=e.i(498372);e.s([],469358),e.i(469358),e.s(["CopilotContext",()=>c.CopilotContext,"CopilotKit",()=>n.CopilotKit,"CopilotMessagesContext",()=>G.CopilotMessagesContext,"CopilotTask",()=>l,"SUGGESTION_RETRY_CONFIG",()=>K,"defaultCopilotContextCategories",()=>n.defaultCopilotContextCategories,"extract",()=>n.extract,"reloadSuggestions",()=>n.reloadSuggestions,"runAgent",()=>E.runAgent,"shouldShowDevConsole",()=>F.shouldShowDevConsole,"startAgent",()=>E.startAgent,"stopAgent",()=>E.stopAgent,"useCoAgent",()=>E.useCoAgent,"useCoAgentStateRender",()=>w,"useCopilotAction",()=>v,"useCopilotAdditionalInstructions",()=>I,"useCopilotAuthenticatedAction_c",()=>T,"useCopilotChat",()=>O,"useCopilotChatHeadless_c",()=>P,"useCopilotChatInternal",()=>u.useCopilotChat,"useCopilotContext",()=>c.useCopilotContext,"useCopilotMessagesContext",()=>G.useCopilotMessagesContext,"useCopilotReadable",()=>b,"useCopilotRuntimeClient",()=>$.useCopilotRuntimeClient,"useDefaultTool",()=>A,"useFrontendTool",()=>R,"useHumanInTheLoop",()=>S,"useLangGraphInterrupt",()=>f,"useLangGraphInterruptRender",()=>N.useLangGraphInterruptRender,"useMakeCopilotDocumentReadable",()=>C,"useRenderToolCall",()=>y],563542)}]);