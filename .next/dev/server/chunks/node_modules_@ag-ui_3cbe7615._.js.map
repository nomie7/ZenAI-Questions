{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/node_modules/%40ag-ui/client/node_modules/%40ag-ui/core/src/types.ts","file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/node_modules/%40ag-ui/client/node_modules/%40ag-ui/core/src/events.ts"],"sourcesContent":["import { z } from \"zod\";\n\nexport const FunctionCallSchema = z.object({\n  name: z.string(),\n  arguments: z.string(),\n});\n\nexport const ToolCallSchema = z.object({\n  id: z.string(),\n  type: z.literal(\"function\"),\n  function: FunctionCallSchema,\n});\n\nexport const BaseMessageSchema = z.object({\n  id: z.string(),\n  role: z.string(),\n  content: z.string().optional(),\n  name: z.string().optional(),\n});\n\nexport const TextInputContentSchema = z.object({\n  type: z.literal(\"text\"),\n  text: z.string(),\n});\n\nconst BinaryInputContentObjectSchema = z.object({\n  type: z.literal(\"binary\"),\n  mimeType: z.string(),\n  id: z.string().optional(),\n  url: z.string().optional(),\n  data: z.string().optional(),\n  filename: z.string().optional(),\n});\n\nconst ensureBinaryPayload = (\n  value: { id?: string; url?: string; data?: string },\n  ctx: z.RefinementCtx,\n) => {\n  if (!value.id && !value.url && !value.data) {\n    ctx.addIssue({\n      code: z.ZodIssueCode.custom,\n      message: \"BinaryInputContent requires at least one of id, url, or data.\",\n      path: [\"id\"],\n    });\n  }\n};\n\nexport const BinaryInputContentSchema = BinaryInputContentObjectSchema.superRefine((value, ctx) => {\n  ensureBinaryPayload(value, ctx);\n});\n\nconst InputContentBaseSchema = z.discriminatedUnion(\"type\", [\n  TextInputContentSchema,\n  BinaryInputContentObjectSchema,\n]);\n\nexport const InputContentSchema = InputContentBaseSchema.superRefine((value, ctx) => {\n  if (value.type === \"binary\") {\n    ensureBinaryPayload(value, ctx);\n  }\n});\n\nexport const DeveloperMessageSchema = BaseMessageSchema.extend({\n  role: z.literal(\"developer\"),\n  content: z.string(),\n});\n\nexport const SystemMessageSchema = BaseMessageSchema.extend({\n  role: z.literal(\"system\"),\n  content: z.string(),\n});\n\nexport const AssistantMessageSchema = BaseMessageSchema.extend({\n  role: z.literal(\"assistant\"),\n  content: z.string().optional(),\n  toolCalls: z.array(ToolCallSchema).optional(),\n});\n\nexport const UserMessageSchema = BaseMessageSchema.extend({\n  role: z.literal(\"user\"),\n  content: z.union([z.string(), z.array(InputContentSchema)]),\n});\n\nexport const ToolMessageSchema = z.object({\n  id: z.string(),\n  content: z.string(),\n  role: z.literal(\"tool\"),\n  toolCallId: z.string(),\n  error: z.string().optional(),\n});\n\nexport const ActivityMessageSchema = z.object({\n  id: z.string(),\n  role: z.literal(\"activity\"),\n  activityType: z.string(),\n  content: z.record(z.any()),\n});\n\nexport const MessageSchema = z.discriminatedUnion(\"role\", [\n  DeveloperMessageSchema,\n  SystemMessageSchema,\n  AssistantMessageSchema,\n  UserMessageSchema,\n  ToolMessageSchema,\n  ActivityMessageSchema,\n]);\n\nexport const RoleSchema = z.union([\n  z.literal(\"developer\"),\n  z.literal(\"system\"),\n  z.literal(\"assistant\"),\n  z.literal(\"user\"),\n  z.literal(\"tool\"),\n  z.literal(\"activity\"),\n]);\n\nexport const ContextSchema = z.object({\n  description: z.string(),\n  value: z.string(),\n});\n\nexport const ToolSchema = z.object({\n  name: z.string(),\n  description: z.string(),\n  parameters: z.any(), // JSON Schema for the tool parameters\n});\n\nexport const RunAgentInputSchema = z.object({\n  threadId: z.string(),\n  runId: z.string(),\n  parentRunId: z.string().optional(),\n  state: z.any(),\n  messages: z.array(MessageSchema),\n  tools: z.array(ToolSchema),\n  context: z.array(ContextSchema),\n  forwardedProps: z.any(),\n});\n\nexport const StateSchema = z.any();\n\nexport type ToolCall = z.infer<typeof ToolCallSchema>;\nexport type FunctionCall = z.infer<typeof FunctionCallSchema>;\nexport type TextInputContent = z.infer<typeof TextInputContentSchema>;\nexport type BinaryInputContent = z.infer<typeof BinaryInputContentSchema>;\nexport type InputContent = z.infer<typeof InputContentSchema>;\nexport type DeveloperMessage = z.infer<typeof DeveloperMessageSchema>;\nexport type SystemMessage = z.infer<typeof SystemMessageSchema>;\nexport type AssistantMessage = z.infer<typeof AssistantMessageSchema>;\nexport type UserMessage = z.infer<typeof UserMessageSchema>;\nexport type ToolMessage = z.infer<typeof ToolMessageSchema>;\nexport type ActivityMessage = z.infer<typeof ActivityMessageSchema>;\nexport type Message = z.infer<typeof MessageSchema>;\nexport type Context = z.infer<typeof ContextSchema>;\nexport type Tool = z.infer<typeof ToolSchema>;\nexport type RunAgentInput = z.infer<typeof RunAgentInputSchema>;\nexport type State = z.infer<typeof StateSchema>;\nexport type Role = z.infer<typeof RoleSchema>;\n\nexport class AGUIError extends Error {\n  constructor(message: string) {\n    super(message);\n  }\n}\n\nexport class AGUIConnectNotImplementedError extends AGUIError {\n  constructor() {\n    super(\"Connect not implemented. This method is not supported by the current agent.\");\n  }\n}\n","import { z } from \"zod\";\nimport { MessageSchema, StateSchema, RunAgentInputSchema } from \"./types\";\n\n// Text messages can have any role except \"tool\"\nconst TextMessageRoleSchema = z.union([\n  z.literal(\"developer\"),\n  z.literal(\"system\"),\n  z.literal(\"assistant\"),\n  z.literal(\"user\"),\n]);\n\nexport enum EventType {\n  TEXT_MESSAGE_START = \"TEXT_MESSAGE_START\",\n  TEXT_MESSAGE_CONTENT = \"TEXT_MESSAGE_CONTENT\",\n  TEXT_MESSAGE_END = \"TEXT_MESSAGE_END\",\n  TEXT_MESSAGE_CHUNK = \"TEXT_MESSAGE_CHUNK\",\n  THINKING_TEXT_MESSAGE_START = \"THINKING_TEXT_MESSAGE_START\",\n  THINKING_TEXT_MESSAGE_CONTENT = \"THINKING_TEXT_MESSAGE_CONTENT\",\n  THINKING_TEXT_MESSAGE_END = \"THINKING_TEXT_MESSAGE_END\",\n  TOOL_CALL_START = \"TOOL_CALL_START\",\n  TOOL_CALL_ARGS = \"TOOL_CALL_ARGS\",\n  TOOL_CALL_END = \"TOOL_CALL_END\",\n  TOOL_CALL_CHUNK = \"TOOL_CALL_CHUNK\",\n  TOOL_CALL_RESULT = \"TOOL_CALL_RESULT\",\n  THINKING_START = \"THINKING_START\",\n  THINKING_END = \"THINKING_END\",\n  STATE_SNAPSHOT = \"STATE_SNAPSHOT\",\n  STATE_DELTA = \"STATE_DELTA\",\n  MESSAGES_SNAPSHOT = \"MESSAGES_SNAPSHOT\",\n  ACTIVITY_SNAPSHOT = \"ACTIVITY_SNAPSHOT\",\n  ACTIVITY_DELTA = \"ACTIVITY_DELTA\",\n  RAW = \"RAW\",\n  CUSTOM = \"CUSTOM\",\n  RUN_STARTED = \"RUN_STARTED\",\n  RUN_FINISHED = \"RUN_FINISHED\",\n  RUN_ERROR = \"RUN_ERROR\",\n  STEP_STARTED = \"STEP_STARTED\",\n  STEP_FINISHED = \"STEP_FINISHED\",\n}\n\nexport const BaseEventSchema = z.object({\n  type: z.nativeEnum(EventType),\n  timestamp: z.number().optional(),\n  rawEvent: z.any().optional(),\n});\n\nexport const TextMessageStartEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.TEXT_MESSAGE_START),\n  messageId: z.string(),\n  role: TextMessageRoleSchema.default(\"assistant\"),\n});\n\nexport const TextMessageContentEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.TEXT_MESSAGE_CONTENT),\n  messageId: z.string(),\n  delta: z.string().refine((s) => s.length > 0, \"Delta must not be an empty string\"),\n});\n\nexport const TextMessageEndEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.TEXT_MESSAGE_END),\n  messageId: z.string(),\n});\n\nexport const TextMessageChunkEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.TEXT_MESSAGE_CHUNK),\n  messageId: z.string().optional(),\n  role: TextMessageRoleSchema.optional(),\n  delta: z.string().optional(),\n});\n\nexport const ThinkingTextMessageStartEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.THINKING_TEXT_MESSAGE_START),\n});\n\nexport const ThinkingTextMessageContentEventSchema = TextMessageContentEventSchema.omit({\n  messageId: true,\n  type: true,\n}).extend({\n  type: z.literal(EventType.THINKING_TEXT_MESSAGE_CONTENT),\n});\n\nexport const ThinkingTextMessageEndEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.THINKING_TEXT_MESSAGE_END),\n});\n\nexport const ToolCallStartEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.TOOL_CALL_START),\n  toolCallId: z.string(),\n  toolCallName: z.string(),\n  parentMessageId: z.string().optional(),\n});\n\nexport const ToolCallArgsEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.TOOL_CALL_ARGS),\n  toolCallId: z.string(),\n  delta: z.string(),\n});\n\nexport const ToolCallEndEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.TOOL_CALL_END),\n  toolCallId: z.string(),\n});\n\nexport const ToolCallResultEventSchema = BaseEventSchema.extend({\n  messageId: z.string(),\n  type: z.literal(EventType.TOOL_CALL_RESULT),\n  toolCallId: z.string(),\n  content: z.string(),\n  role: z.literal(\"tool\").optional(),\n});\n\nexport const ToolCallChunkEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.TOOL_CALL_CHUNK),\n  toolCallId: z.string().optional(),\n  toolCallName: z.string().optional(),\n  parentMessageId: z.string().optional(),\n  delta: z.string().optional(),\n});\n\nexport const ThinkingStartEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.THINKING_START),\n  title: z.string().optional(),\n});\n\nexport const ThinkingEndEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.THINKING_END),\n});\n\nexport const StateSnapshotEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.STATE_SNAPSHOT),\n  snapshot: StateSchema,\n});\n\nexport const StateDeltaEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.STATE_DELTA),\n  delta: z.array(z.any()), // JSON Patch (RFC 6902)\n});\n\nexport const MessagesSnapshotEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.MESSAGES_SNAPSHOT),\n  messages: z.array(MessageSchema),\n});\n\nexport const ActivitySnapshotEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.ACTIVITY_SNAPSHOT),\n  messageId: z.string(),\n  activityType: z.string(),\n  content: z.record(z.any()),\n  replace: z.boolean().optional().default(true),\n});\n\nexport const ActivityDeltaEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.ACTIVITY_DELTA),\n  messageId: z.string(),\n  activityType: z.string(),\n  patch: z.array(z.any()),\n});\n\nexport const RawEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.RAW),\n  event: z.any(),\n  source: z.string().optional(),\n});\n\nexport const CustomEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.CUSTOM),\n  name: z.string(),\n  value: z.any(),\n});\n\nexport const RunStartedEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.RUN_STARTED),\n  threadId: z.string(),\n  runId: z.string(),\n  parentRunId: z.string().optional(),\n  input: RunAgentInputSchema.optional(),\n});\n\nexport const RunFinishedEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.RUN_FINISHED),\n  threadId: z.string(),\n  runId: z.string(),\n  result: z.any().optional(),\n});\n\nexport const RunErrorEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.RUN_ERROR),\n  message: z.string(),\n  code: z.string().optional(),\n});\n\nexport const StepStartedEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.STEP_STARTED),\n  stepName: z.string(),\n});\n\nexport const StepFinishedEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.STEP_FINISHED),\n  stepName: z.string(),\n});\n\nexport const EventSchemas = z.discriminatedUnion(\"type\", [\n  TextMessageStartEventSchema,\n  TextMessageContentEventSchema,\n  TextMessageEndEventSchema,\n  TextMessageChunkEventSchema,\n  ThinkingStartEventSchema,\n  ThinkingEndEventSchema,\n  ThinkingTextMessageStartEventSchema,\n  ThinkingTextMessageContentEventSchema,\n  ThinkingTextMessageEndEventSchema,\n  ToolCallStartEventSchema,\n  ToolCallArgsEventSchema,\n  ToolCallEndEventSchema,\n  ToolCallChunkEventSchema,\n  ToolCallResultEventSchema,\n  StateSnapshotEventSchema,\n  StateDeltaEventSchema,\n  MessagesSnapshotEventSchema,\n  ActivitySnapshotEventSchema,\n  ActivityDeltaEventSchema,\n  RawEventSchema,\n  CustomEventSchema,\n  RunStartedEventSchema,\n  RunFinishedEventSchema,\n  RunErrorEventSchema,\n  StepStartedEventSchema,\n  StepFinishedEventSchema,\n]);\n\nexport type BaseEvent = z.infer<typeof BaseEventSchema>;\nexport type TextMessageStartEvent = z.infer<typeof TextMessageStartEventSchema>;\nexport type TextMessageContentEvent = z.infer<typeof TextMessageContentEventSchema>;\nexport type TextMessageEndEvent = z.infer<typeof TextMessageEndEventSchema>;\nexport type TextMessageChunkEvent = z.infer<typeof TextMessageChunkEventSchema>;\nexport type ThinkingTextMessageStartEvent = z.infer<typeof ThinkingTextMessageStartEventSchema>;\nexport type ThinkingTextMessageContentEvent = z.infer<typeof ThinkingTextMessageContentEventSchema>;\nexport type ThinkingTextMessageEndEvent = z.infer<typeof ThinkingTextMessageEndEventSchema>;\nexport type ToolCallStartEvent = z.infer<typeof ToolCallStartEventSchema>;\nexport type ToolCallArgsEvent = z.infer<typeof ToolCallArgsEventSchema>;\nexport type ToolCallEndEvent = z.infer<typeof ToolCallEndEventSchema>;\nexport type ToolCallChunkEvent = z.infer<typeof ToolCallChunkEventSchema>;\nexport type ToolCallResultEvent = z.infer<typeof ToolCallResultEventSchema>;\nexport type ThinkingStartEvent = z.infer<typeof ThinkingStartEventSchema>;\nexport type ThinkingEndEvent = z.infer<typeof ThinkingEndEventSchema>;\nexport type StateSnapshotEvent = z.infer<typeof StateSnapshotEventSchema>;\nexport type StateDeltaEvent = z.infer<typeof StateDeltaEventSchema>;\nexport type MessagesSnapshotEvent = z.infer<typeof MessagesSnapshotEventSchema>;\nexport type ActivitySnapshotEvent = z.infer<typeof ActivitySnapshotEventSchema>;\nexport type ActivityDeltaEvent = z.infer<typeof ActivityDeltaEventSchema>;\nexport type RawEvent = z.infer<typeof RawEventSchema>;\nexport type CustomEvent = z.infer<typeof CustomEventSchema>;\nexport type RunStartedEvent = z.infer<typeof RunStartedEventSchema>;\nexport type RunFinishedEvent = z.infer<typeof RunFinishedEventSchema>;\nexport type RunErrorEvent = z.infer<typeof RunErrorEventSchema>;\nexport type StepStartedEvent = z.infer<typeof StepStartedEventSchema>;\nexport type StepFinishedEvent = z.infer<typeof StepFinishedEventSchema>;\n"],"names":["z","z","EventType"],"mappings":"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"}},
    {"offset": {"line": 440, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/node_modules/%40ag-ui/proto/node_modules/%40ag-ui/core/src/types.ts","file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/node_modules/%40ag-ui/proto/node_modules/%40ag-ui/core/src/events.ts"],"sourcesContent":["import { z } from \"zod\";\n\nexport const FunctionCallSchema = z.object({\n  name: z.string(),\n  arguments: z.string(),\n});\n\nexport const ToolCallSchema = z.object({\n  id: z.string(),\n  type: z.literal(\"function\"),\n  function: FunctionCallSchema,\n});\n\nexport const BaseMessageSchema = z.object({\n  id: z.string(),\n  role: z.string(),\n  content: z.string().optional(),\n  name: z.string().optional(),\n});\n\nexport const TextInputContentSchema = z.object({\n  type: z.literal(\"text\"),\n  text: z.string(),\n});\n\nconst BinaryInputContentObjectSchema = z.object({\n  type: z.literal(\"binary\"),\n  mimeType: z.string(),\n  id: z.string().optional(),\n  url: z.string().optional(),\n  data: z.string().optional(),\n  filename: z.string().optional(),\n});\n\nconst ensureBinaryPayload = (\n  value: { id?: string; url?: string; data?: string },\n  ctx: z.RefinementCtx,\n) => {\n  if (!value.id && !value.url && !value.data) {\n    ctx.addIssue({\n      code: z.ZodIssueCode.custom,\n      message: \"BinaryInputContent requires at least one of id, url, or data.\",\n      path: [\"id\"],\n    });\n  }\n};\n\nexport const BinaryInputContentSchema = BinaryInputContentObjectSchema.superRefine((value, ctx) => {\n  ensureBinaryPayload(value, ctx);\n});\n\nconst InputContentBaseSchema = z.discriminatedUnion(\"type\", [\n  TextInputContentSchema,\n  BinaryInputContentObjectSchema,\n]);\n\nexport const InputContentSchema = InputContentBaseSchema.superRefine((value, ctx) => {\n  if (value.type === \"binary\") {\n    ensureBinaryPayload(value, ctx);\n  }\n});\n\nexport const DeveloperMessageSchema = BaseMessageSchema.extend({\n  role: z.literal(\"developer\"),\n  content: z.string(),\n});\n\nexport const SystemMessageSchema = BaseMessageSchema.extend({\n  role: z.literal(\"system\"),\n  content: z.string(),\n});\n\nexport const AssistantMessageSchema = BaseMessageSchema.extend({\n  role: z.literal(\"assistant\"),\n  content: z.string().optional(),\n  toolCalls: z.array(ToolCallSchema).optional(),\n});\n\nexport const UserMessageSchema = BaseMessageSchema.extend({\n  role: z.literal(\"user\"),\n  content: z.union([z.string(), z.array(InputContentSchema)]),\n});\n\nexport const ToolMessageSchema = z.object({\n  id: z.string(),\n  content: z.string(),\n  role: z.literal(\"tool\"),\n  toolCallId: z.string(),\n  error: z.string().optional(),\n});\n\nexport const ActivityMessageSchema = z.object({\n  id: z.string(),\n  role: z.literal(\"activity\"),\n  activityType: z.string(),\n  content: z.record(z.any()),\n});\n\nexport const MessageSchema = z.discriminatedUnion(\"role\", [\n  DeveloperMessageSchema,\n  SystemMessageSchema,\n  AssistantMessageSchema,\n  UserMessageSchema,\n  ToolMessageSchema,\n  ActivityMessageSchema,\n]);\n\nexport const RoleSchema = z.union([\n  z.literal(\"developer\"),\n  z.literal(\"system\"),\n  z.literal(\"assistant\"),\n  z.literal(\"user\"),\n  z.literal(\"tool\"),\n  z.literal(\"activity\"),\n]);\n\nexport const ContextSchema = z.object({\n  description: z.string(),\n  value: z.string(),\n});\n\nexport const ToolSchema = z.object({\n  name: z.string(),\n  description: z.string(),\n  parameters: z.any(), // JSON Schema for the tool parameters\n});\n\nexport const RunAgentInputSchema = z.object({\n  threadId: z.string(),\n  runId: z.string(),\n  parentRunId: z.string().optional(),\n  state: z.any(),\n  messages: z.array(MessageSchema),\n  tools: z.array(ToolSchema),\n  context: z.array(ContextSchema),\n  forwardedProps: z.any(),\n});\n\nexport const StateSchema = z.any();\n\nexport type ToolCall = z.infer<typeof ToolCallSchema>;\nexport type FunctionCall = z.infer<typeof FunctionCallSchema>;\nexport type TextInputContent = z.infer<typeof TextInputContentSchema>;\nexport type BinaryInputContent = z.infer<typeof BinaryInputContentSchema>;\nexport type InputContent = z.infer<typeof InputContentSchema>;\nexport type DeveloperMessage = z.infer<typeof DeveloperMessageSchema>;\nexport type SystemMessage = z.infer<typeof SystemMessageSchema>;\nexport type AssistantMessage = z.infer<typeof AssistantMessageSchema>;\nexport type UserMessage = z.infer<typeof UserMessageSchema>;\nexport type ToolMessage = z.infer<typeof ToolMessageSchema>;\nexport type ActivityMessage = z.infer<typeof ActivityMessageSchema>;\nexport type Message = z.infer<typeof MessageSchema>;\nexport type Context = z.infer<typeof ContextSchema>;\nexport type Tool = z.infer<typeof ToolSchema>;\nexport type RunAgentInput = z.infer<typeof RunAgentInputSchema>;\nexport type State = z.infer<typeof StateSchema>;\nexport type Role = z.infer<typeof RoleSchema>;\n\nexport class AGUIError extends Error {\n  constructor(message: string) {\n    super(message);\n  }\n}\n\nexport class AGUIConnectNotImplementedError extends AGUIError {\n  constructor() {\n    super(\"Connect not implemented. This method is not supported by the current agent.\");\n  }\n}\n","import { z } from \"zod\";\nimport { MessageSchema, StateSchema, RunAgentInputSchema } from \"./types\";\n\n// Text messages can have any role except \"tool\"\nconst TextMessageRoleSchema = z.union([\n  z.literal(\"developer\"),\n  z.literal(\"system\"),\n  z.literal(\"assistant\"),\n  z.literal(\"user\"),\n]);\n\nexport enum EventType {\n  TEXT_MESSAGE_START = \"TEXT_MESSAGE_START\",\n  TEXT_MESSAGE_CONTENT = \"TEXT_MESSAGE_CONTENT\",\n  TEXT_MESSAGE_END = \"TEXT_MESSAGE_END\",\n  TEXT_MESSAGE_CHUNK = \"TEXT_MESSAGE_CHUNK\",\n  THINKING_TEXT_MESSAGE_START = \"THINKING_TEXT_MESSAGE_START\",\n  THINKING_TEXT_MESSAGE_CONTENT = \"THINKING_TEXT_MESSAGE_CONTENT\",\n  THINKING_TEXT_MESSAGE_END = \"THINKING_TEXT_MESSAGE_END\",\n  TOOL_CALL_START = \"TOOL_CALL_START\",\n  TOOL_CALL_ARGS = \"TOOL_CALL_ARGS\",\n  TOOL_CALL_END = \"TOOL_CALL_END\",\n  TOOL_CALL_CHUNK = \"TOOL_CALL_CHUNK\",\n  TOOL_CALL_RESULT = \"TOOL_CALL_RESULT\",\n  THINKING_START = \"THINKING_START\",\n  THINKING_END = \"THINKING_END\",\n  STATE_SNAPSHOT = \"STATE_SNAPSHOT\",\n  STATE_DELTA = \"STATE_DELTA\",\n  MESSAGES_SNAPSHOT = \"MESSAGES_SNAPSHOT\",\n  ACTIVITY_SNAPSHOT = \"ACTIVITY_SNAPSHOT\",\n  ACTIVITY_DELTA = \"ACTIVITY_DELTA\",\n  RAW = \"RAW\",\n  CUSTOM = \"CUSTOM\",\n  RUN_STARTED = \"RUN_STARTED\",\n  RUN_FINISHED = \"RUN_FINISHED\",\n  RUN_ERROR = \"RUN_ERROR\",\n  STEP_STARTED = \"STEP_STARTED\",\n  STEP_FINISHED = \"STEP_FINISHED\",\n}\n\nexport const BaseEventSchema = z.object({\n  type: z.nativeEnum(EventType),\n  timestamp: z.number().optional(),\n  rawEvent: z.any().optional(),\n});\n\nexport const TextMessageStartEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.TEXT_MESSAGE_START),\n  messageId: z.string(),\n  role: TextMessageRoleSchema.default(\"assistant\"),\n});\n\nexport const TextMessageContentEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.TEXT_MESSAGE_CONTENT),\n  messageId: z.string(),\n  delta: z.string().refine((s) => s.length > 0, \"Delta must not be an empty string\"),\n});\n\nexport const TextMessageEndEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.TEXT_MESSAGE_END),\n  messageId: z.string(),\n});\n\nexport const TextMessageChunkEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.TEXT_MESSAGE_CHUNK),\n  messageId: z.string().optional(),\n  role: TextMessageRoleSchema.optional(),\n  delta: z.string().optional(),\n});\n\nexport const ThinkingTextMessageStartEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.THINKING_TEXT_MESSAGE_START),\n});\n\nexport const ThinkingTextMessageContentEventSchema = TextMessageContentEventSchema.omit({\n  messageId: true,\n  type: true,\n}).extend({\n  type: z.literal(EventType.THINKING_TEXT_MESSAGE_CONTENT),\n});\n\nexport const ThinkingTextMessageEndEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.THINKING_TEXT_MESSAGE_END),\n});\n\nexport const ToolCallStartEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.TOOL_CALL_START),\n  toolCallId: z.string(),\n  toolCallName: z.string(),\n  parentMessageId: z.string().optional(),\n});\n\nexport const ToolCallArgsEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.TOOL_CALL_ARGS),\n  toolCallId: z.string(),\n  delta: z.string(),\n});\n\nexport const ToolCallEndEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.TOOL_CALL_END),\n  toolCallId: z.string(),\n});\n\nexport const ToolCallResultEventSchema = BaseEventSchema.extend({\n  messageId: z.string(),\n  type: z.literal(EventType.TOOL_CALL_RESULT),\n  toolCallId: z.string(),\n  content: z.string(),\n  role: z.literal(\"tool\").optional(),\n});\n\nexport const ToolCallChunkEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.TOOL_CALL_CHUNK),\n  toolCallId: z.string().optional(),\n  toolCallName: z.string().optional(),\n  parentMessageId: z.string().optional(),\n  delta: z.string().optional(),\n});\n\nexport const ThinkingStartEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.THINKING_START),\n  title: z.string().optional(),\n});\n\nexport const ThinkingEndEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.THINKING_END),\n});\n\nexport const StateSnapshotEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.STATE_SNAPSHOT),\n  snapshot: StateSchema,\n});\n\nexport const StateDeltaEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.STATE_DELTA),\n  delta: z.array(z.any()), // JSON Patch (RFC 6902)\n});\n\nexport const MessagesSnapshotEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.MESSAGES_SNAPSHOT),\n  messages: z.array(MessageSchema),\n});\n\nexport const ActivitySnapshotEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.ACTIVITY_SNAPSHOT),\n  messageId: z.string(),\n  activityType: z.string(),\n  content: z.record(z.any()),\n  replace: z.boolean().optional().default(true),\n});\n\nexport const ActivityDeltaEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.ACTIVITY_DELTA),\n  messageId: z.string(),\n  activityType: z.string(),\n  patch: z.array(z.any()),\n});\n\nexport const RawEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.RAW),\n  event: z.any(),\n  source: z.string().optional(),\n});\n\nexport const CustomEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.CUSTOM),\n  name: z.string(),\n  value: z.any(),\n});\n\nexport const RunStartedEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.RUN_STARTED),\n  threadId: z.string(),\n  runId: z.string(),\n  parentRunId: z.string().optional(),\n  input: RunAgentInputSchema.optional(),\n});\n\nexport const RunFinishedEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.RUN_FINISHED),\n  threadId: z.string(),\n  runId: z.string(),\n  result: z.any().optional(),\n});\n\nexport const RunErrorEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.RUN_ERROR),\n  message: z.string(),\n  code: z.string().optional(),\n});\n\nexport const StepStartedEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.STEP_STARTED),\n  stepName: z.string(),\n});\n\nexport const StepFinishedEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.STEP_FINISHED),\n  stepName: z.string(),\n});\n\nexport const EventSchemas = z.discriminatedUnion(\"type\", [\n  TextMessageStartEventSchema,\n  TextMessageContentEventSchema,\n  TextMessageEndEventSchema,\n  TextMessageChunkEventSchema,\n  ThinkingStartEventSchema,\n  ThinkingEndEventSchema,\n  ThinkingTextMessageStartEventSchema,\n  ThinkingTextMessageContentEventSchema,\n  ThinkingTextMessageEndEventSchema,\n  ToolCallStartEventSchema,\n  ToolCallArgsEventSchema,\n  ToolCallEndEventSchema,\n  ToolCallChunkEventSchema,\n  ToolCallResultEventSchema,\n  StateSnapshotEventSchema,\n  StateDeltaEventSchema,\n  MessagesSnapshotEventSchema,\n  ActivitySnapshotEventSchema,\n  ActivityDeltaEventSchema,\n  RawEventSchema,\n  CustomEventSchema,\n  RunStartedEventSchema,\n  RunFinishedEventSchema,\n  RunErrorEventSchema,\n  StepStartedEventSchema,\n  StepFinishedEventSchema,\n]);\n\nexport type BaseEvent = z.infer<typeof BaseEventSchema>;\nexport type TextMessageStartEvent = z.infer<typeof TextMessageStartEventSchema>;\nexport type TextMessageContentEvent = z.infer<typeof TextMessageContentEventSchema>;\nexport type TextMessageEndEvent = z.infer<typeof TextMessageEndEventSchema>;\nexport type TextMessageChunkEvent = z.infer<typeof TextMessageChunkEventSchema>;\nexport type ThinkingTextMessageStartEvent = z.infer<typeof ThinkingTextMessageStartEventSchema>;\nexport type ThinkingTextMessageContentEvent = z.infer<typeof ThinkingTextMessageContentEventSchema>;\nexport type ThinkingTextMessageEndEvent = z.infer<typeof ThinkingTextMessageEndEventSchema>;\nexport type ToolCallStartEvent = z.infer<typeof ToolCallStartEventSchema>;\nexport type ToolCallArgsEvent = z.infer<typeof ToolCallArgsEventSchema>;\nexport type ToolCallEndEvent = z.infer<typeof ToolCallEndEventSchema>;\nexport type ToolCallChunkEvent = z.infer<typeof ToolCallChunkEventSchema>;\nexport type ToolCallResultEvent = z.infer<typeof ToolCallResultEventSchema>;\nexport type ThinkingStartEvent = z.infer<typeof ThinkingStartEventSchema>;\nexport type ThinkingEndEvent = z.infer<typeof ThinkingEndEventSchema>;\nexport type StateSnapshotEvent = z.infer<typeof StateSnapshotEventSchema>;\nexport type StateDeltaEvent = z.infer<typeof StateDeltaEventSchema>;\nexport type MessagesSnapshotEvent = z.infer<typeof MessagesSnapshotEventSchema>;\nexport type ActivitySnapshotEvent = z.infer<typeof ActivitySnapshotEventSchema>;\nexport type ActivityDeltaEvent = z.infer<typeof ActivityDeltaEventSchema>;\nexport type RawEvent = z.infer<typeof RawEventSchema>;\nexport type CustomEvent = z.infer<typeof CustomEventSchema>;\nexport type RunStartedEvent = z.infer<typeof RunStartedEventSchema>;\nexport type RunFinishedEvent = z.infer<typeof RunFinishedEventSchema>;\nexport type RunErrorEvent = z.infer<typeof RunErrorEventSchema>;\nexport type StepStartedEvent = z.infer<typeof StepStartedEventSchema>;\nexport type StepFinishedEvent = z.infer<typeof StepFinishedEventSchema>;\n"],"names":["z","z","EventType"],"mappings":"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"}},
    {"offset": {"line": 876, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/node_modules/%40ag-ui/client/node_modules/uuid/dist/esm/native.js"],"sourcesContent":["import { randomUUID } from 'crypto';\nexport default { randomUUID };\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,YAAA,mHAAU;AAAC","ignoreList":[0]}},
    {"offset": {"line": 889, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/node_modules/%40ag-ui/client/node_modules/uuid/dist/esm/rng.js"],"sourcesContent":["import { randomFillSync } from 'crypto';\nconst rnds8Pool = new Uint8Array(256);\nlet poolPtr = rnds8Pool.length;\nexport default function rng() {\n    if (poolPtr > rnds8Pool.length - 16) {\n        randomFillSync(rnds8Pool);\n        poolPtr = 0;\n    }\n    return rnds8Pool.slice(poolPtr, (poolPtr += 16));\n}\n"],"names":[],"mappings":";;;;AAAA;;AACA,MAAM,YAAY,IAAI,WAAW;AACjC,IAAI,UAAU,UAAU,MAAM;AACf,SAAS;IACpB,IAAI,UAAU,UAAU,MAAM,GAAG,IAAI;QACjC,IAAA,uHAAc,EAAC;QACf,UAAU;IACd;IACA,OAAO,UAAU,KAAK,CAAC,SAAU,WAAW;AAChD","ignoreList":[0]}},
    {"offset": {"line": 908, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/node_modules/%40ag-ui/client/node_modules/uuid/dist/esm/regex.js"],"sourcesContent":["export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;\n"],"names":[],"mappings":";;;;uCAAe","ignoreList":[0]}},
    {"offset": {"line": 917, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/node_modules/%40ag-ui/client/node_modules/uuid/dist/esm/validate.js"],"sourcesContent":["import REGEX from './regex.js';\nfunction validate(uuid) {\n    return typeof uuid === 'string' && REGEX.test(uuid);\n}\nexport default validate;\n"],"names":[],"mappings":";;;;AAAA;;AACA,SAAS,SAAS,IAAI;IAClB,OAAO,OAAO,SAAS,YAAY,iMAAK,CAAC,IAAI,CAAC;AAClD;uCACe","ignoreList":[0]}},
    {"offset": {"line": 931, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/node_modules/%40ag-ui/client/node_modules/uuid/dist/esm/stringify.js"],"sourcesContent":["import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n"],"names":[],"mappings":";;;;;;AAAA;;AACA,MAAM,YAAY,EAAE;AACpB,IAAK,IAAI,IAAI,GAAG,IAAI,KAAK,EAAE,EAAG;IAC1B,UAAU,IAAI,CAAC,CAAC,IAAI,KAAK,EAAE,QAAQ,CAAC,IAAI,KAAK,CAAC;AAClD;AACO,SAAS,gBAAgB,GAAG,EAAE,SAAS,CAAC;IAC3C,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC9B,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC1B,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC1B,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC1B,MACA,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC1B,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC1B,MACA,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC1B,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC1B,MACA,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC1B,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC1B,MACA,SAAS,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,GAC3B,SAAS,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,GAC3B,SAAS,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,GAC3B,SAAS,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,GAC3B,SAAS,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,GAC3B,SAAS,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,EAAE,WAAW;AAChD;AACA,SAAS,UAAU,GAAG,EAAE,SAAS,CAAC;IAC9B,MAAM,OAAO,gBAAgB,KAAK;IAClC,IAAI,CAAC,IAAA,oMAAQ,EAAC,OAAO;QACjB,MAAM,UAAU;IACpB;IACA,OAAO;AACX;uCACe","ignoreList":[0]}},
    {"offset": {"line": 958, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/node_modules/%40ag-ui/client/node_modules/uuid/dist/esm/v4.js"],"sourcesContent":["import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nexport default v4;\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AACA,SAAS,GAAG,OAAO,EAAE,GAAG,EAAE,MAAM;IAC5B,IAAI,kMAAM,CAAC,UAAU,IAAI,CAAC,OAAO,CAAC,SAAS;QACvC,OAAO,kMAAM,CAAC,UAAU;IAC5B;IACA,UAAU,WAAW,CAAC;IACtB,MAAM,OAAO,QAAQ,MAAM,IAAI,QAAQ,GAAG,QAAQ,IAAA,+LAAG;IACrD,IAAI,KAAK,MAAM,GAAG,IAAI;QAClB,MAAM,IAAI,MAAM;IACpB;IACA,IAAI,CAAC,EAAE,GAAG,AAAC,IAAI,CAAC,EAAE,GAAG,OAAQ;IAC7B,IAAI,CAAC,EAAE,GAAG,AAAC,IAAI,CAAC,EAAE,GAAG,OAAQ;IAC7B,IAAI,KAAK;QACL,SAAS,UAAU;QACnB,IAAI,SAAS,KAAK,SAAS,KAAK,IAAI,MAAM,EAAE;YACxC,MAAM,IAAI,WAAW,CAAC,gBAAgB,EAAE,OAAO,CAAC,EAAE,SAAS,GAAG,wBAAwB,CAAC;QAC3F;QACA,IAAK,IAAI,IAAI,GAAG,IAAI,IAAI,EAAE,EAAG;YACzB,GAAG,CAAC,SAAS,EAAE,GAAG,IAAI,CAAC,EAAE;QAC7B;QACA,OAAO;IACX;IACA,OAAO,IAAA,6MAAe,EAAC;AAC3B;uCACe","ignoreList":[0]}},
    {"offset": {"line": 1005, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/node_modules/%40ag-ui/proto/src/proto.ts","file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/node_modules/%40ag-ui/proto/src/generated/events.ts","file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/node_modules/%40ag-ui/proto/src/generated/google/protobuf/struct.ts","file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/node_modules/%40ag-ui/proto/src/generated/patch.ts","file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/node_modules/%40ag-ui/proto/src/generated/types.ts","file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/node_modules/%40ag-ui/proto/src/index.ts"],"sourcesContent":["import { BaseEvent, EventSchemas, EventType, Message } from \"@ag-ui/core\";\nimport * as protoEvents from \"./generated/events\";\nimport * as protoPatch from \"./generated/patch\";\n\nfunction toCamelCase(str: string): string {\n  return str.toLowerCase().replace(/_([a-z])/g, (_, letter) => letter.toUpperCase());\n}\n\n/**\n * Encodes an event message to a protocol buffer binary format.\n */\nexport function encode(event: BaseEvent): Uint8Array {\n  const oneofField = toCamelCase(event.type);\n  const { type, timestamp, rawEvent, ...rest } = event as any;\n\n  // since protobuf does not support optional arrays, we need to ensure that the toolCalls array is always present\n  if (type === EventType.MESSAGES_SNAPSHOT) {\n    rest.messages = rest.messages.map((message: Message) => {\n      const untypedMessage = message as any;\n      if (untypedMessage.toolCalls === undefined) {\n        return { ...message, toolCalls: [] };\n      }\n      return message;\n    });\n  }\n\n  // custom mapping for json patch operations\n  if (type === EventType.STATE_DELTA) {\n    rest.delta = rest.delta.map((operation: any) => ({\n      ...operation,\n      op: protoPatch.JsonPatchOperationType[operation.op.toUpperCase()],\n    }));\n  }\n\n  const eventMessage = {\n    [oneofField]: {\n      baseEvent: {\n        type: protoEvents.EventType[event.type as keyof typeof protoEvents.EventType],\n        timestamp,\n        rawEvent,\n      },\n      ...rest,\n    },\n  };\n  return protoEvents.Event.encode(eventMessage).finish();\n}\n\n/**\n * Decodes a protocol buffer binary format to an event message.\n * The format includes a 4-byte length prefix followed by the message.\n */\nexport function decode(data: Uint8Array): BaseEvent {\n  const event = protoEvents.Event.decode(data);\n  const decoded = Object.values(event).find((value) => value !== undefined);\n  if (!decoded) {\n    throw new Error(\"Invalid event\");\n  }\n  decoded.type = protoEvents.EventType[decoded.baseEvent.type];\n  decoded.timestamp = decoded.baseEvent.timestamp;\n  decoded.rawEvent = decoded.baseEvent.rawEvent;\n\n  // we want tool calls to be optional, so we need to remove them if they are empty\n  if (decoded.type === EventType.MESSAGES_SNAPSHOT) {\n    for (const message of (decoded as any).messages as Message[]) {\n      const untypedMessage = message as any;\n      if (untypedMessage.toolCalls?.length === 0) {\n        untypedMessage.toolCalls = undefined;\n      }\n    }\n  }\n\n  // custom mapping for json patch operations\n  if (decoded.type === EventType.STATE_DELTA) {\n    for (const operation of (decoded as any).delta) {\n      operation.op = protoPatch.JsonPatchOperationType[operation.op].toLowerCase();\n      Object.keys(operation).forEach((key) => {\n        if (operation[key] === undefined) {\n          delete operation[key];\n        }\n      });\n    }\n  }\n\n  Object.keys(decoded).forEach((key) => {\n    if (decoded[key] === undefined) {\n      delete decoded[key];\n    }\n  });\n\n  return EventSchemas.parse(decoded);\n}\n","// Code generated by protoc-gen-ts_proto. DO NOT EDIT.\n// versions:\n//   protoc-gen-ts_proto  v2.7.7\n//   protoc               v5.29.3\n// source: events.proto\n\n/* eslint-disable */\nimport { BinaryReader, BinaryWriter } from \"@bufbuild/protobuf/wire\";\nimport { Value } from \"./google/protobuf/struct\";\nimport { JsonPatchOperation } from \"./patch\";\nimport { Message } from \"./types\";\n\nexport const protobufPackage = \"ag_ui\";\n\nexport enum EventType {\n  TEXT_MESSAGE_START = 0,\n  TEXT_MESSAGE_CONTENT = 1,\n  TEXT_MESSAGE_END = 2,\n  TOOL_CALL_START = 3,\n  TOOL_CALL_ARGS = 4,\n  TOOL_CALL_END = 5,\n  STATE_SNAPSHOT = 6,\n  STATE_DELTA = 7,\n  MESSAGES_SNAPSHOT = 8,\n  RAW = 9,\n  CUSTOM = 10,\n  RUN_STARTED = 11,\n  RUN_FINISHED = 12,\n  RUN_ERROR = 13,\n  STEP_STARTED = 14,\n  STEP_FINISHED = 15,\n  UNRECOGNIZED = -1,\n}\n\nexport interface BaseEvent {\n  type: EventType;\n  timestamp?: number | undefined;\n  rawEvent?: any | undefined;\n}\n\nexport interface TextMessageStartEvent {\n  baseEvent: BaseEvent | undefined;\n  messageId: string;\n  role?: string | undefined;\n}\n\nexport interface TextMessageContentEvent {\n  baseEvent: BaseEvent | undefined;\n  messageId: string;\n  delta: string;\n}\n\nexport interface TextMessageEndEvent {\n  baseEvent: BaseEvent | undefined;\n  messageId: string;\n}\n\nexport interface ToolCallStartEvent {\n  baseEvent: BaseEvent | undefined;\n  toolCallId: string;\n  toolCallName: string;\n  parentMessageId?: string | undefined;\n}\n\nexport interface ToolCallArgsEvent {\n  baseEvent: BaseEvent | undefined;\n  toolCallId: string;\n  delta: string;\n}\n\nexport interface ToolCallEndEvent {\n  baseEvent: BaseEvent | undefined;\n  toolCallId: string;\n}\n\nexport interface StateSnapshotEvent {\n  baseEvent: BaseEvent | undefined;\n  snapshot: any | undefined;\n}\n\nexport interface StateDeltaEvent {\n  baseEvent: BaseEvent | undefined;\n  delta: JsonPatchOperation[];\n}\n\nexport interface MessagesSnapshotEvent {\n  baseEvent: BaseEvent | undefined;\n  messages: Message[];\n}\n\nexport interface RawEvent {\n  baseEvent: BaseEvent | undefined;\n  event: any | undefined;\n  source?: string | undefined;\n}\n\nexport interface CustomEvent {\n  baseEvent: BaseEvent | undefined;\n  name: string;\n  value?: any | undefined;\n}\n\nexport interface RunStartedEvent {\n  baseEvent: BaseEvent | undefined;\n  threadId: string;\n  runId: string;\n}\n\nexport interface RunFinishedEvent {\n  baseEvent: BaseEvent | undefined;\n  threadId: string;\n  runId: string;\n  result?: any | undefined;\n}\n\nexport interface RunErrorEvent {\n  baseEvent: BaseEvent | undefined;\n  code?: string | undefined;\n  message: string;\n}\n\nexport interface StepStartedEvent {\n  baseEvent: BaseEvent | undefined;\n  stepName: string;\n}\n\nexport interface StepFinishedEvent {\n  baseEvent: BaseEvent | undefined;\n  stepName: string;\n}\n\nexport interface TextMessageChunkEvent {\n  baseEvent: BaseEvent | undefined;\n  messageId?: string | undefined;\n  role?: string | undefined;\n  delta?: string | undefined;\n}\n\nexport interface ToolCallChunkEvent {\n  baseEvent: BaseEvent | undefined;\n  toolCallId?: string | undefined;\n  toolCallName?: string | undefined;\n  parentMessageId?: string | undefined;\n  delta?: string | undefined;\n}\n\nexport interface Event {\n  textMessageStart?: TextMessageStartEvent | undefined;\n  textMessageContent?: TextMessageContentEvent | undefined;\n  textMessageEnd?: TextMessageEndEvent | undefined;\n  toolCallStart?: ToolCallStartEvent | undefined;\n  toolCallArgs?: ToolCallArgsEvent | undefined;\n  toolCallEnd?: ToolCallEndEvent | undefined;\n  stateSnapshot?: StateSnapshotEvent | undefined;\n  stateDelta?: StateDeltaEvent | undefined;\n  messagesSnapshot?: MessagesSnapshotEvent | undefined;\n  raw?: RawEvent | undefined;\n  custom?: CustomEvent | undefined;\n  runStarted?: RunStartedEvent | undefined;\n  runFinished?: RunFinishedEvent | undefined;\n  runError?: RunErrorEvent | undefined;\n  stepStarted?: StepStartedEvent | undefined;\n  stepFinished?: StepFinishedEvent | undefined;\n  textMessageChunk?: TextMessageChunkEvent | undefined;\n  toolCallChunk?: ToolCallChunkEvent | undefined;\n}\n\nfunction createBaseBaseEvent(): BaseEvent {\n  return { type: 0, timestamp: undefined, rawEvent: undefined };\n}\n\nexport const BaseEvent: MessageFns<BaseEvent> = {\n  encode(message: BaseEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.type !== 0) {\n      writer.uint32(8).int32(message.type);\n    }\n    if (message.timestamp !== undefined) {\n      writer.uint32(16).int64(message.timestamp);\n    }\n    if (message.rawEvent !== undefined) {\n      Value.encode(Value.wrap(message.rawEvent), writer.uint32(26).fork()).join();\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): BaseEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseBaseEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 8) {\n            break;\n          }\n\n          message.type = reader.int32() as any;\n          continue;\n        }\n        case 2: {\n          if (tag !== 16) {\n            break;\n          }\n\n          message.timestamp = longToNumber(reader.int64());\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.rawEvent = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<BaseEvent>, I>>(base?: I): BaseEvent {\n    return BaseEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<BaseEvent>, I>>(object: I): BaseEvent {\n    const message = createBaseBaseEvent();\n    message.type = object.type ?? 0;\n    message.timestamp = object.timestamp ?? undefined;\n    message.rawEvent = object.rawEvent ?? undefined;\n    return message;\n  },\n};\n\nfunction createBaseTextMessageStartEvent(): TextMessageStartEvent {\n  return { baseEvent: undefined, messageId: \"\", role: undefined };\n}\n\nexport const TextMessageStartEvent: MessageFns<TextMessageStartEvent> = {\n  encode(message: TextMessageStartEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.messageId !== \"\") {\n      writer.uint32(18).string(message.messageId);\n    }\n    if (message.role !== undefined) {\n      writer.uint32(26).string(message.role);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): TextMessageStartEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseTextMessageStartEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.messageId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.role = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<TextMessageStartEvent>, I>>(base?: I): TextMessageStartEvent {\n    return TextMessageStartEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<TextMessageStartEvent>, I>>(object: I): TextMessageStartEvent {\n    const message = createBaseTextMessageStartEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.messageId = object.messageId ?? \"\";\n    message.role = object.role ?? undefined;\n    return message;\n  },\n};\n\nfunction createBaseTextMessageContentEvent(): TextMessageContentEvent {\n  return { baseEvent: undefined, messageId: \"\", delta: \"\" };\n}\n\nexport const TextMessageContentEvent: MessageFns<TextMessageContentEvent> = {\n  encode(message: TextMessageContentEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.messageId !== \"\") {\n      writer.uint32(18).string(message.messageId);\n    }\n    if (message.delta !== \"\") {\n      writer.uint32(26).string(message.delta);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): TextMessageContentEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseTextMessageContentEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.messageId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.delta = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<TextMessageContentEvent>, I>>(base?: I): TextMessageContentEvent {\n    return TextMessageContentEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<TextMessageContentEvent>, I>>(object: I): TextMessageContentEvent {\n    const message = createBaseTextMessageContentEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.messageId = object.messageId ?? \"\";\n    message.delta = object.delta ?? \"\";\n    return message;\n  },\n};\n\nfunction createBaseTextMessageEndEvent(): TextMessageEndEvent {\n  return { baseEvent: undefined, messageId: \"\" };\n}\n\nexport const TextMessageEndEvent: MessageFns<TextMessageEndEvent> = {\n  encode(message: TextMessageEndEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.messageId !== \"\") {\n      writer.uint32(18).string(message.messageId);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): TextMessageEndEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseTextMessageEndEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.messageId = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<TextMessageEndEvent>, I>>(base?: I): TextMessageEndEvent {\n    return TextMessageEndEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<TextMessageEndEvent>, I>>(object: I): TextMessageEndEvent {\n    const message = createBaseTextMessageEndEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.messageId = object.messageId ?? \"\";\n    return message;\n  },\n};\n\nfunction createBaseToolCallStartEvent(): ToolCallStartEvent {\n  return { baseEvent: undefined, toolCallId: \"\", toolCallName: \"\", parentMessageId: undefined };\n}\n\nexport const ToolCallStartEvent: MessageFns<ToolCallStartEvent> = {\n  encode(message: ToolCallStartEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.toolCallId !== \"\") {\n      writer.uint32(18).string(message.toolCallId);\n    }\n    if (message.toolCallName !== \"\") {\n      writer.uint32(26).string(message.toolCallName);\n    }\n    if (message.parentMessageId !== undefined) {\n      writer.uint32(34).string(message.parentMessageId);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): ToolCallStartEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseToolCallStartEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.toolCallId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.toolCallName = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n\n          message.parentMessageId = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<ToolCallStartEvent>, I>>(base?: I): ToolCallStartEvent {\n    return ToolCallStartEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<ToolCallStartEvent>, I>>(object: I): ToolCallStartEvent {\n    const message = createBaseToolCallStartEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.toolCallId = object.toolCallId ?? \"\";\n    message.toolCallName = object.toolCallName ?? \"\";\n    message.parentMessageId = object.parentMessageId ?? undefined;\n    return message;\n  },\n};\n\nfunction createBaseToolCallArgsEvent(): ToolCallArgsEvent {\n  return { baseEvent: undefined, toolCallId: \"\", delta: \"\" };\n}\n\nexport const ToolCallArgsEvent: MessageFns<ToolCallArgsEvent> = {\n  encode(message: ToolCallArgsEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.toolCallId !== \"\") {\n      writer.uint32(18).string(message.toolCallId);\n    }\n    if (message.delta !== \"\") {\n      writer.uint32(26).string(message.delta);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): ToolCallArgsEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseToolCallArgsEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.toolCallId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.delta = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<ToolCallArgsEvent>, I>>(base?: I): ToolCallArgsEvent {\n    return ToolCallArgsEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<ToolCallArgsEvent>, I>>(object: I): ToolCallArgsEvent {\n    const message = createBaseToolCallArgsEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.toolCallId = object.toolCallId ?? \"\";\n    message.delta = object.delta ?? \"\";\n    return message;\n  },\n};\n\nfunction createBaseToolCallEndEvent(): ToolCallEndEvent {\n  return { baseEvent: undefined, toolCallId: \"\" };\n}\n\nexport const ToolCallEndEvent: MessageFns<ToolCallEndEvent> = {\n  encode(message: ToolCallEndEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.toolCallId !== \"\") {\n      writer.uint32(18).string(message.toolCallId);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): ToolCallEndEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseToolCallEndEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.toolCallId = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<ToolCallEndEvent>, I>>(base?: I): ToolCallEndEvent {\n    return ToolCallEndEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<ToolCallEndEvent>, I>>(object: I): ToolCallEndEvent {\n    const message = createBaseToolCallEndEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.toolCallId = object.toolCallId ?? \"\";\n    return message;\n  },\n};\n\nfunction createBaseStateSnapshotEvent(): StateSnapshotEvent {\n  return { baseEvent: undefined, snapshot: undefined };\n}\n\nexport const StateSnapshotEvent: MessageFns<StateSnapshotEvent> = {\n  encode(message: StateSnapshotEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.snapshot !== undefined) {\n      Value.encode(Value.wrap(message.snapshot), writer.uint32(18).fork()).join();\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): StateSnapshotEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseStateSnapshotEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.snapshot = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<StateSnapshotEvent>, I>>(base?: I): StateSnapshotEvent {\n    return StateSnapshotEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<StateSnapshotEvent>, I>>(object: I): StateSnapshotEvent {\n    const message = createBaseStateSnapshotEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.snapshot = object.snapshot ?? undefined;\n    return message;\n  },\n};\n\nfunction createBaseStateDeltaEvent(): StateDeltaEvent {\n  return { baseEvent: undefined, delta: [] };\n}\n\nexport const StateDeltaEvent: MessageFns<StateDeltaEvent> = {\n  encode(message: StateDeltaEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    for (const v of message.delta) {\n      JsonPatchOperation.encode(v!, writer.uint32(18).fork()).join();\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): StateDeltaEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseStateDeltaEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.delta.push(JsonPatchOperation.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<StateDeltaEvent>, I>>(base?: I): StateDeltaEvent {\n    return StateDeltaEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<StateDeltaEvent>, I>>(object: I): StateDeltaEvent {\n    const message = createBaseStateDeltaEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.delta = object.delta?.map((e) => JsonPatchOperation.fromPartial(e)) || [];\n    return message;\n  },\n};\n\nfunction createBaseMessagesSnapshotEvent(): MessagesSnapshotEvent {\n  return { baseEvent: undefined, messages: [] };\n}\n\nexport const MessagesSnapshotEvent: MessageFns<MessagesSnapshotEvent> = {\n  encode(message: MessagesSnapshotEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    for (const v of message.messages) {\n      Message.encode(v!, writer.uint32(18).fork()).join();\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): MessagesSnapshotEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseMessagesSnapshotEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.messages.push(Message.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<MessagesSnapshotEvent>, I>>(base?: I): MessagesSnapshotEvent {\n    return MessagesSnapshotEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<MessagesSnapshotEvent>, I>>(object: I): MessagesSnapshotEvent {\n    const message = createBaseMessagesSnapshotEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.messages = object.messages?.map((e) => Message.fromPartial(e)) || [];\n    return message;\n  },\n};\n\nfunction createBaseRawEvent(): RawEvent {\n  return { baseEvent: undefined, event: undefined, source: undefined };\n}\n\nexport const RawEvent: MessageFns<RawEvent> = {\n  encode(message: RawEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.event !== undefined) {\n      Value.encode(Value.wrap(message.event), writer.uint32(18).fork()).join();\n    }\n    if (message.source !== undefined) {\n      writer.uint32(26).string(message.source);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): RawEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseRawEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.event = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.source = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<RawEvent>, I>>(base?: I): RawEvent {\n    return RawEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<RawEvent>, I>>(object: I): RawEvent {\n    const message = createBaseRawEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.event = object.event ?? undefined;\n    message.source = object.source ?? undefined;\n    return message;\n  },\n};\n\nfunction createBaseCustomEvent(): CustomEvent {\n  return { baseEvent: undefined, name: \"\", value: undefined };\n}\n\nexport const CustomEvent: MessageFns<CustomEvent> = {\n  encode(message: CustomEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.name !== \"\") {\n      writer.uint32(18).string(message.name);\n    }\n    if (message.value !== undefined) {\n      Value.encode(Value.wrap(message.value), writer.uint32(26).fork()).join();\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): CustomEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseCustomEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.name = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.value = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<CustomEvent>, I>>(base?: I): CustomEvent {\n    return CustomEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<CustomEvent>, I>>(object: I): CustomEvent {\n    const message = createBaseCustomEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.name = object.name ?? \"\";\n    message.value = object.value ?? undefined;\n    return message;\n  },\n};\n\nfunction createBaseRunStartedEvent(): RunStartedEvent {\n  return { baseEvent: undefined, threadId: \"\", runId: \"\" };\n}\n\nexport const RunStartedEvent: MessageFns<RunStartedEvent> = {\n  encode(message: RunStartedEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.threadId !== \"\") {\n      writer.uint32(18).string(message.threadId);\n    }\n    if (message.runId !== \"\") {\n      writer.uint32(26).string(message.runId);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): RunStartedEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseRunStartedEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.threadId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.runId = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<RunStartedEvent>, I>>(base?: I): RunStartedEvent {\n    return RunStartedEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<RunStartedEvent>, I>>(object: I): RunStartedEvent {\n    const message = createBaseRunStartedEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.threadId = object.threadId ?? \"\";\n    message.runId = object.runId ?? \"\";\n    return message;\n  },\n};\n\nfunction createBaseRunFinishedEvent(): RunFinishedEvent {\n  return { baseEvent: undefined, threadId: \"\", runId: \"\", result: undefined };\n}\n\nexport const RunFinishedEvent: MessageFns<RunFinishedEvent> = {\n  encode(message: RunFinishedEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.threadId !== \"\") {\n      writer.uint32(18).string(message.threadId);\n    }\n    if (message.runId !== \"\") {\n      writer.uint32(26).string(message.runId);\n    }\n    if (message.result !== undefined) {\n      Value.encode(Value.wrap(message.result), writer.uint32(34).fork()).join();\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): RunFinishedEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseRunFinishedEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.threadId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.runId = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n\n          message.result = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<RunFinishedEvent>, I>>(base?: I): RunFinishedEvent {\n    return RunFinishedEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<RunFinishedEvent>, I>>(object: I): RunFinishedEvent {\n    const message = createBaseRunFinishedEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.threadId = object.threadId ?? \"\";\n    message.runId = object.runId ?? \"\";\n    message.result = object.result ?? undefined;\n    return message;\n  },\n};\n\nfunction createBaseRunErrorEvent(): RunErrorEvent {\n  return { baseEvent: undefined, code: undefined, message: \"\" };\n}\n\nexport const RunErrorEvent: MessageFns<RunErrorEvent> = {\n  encode(message: RunErrorEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.code !== undefined) {\n      writer.uint32(18).string(message.code);\n    }\n    if (message.message !== \"\") {\n      writer.uint32(26).string(message.message);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): RunErrorEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseRunErrorEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.code = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.message = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<RunErrorEvent>, I>>(base?: I): RunErrorEvent {\n    return RunErrorEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<RunErrorEvent>, I>>(object: I): RunErrorEvent {\n    const message = createBaseRunErrorEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.code = object.code ?? undefined;\n    message.message = object.message ?? \"\";\n    return message;\n  },\n};\n\nfunction createBaseStepStartedEvent(): StepStartedEvent {\n  return { baseEvent: undefined, stepName: \"\" };\n}\n\nexport const StepStartedEvent: MessageFns<StepStartedEvent> = {\n  encode(message: StepStartedEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.stepName !== \"\") {\n      writer.uint32(18).string(message.stepName);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): StepStartedEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseStepStartedEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.stepName = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<StepStartedEvent>, I>>(base?: I): StepStartedEvent {\n    return StepStartedEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<StepStartedEvent>, I>>(object: I): StepStartedEvent {\n    const message = createBaseStepStartedEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.stepName = object.stepName ?? \"\";\n    return message;\n  },\n};\n\nfunction createBaseStepFinishedEvent(): StepFinishedEvent {\n  return { baseEvent: undefined, stepName: \"\" };\n}\n\nexport const StepFinishedEvent: MessageFns<StepFinishedEvent> = {\n  encode(message: StepFinishedEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.stepName !== \"\") {\n      writer.uint32(18).string(message.stepName);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): StepFinishedEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseStepFinishedEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.stepName = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<StepFinishedEvent>, I>>(base?: I): StepFinishedEvent {\n    return StepFinishedEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<StepFinishedEvent>, I>>(object: I): StepFinishedEvent {\n    const message = createBaseStepFinishedEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.stepName = object.stepName ?? \"\";\n    return message;\n  },\n};\n\nfunction createBaseTextMessageChunkEvent(): TextMessageChunkEvent {\n  return { baseEvent: undefined, messageId: undefined, role: undefined, delta: undefined };\n}\n\nexport const TextMessageChunkEvent: MessageFns<TextMessageChunkEvent> = {\n  encode(message: TextMessageChunkEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.messageId !== undefined) {\n      writer.uint32(18).string(message.messageId);\n    }\n    if (message.role !== undefined) {\n      writer.uint32(26).string(message.role);\n    }\n    if (message.delta !== undefined) {\n      writer.uint32(34).string(message.delta);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): TextMessageChunkEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseTextMessageChunkEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.messageId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.role = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n\n          message.delta = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<TextMessageChunkEvent>, I>>(base?: I): TextMessageChunkEvent {\n    return TextMessageChunkEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<TextMessageChunkEvent>, I>>(object: I): TextMessageChunkEvent {\n    const message = createBaseTextMessageChunkEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.messageId = object.messageId ?? undefined;\n    message.role = object.role ?? undefined;\n    message.delta = object.delta ?? undefined;\n    return message;\n  },\n};\n\nfunction createBaseToolCallChunkEvent(): ToolCallChunkEvent {\n  return {\n    baseEvent: undefined,\n    toolCallId: undefined,\n    toolCallName: undefined,\n    parentMessageId: undefined,\n    delta: undefined,\n  };\n}\n\nexport const ToolCallChunkEvent: MessageFns<ToolCallChunkEvent> = {\n  encode(message: ToolCallChunkEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.toolCallId !== undefined) {\n      writer.uint32(18).string(message.toolCallId);\n    }\n    if (message.toolCallName !== undefined) {\n      writer.uint32(26).string(message.toolCallName);\n    }\n    if (message.parentMessageId !== undefined) {\n      writer.uint32(34).string(message.parentMessageId);\n    }\n    if (message.delta !== undefined) {\n      writer.uint32(42).string(message.delta);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): ToolCallChunkEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseToolCallChunkEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.toolCallId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.toolCallName = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n\n          message.parentMessageId = reader.string();\n          continue;\n        }\n        case 5: {\n          if (tag !== 42) {\n            break;\n          }\n\n          message.delta = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<ToolCallChunkEvent>, I>>(base?: I): ToolCallChunkEvent {\n    return ToolCallChunkEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<ToolCallChunkEvent>, I>>(object: I): ToolCallChunkEvent {\n    const message = createBaseToolCallChunkEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.toolCallId = object.toolCallId ?? undefined;\n    message.toolCallName = object.toolCallName ?? undefined;\n    message.parentMessageId = object.parentMessageId ?? undefined;\n    message.delta = object.delta ?? undefined;\n    return message;\n  },\n};\n\nfunction createBaseEvent(): Event {\n  return {\n    textMessageStart: undefined,\n    textMessageContent: undefined,\n    textMessageEnd: undefined,\n    toolCallStart: undefined,\n    toolCallArgs: undefined,\n    toolCallEnd: undefined,\n    stateSnapshot: undefined,\n    stateDelta: undefined,\n    messagesSnapshot: undefined,\n    raw: undefined,\n    custom: undefined,\n    runStarted: undefined,\n    runFinished: undefined,\n    runError: undefined,\n    stepStarted: undefined,\n    stepFinished: undefined,\n    textMessageChunk: undefined,\n    toolCallChunk: undefined,\n  };\n}\n\nexport const Event: MessageFns<Event> = {\n  encode(message: Event, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.textMessageStart !== undefined) {\n      TextMessageStartEvent.encode(message.textMessageStart, writer.uint32(10).fork()).join();\n    }\n    if (message.textMessageContent !== undefined) {\n      TextMessageContentEvent.encode(message.textMessageContent, writer.uint32(18).fork()).join();\n    }\n    if (message.textMessageEnd !== undefined) {\n      TextMessageEndEvent.encode(message.textMessageEnd, writer.uint32(26).fork()).join();\n    }\n    if (message.toolCallStart !== undefined) {\n      ToolCallStartEvent.encode(message.toolCallStart, writer.uint32(34).fork()).join();\n    }\n    if (message.toolCallArgs !== undefined) {\n      ToolCallArgsEvent.encode(message.toolCallArgs, writer.uint32(42).fork()).join();\n    }\n    if (message.toolCallEnd !== undefined) {\n      ToolCallEndEvent.encode(message.toolCallEnd, writer.uint32(50).fork()).join();\n    }\n    if (message.stateSnapshot !== undefined) {\n      StateSnapshotEvent.encode(message.stateSnapshot, writer.uint32(58).fork()).join();\n    }\n    if (message.stateDelta !== undefined) {\n      StateDeltaEvent.encode(message.stateDelta, writer.uint32(66).fork()).join();\n    }\n    if (message.messagesSnapshot !== undefined) {\n      MessagesSnapshotEvent.encode(message.messagesSnapshot, writer.uint32(74).fork()).join();\n    }\n    if (message.raw !== undefined) {\n      RawEvent.encode(message.raw, writer.uint32(82).fork()).join();\n    }\n    if (message.custom !== undefined) {\n      CustomEvent.encode(message.custom, writer.uint32(90).fork()).join();\n    }\n    if (message.runStarted !== undefined) {\n      RunStartedEvent.encode(message.runStarted, writer.uint32(98).fork()).join();\n    }\n    if (message.runFinished !== undefined) {\n      RunFinishedEvent.encode(message.runFinished, writer.uint32(106).fork()).join();\n    }\n    if (message.runError !== undefined) {\n      RunErrorEvent.encode(message.runError, writer.uint32(114).fork()).join();\n    }\n    if (message.stepStarted !== undefined) {\n      StepStartedEvent.encode(message.stepStarted, writer.uint32(122).fork()).join();\n    }\n    if (message.stepFinished !== undefined) {\n      StepFinishedEvent.encode(message.stepFinished, writer.uint32(130).fork()).join();\n    }\n    if (message.textMessageChunk !== undefined) {\n      TextMessageChunkEvent.encode(message.textMessageChunk, writer.uint32(138).fork()).join();\n    }\n    if (message.toolCallChunk !== undefined) {\n      ToolCallChunkEvent.encode(message.toolCallChunk, writer.uint32(146).fork()).join();\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): Event {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.textMessageStart = TextMessageStartEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.textMessageContent = TextMessageContentEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.textMessageEnd = TextMessageEndEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n\n          message.toolCallStart = ToolCallStartEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 5: {\n          if (tag !== 42) {\n            break;\n          }\n\n          message.toolCallArgs = ToolCallArgsEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 6: {\n          if (tag !== 50) {\n            break;\n          }\n\n          message.toolCallEnd = ToolCallEndEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 7: {\n          if (tag !== 58) {\n            break;\n          }\n\n          message.stateSnapshot = StateSnapshotEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 8: {\n          if (tag !== 66) {\n            break;\n          }\n\n          message.stateDelta = StateDeltaEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 9: {\n          if (tag !== 74) {\n            break;\n          }\n\n          message.messagesSnapshot = MessagesSnapshotEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 10: {\n          if (tag !== 82) {\n            break;\n          }\n\n          message.raw = RawEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 11: {\n          if (tag !== 90) {\n            break;\n          }\n\n          message.custom = CustomEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 12: {\n          if (tag !== 98) {\n            break;\n          }\n\n          message.runStarted = RunStartedEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 13: {\n          if (tag !== 106) {\n            break;\n          }\n\n          message.runFinished = RunFinishedEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 14: {\n          if (tag !== 114) {\n            break;\n          }\n\n          message.runError = RunErrorEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 15: {\n          if (tag !== 122) {\n            break;\n          }\n\n          message.stepStarted = StepStartedEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 16: {\n          if (tag !== 130) {\n            break;\n          }\n\n          message.stepFinished = StepFinishedEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 17: {\n          if (tag !== 138) {\n            break;\n          }\n\n          message.textMessageChunk = TextMessageChunkEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 18: {\n          if (tag !== 146) {\n            break;\n          }\n\n          message.toolCallChunk = ToolCallChunkEvent.decode(reader, reader.uint32());\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<Event>, I>>(base?: I): Event {\n    return Event.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<Event>, I>>(object: I): Event {\n    const message = createBaseEvent();\n    message.textMessageStart = (object.textMessageStart !== undefined && object.textMessageStart !== null)\n      ? TextMessageStartEvent.fromPartial(object.textMessageStart)\n      : undefined;\n    message.textMessageContent = (object.textMessageContent !== undefined && object.textMessageContent !== null)\n      ? TextMessageContentEvent.fromPartial(object.textMessageContent)\n      : undefined;\n    message.textMessageEnd = (object.textMessageEnd !== undefined && object.textMessageEnd !== null)\n      ? TextMessageEndEvent.fromPartial(object.textMessageEnd)\n      : undefined;\n    message.toolCallStart = (object.toolCallStart !== undefined && object.toolCallStart !== null)\n      ? ToolCallStartEvent.fromPartial(object.toolCallStart)\n      : undefined;\n    message.toolCallArgs = (object.toolCallArgs !== undefined && object.toolCallArgs !== null)\n      ? ToolCallArgsEvent.fromPartial(object.toolCallArgs)\n      : undefined;\n    message.toolCallEnd = (object.toolCallEnd !== undefined && object.toolCallEnd !== null)\n      ? ToolCallEndEvent.fromPartial(object.toolCallEnd)\n      : undefined;\n    message.stateSnapshot = (object.stateSnapshot !== undefined && object.stateSnapshot !== null)\n      ? StateSnapshotEvent.fromPartial(object.stateSnapshot)\n      : undefined;\n    message.stateDelta = (object.stateDelta !== undefined && object.stateDelta !== null)\n      ? StateDeltaEvent.fromPartial(object.stateDelta)\n      : undefined;\n    message.messagesSnapshot = (object.messagesSnapshot !== undefined && object.messagesSnapshot !== null)\n      ? MessagesSnapshotEvent.fromPartial(object.messagesSnapshot)\n      : undefined;\n    message.raw = (object.raw !== undefined && object.raw !== null) ? RawEvent.fromPartial(object.raw) : undefined;\n    message.custom = (object.custom !== undefined && object.custom !== null)\n      ? CustomEvent.fromPartial(object.custom)\n      : undefined;\n    message.runStarted = (object.runStarted !== undefined && object.runStarted !== null)\n      ? RunStartedEvent.fromPartial(object.runStarted)\n      : undefined;\n    message.runFinished = (object.runFinished !== undefined && object.runFinished !== null)\n      ? RunFinishedEvent.fromPartial(object.runFinished)\n      : undefined;\n    message.runError = (object.runError !== undefined && object.runError !== null)\n      ? RunErrorEvent.fromPartial(object.runError)\n      : undefined;\n    message.stepStarted = (object.stepStarted !== undefined && object.stepStarted !== null)\n      ? StepStartedEvent.fromPartial(object.stepStarted)\n      : undefined;\n    message.stepFinished = (object.stepFinished !== undefined && object.stepFinished !== null)\n      ? StepFinishedEvent.fromPartial(object.stepFinished)\n      : undefined;\n    message.textMessageChunk = (object.textMessageChunk !== undefined && object.textMessageChunk !== null)\n      ? TextMessageChunkEvent.fromPartial(object.textMessageChunk)\n      : undefined;\n    message.toolCallChunk = (object.toolCallChunk !== undefined && object.toolCallChunk !== null)\n      ? ToolCallChunkEvent.fromPartial(object.toolCallChunk)\n      : undefined;\n    return message;\n  },\n};\n\ntype Builtin = Date | Function | Uint8Array | string | number | boolean | undefined;\n\nexport type DeepPartial<T> = T extends Builtin ? T\n  : T extends globalThis.Array<infer U> ? globalThis.Array<DeepPartial<U>>\n  : T extends ReadonlyArray<infer U> ? ReadonlyArray<DeepPartial<U>>\n  : T extends {} ? { [K in keyof T]?: DeepPartial<T[K]> }\n  : Partial<T>;\n\ntype KeysOfUnion<T> = T extends T ? keyof T : never;\nexport type Exact<P, I extends P> = P extends Builtin ? P\n  : P & { [K in keyof P]: Exact<P[K], I[K]> } & { [K in Exclude<keyof I, KeysOfUnion<P>>]: never };\n\nfunction longToNumber(int64: { toString(): string }): number {\n  const num = globalThis.Number(int64.toString());\n  if (num > globalThis.Number.MAX_SAFE_INTEGER) {\n    throw new globalThis.Error(\"Value is larger than Number.MAX_SAFE_INTEGER\");\n  }\n  if (num < globalThis.Number.MIN_SAFE_INTEGER) {\n    throw new globalThis.Error(\"Value is smaller than Number.MIN_SAFE_INTEGER\");\n  }\n  return num;\n}\n\nexport interface MessageFns<T> {\n  encode(message: T, writer?: BinaryWriter): BinaryWriter;\n  decode(input: BinaryReader | Uint8Array, length?: number): T;\n  create<I extends Exact<DeepPartial<T>, I>>(base?: I): T;\n  fromPartial<I extends Exact<DeepPartial<T>, I>>(object: I): T;\n}\n","// Code generated by protoc-gen-ts_proto. DO NOT EDIT.\n// versions:\n//   protoc-gen-ts_proto  v2.7.7\n//   protoc               v5.29.3\n// source: google/protobuf/struct.proto\n\n/* eslint-disable */\nimport { BinaryReader, BinaryWriter } from \"@bufbuild/protobuf/wire\";\n\nexport const protobufPackage = \"google.protobuf\";\n\n/**\n * `NullValue` is a singleton enumeration to represent the null value for the\n * `Value` type union.\n *\n * The JSON representation for `NullValue` is JSON `null`.\n */\nexport enum NullValue {\n  /** NULL_VALUE - Null value. */\n  NULL_VALUE = 0,\n  UNRECOGNIZED = -1,\n}\n\n/**\n * `Struct` represents a structured data value, consisting of fields\n * which map to dynamically typed values. In some languages, `Struct`\n * might be supported by a native representation. For example, in\n * scripting languages like JS a struct is represented as an\n * object. The details of that representation are described together\n * with the proto support for the language.\n *\n * The JSON representation for `Struct` is JSON object.\n */\nexport interface Struct {\n  /** Unordered map of dynamically typed values. */\n  fields: { [key: string]: any | undefined };\n}\n\nexport interface Struct_FieldsEntry {\n  key: string;\n  value: any | undefined;\n}\n\n/**\n * `Value` represents a dynamically typed value which can be either\n * null, a number, a string, a boolean, a recursive struct value, or a\n * list of values. A producer of value is expected to set one of these\n * variants. Absence of any variant indicates an error.\n *\n * The JSON representation for `Value` is JSON value.\n */\nexport interface Value {\n  /** Represents a null value. */\n  nullValue?:\n    | NullValue\n    | undefined;\n  /** Represents a double value. */\n  numberValue?:\n    | number\n    | undefined;\n  /** Represents a string value. */\n  stringValue?:\n    | string\n    | undefined;\n  /** Represents a boolean value. */\n  boolValue?:\n    | boolean\n    | undefined;\n  /** Represents a structured value. */\n  structValue?:\n    | { [key: string]: any }\n    | undefined;\n  /** Represents a repeated `Value`. */\n  listValue?: Array<any> | undefined;\n}\n\n/**\n * `ListValue` is a wrapper around a repeated field of values.\n *\n * The JSON representation for `ListValue` is JSON array.\n */\nexport interface ListValue {\n  /** Repeated field of dynamically typed values. */\n  values: any[];\n}\n\nfunction createBaseStruct(): Struct {\n  return { fields: {} };\n}\n\nexport const Struct: MessageFns<Struct> & StructWrapperFns = {\n  encode(message: Struct, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    Object.entries(message.fields).forEach(([key, value]) => {\n      if (value !== undefined) {\n        Struct_FieldsEntry.encode({ key: key as any, value }, writer.uint32(10).fork()).join();\n      }\n    });\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): Struct {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseStruct();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          const entry1 = Struct_FieldsEntry.decode(reader, reader.uint32());\n          if (entry1.value !== undefined) {\n            message.fields[entry1.key] = entry1.value;\n          }\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<Struct>, I>>(base?: I): Struct {\n    return Struct.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<Struct>, I>>(object: I): Struct {\n    const message = createBaseStruct();\n    message.fields = Object.entries(object.fields ?? {}).reduce<{ [key: string]: any | undefined }>(\n      (acc, [key, value]) => {\n        if (value !== undefined) {\n          acc[key] = value;\n        }\n        return acc;\n      },\n      {},\n    );\n    return message;\n  },\n\n  wrap(object: { [key: string]: any } | undefined): Struct {\n    const struct = createBaseStruct();\n\n    if (object !== undefined) {\n      for (const key of Object.keys(object)) {\n        struct.fields[key] = object[key];\n      }\n    }\n    return struct;\n  },\n\n  unwrap(message: Struct): { [key: string]: any } {\n    const object: { [key: string]: any } = {};\n    if (message.fields) {\n      for (const key of Object.keys(message.fields)) {\n        object[key] = message.fields[key];\n      }\n    }\n    return object;\n  },\n};\n\nfunction createBaseStruct_FieldsEntry(): Struct_FieldsEntry {\n  return { key: \"\", value: undefined };\n}\n\nexport const Struct_FieldsEntry: MessageFns<Struct_FieldsEntry> = {\n  encode(message: Struct_FieldsEntry, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.key !== \"\") {\n      writer.uint32(10).string(message.key);\n    }\n    if (message.value !== undefined) {\n      Value.encode(Value.wrap(message.value), writer.uint32(18).fork()).join();\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): Struct_FieldsEntry {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseStruct_FieldsEntry();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.key = reader.string();\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.value = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<Struct_FieldsEntry>, I>>(base?: I): Struct_FieldsEntry {\n    return Struct_FieldsEntry.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<Struct_FieldsEntry>, I>>(object: I): Struct_FieldsEntry {\n    const message = createBaseStruct_FieldsEntry();\n    message.key = object.key ?? \"\";\n    message.value = object.value ?? undefined;\n    return message;\n  },\n};\n\nfunction createBaseValue(): Value {\n  return {\n    nullValue: undefined,\n    numberValue: undefined,\n    stringValue: undefined,\n    boolValue: undefined,\n    structValue: undefined,\n    listValue: undefined,\n  };\n}\n\nexport const Value: MessageFns<Value> & AnyValueWrapperFns = {\n  encode(message: Value, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.nullValue !== undefined) {\n      writer.uint32(8).int32(message.nullValue);\n    }\n    if (message.numberValue !== undefined) {\n      writer.uint32(17).double(message.numberValue);\n    }\n    if (message.stringValue !== undefined) {\n      writer.uint32(26).string(message.stringValue);\n    }\n    if (message.boolValue !== undefined) {\n      writer.uint32(32).bool(message.boolValue);\n    }\n    if (message.structValue !== undefined) {\n      Struct.encode(Struct.wrap(message.structValue), writer.uint32(42).fork()).join();\n    }\n    if (message.listValue !== undefined) {\n      ListValue.encode(ListValue.wrap(message.listValue), writer.uint32(50).fork()).join();\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): Value {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseValue();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 8) {\n            break;\n          }\n\n          message.nullValue = reader.int32() as any;\n          continue;\n        }\n        case 2: {\n          if (tag !== 17) {\n            break;\n          }\n\n          message.numberValue = reader.double();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.stringValue = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 32) {\n            break;\n          }\n\n          message.boolValue = reader.bool();\n          continue;\n        }\n        case 5: {\n          if (tag !== 42) {\n            break;\n          }\n\n          message.structValue = Struct.unwrap(Struct.decode(reader, reader.uint32()));\n          continue;\n        }\n        case 6: {\n          if (tag !== 50) {\n            break;\n          }\n\n          message.listValue = ListValue.unwrap(ListValue.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<Value>, I>>(base?: I): Value {\n    return Value.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<Value>, I>>(object: I): Value {\n    const message = createBaseValue();\n    message.nullValue = object.nullValue ?? undefined;\n    message.numberValue = object.numberValue ?? undefined;\n    message.stringValue = object.stringValue ?? undefined;\n    message.boolValue = object.boolValue ?? undefined;\n    message.structValue = object.structValue ?? undefined;\n    message.listValue = object.listValue ?? undefined;\n    return message;\n  },\n\n  wrap(value: any): Value {\n    const result = createBaseValue();\n    if (value === null) {\n      result.nullValue = NullValue.NULL_VALUE;\n    } else if (typeof value === \"boolean\") {\n      result.boolValue = value;\n    } else if (typeof value === \"number\") {\n      result.numberValue = value;\n    } else if (typeof value === \"string\") {\n      result.stringValue = value;\n    } else if (globalThis.Array.isArray(value)) {\n      result.listValue = value;\n    } else if (typeof value === \"object\") {\n      result.structValue = value;\n    } else if (typeof value !== \"undefined\") {\n      throw new globalThis.Error(\"Unsupported any value type: \" + typeof value);\n    }\n    return result;\n  },\n\n  unwrap(message: any): string | number | boolean | Object | null | Array<any> | undefined {\n    if (message.stringValue !== undefined) {\n      return message.stringValue;\n    } else if (message?.numberValue !== undefined) {\n      return message.numberValue;\n    } else if (message?.boolValue !== undefined) {\n      return message.boolValue;\n    } else if (message?.structValue !== undefined) {\n      return message.structValue as any;\n    } else if (message?.listValue !== undefined) {\n      return message.listValue;\n    } else if (message?.nullValue !== undefined) {\n      return null;\n    }\n    return undefined;\n  },\n};\n\nfunction createBaseListValue(): ListValue {\n  return { values: [] };\n}\n\nexport const ListValue: MessageFns<ListValue> & ListValueWrapperFns = {\n  encode(message: ListValue, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    for (const v of message.values) {\n      Value.encode(Value.wrap(v!), writer.uint32(10).fork()).join();\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): ListValue {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseListValue();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.values.push(Value.unwrap(Value.decode(reader, reader.uint32())));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<ListValue>, I>>(base?: I): ListValue {\n    return ListValue.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<ListValue>, I>>(object: I): ListValue {\n    const message = createBaseListValue();\n    message.values = object.values?.map((e) => e) || [];\n    return message;\n  },\n\n  wrap(array: Array<any> | undefined): ListValue {\n    const result = createBaseListValue();\n    result.values = array ?? [];\n    return result;\n  },\n\n  unwrap(message: ListValue): Array<any> {\n    if (message?.hasOwnProperty(\"values\") && globalThis.Array.isArray(message.values)) {\n      return message.values;\n    } else {\n      return message as any;\n    }\n  },\n};\n\ntype Builtin = Date | Function | Uint8Array | string | number | boolean | undefined;\n\nexport type DeepPartial<T> = T extends Builtin ? T\n  : T extends globalThis.Array<infer U> ? globalThis.Array<DeepPartial<U>>\n  : T extends ReadonlyArray<infer U> ? ReadonlyArray<DeepPartial<U>>\n  : T extends {} ? { [K in keyof T]?: DeepPartial<T[K]> }\n  : Partial<T>;\n\ntype KeysOfUnion<T> = T extends T ? keyof T : never;\nexport type Exact<P, I extends P> = P extends Builtin ? P\n  : P & { [K in keyof P]: Exact<P[K], I[K]> } & { [K in Exclude<keyof I, KeysOfUnion<P>>]: never };\n\nexport interface MessageFns<T> {\n  encode(message: T, writer?: BinaryWriter): BinaryWriter;\n  decode(input: BinaryReader | Uint8Array, length?: number): T;\n  create<I extends Exact<DeepPartial<T>, I>>(base?: I): T;\n  fromPartial<I extends Exact<DeepPartial<T>, I>>(object: I): T;\n}\n\nexport interface StructWrapperFns {\n  wrap(object: { [key: string]: any } | undefined): Struct;\n  unwrap(message: Struct): { [key: string]: any };\n}\n\nexport interface AnyValueWrapperFns {\n  wrap(value: any): Value;\n  unwrap(message: any): string | number | boolean | Object | null | Array<any> | undefined;\n}\n\nexport interface ListValueWrapperFns {\n  wrap(array: Array<any> | undefined): ListValue;\n  unwrap(message: ListValue): Array<any>;\n}\n","// Code generated by protoc-gen-ts_proto. DO NOT EDIT.\n// versions:\n//   protoc-gen-ts_proto  v2.7.7\n//   protoc               v5.29.3\n// source: patch.proto\n\n/* eslint-disable */\nimport { BinaryReader, BinaryWriter } from \"@bufbuild/protobuf/wire\";\nimport { Value } from \"./google/protobuf/struct\";\n\nexport const protobufPackage = \"ag_ui\";\n\nexport enum JsonPatchOperationType {\n  ADD = 0,\n  REMOVE = 1,\n  REPLACE = 2,\n  MOVE = 3,\n  COPY = 4,\n  TEST = 5,\n  UNRECOGNIZED = -1,\n}\n\nexport interface JsonPatchOperation {\n  op: JsonPatchOperationType;\n  path: string;\n  from?: string | undefined;\n  value?: any | undefined;\n}\n\nfunction createBaseJsonPatchOperation(): JsonPatchOperation {\n  return { op: 0, path: \"\", from: undefined, value: undefined };\n}\n\nexport const JsonPatchOperation: MessageFns<JsonPatchOperation> = {\n  encode(message: JsonPatchOperation, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.op !== 0) {\n      writer.uint32(8).int32(message.op);\n    }\n    if (message.path !== \"\") {\n      writer.uint32(18).string(message.path);\n    }\n    if (message.from !== undefined) {\n      writer.uint32(26).string(message.from);\n    }\n    if (message.value !== undefined) {\n      Value.encode(Value.wrap(message.value), writer.uint32(34).fork()).join();\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): JsonPatchOperation {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseJsonPatchOperation();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 8) {\n            break;\n          }\n\n          message.op = reader.int32() as any;\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.path = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.from = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n\n          message.value = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<JsonPatchOperation>, I>>(base?: I): JsonPatchOperation {\n    return JsonPatchOperation.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<JsonPatchOperation>, I>>(object: I): JsonPatchOperation {\n    const message = createBaseJsonPatchOperation();\n    message.op = object.op ?? 0;\n    message.path = object.path ?? \"\";\n    message.from = object.from ?? undefined;\n    message.value = object.value ?? undefined;\n    return message;\n  },\n};\n\ntype Builtin = Date | Function | Uint8Array | string | number | boolean | undefined;\n\nexport type DeepPartial<T> = T extends Builtin ? T\n  : T extends globalThis.Array<infer U> ? globalThis.Array<DeepPartial<U>>\n  : T extends ReadonlyArray<infer U> ? ReadonlyArray<DeepPartial<U>>\n  : T extends {} ? { [K in keyof T]?: DeepPartial<T[K]> }\n  : Partial<T>;\n\ntype KeysOfUnion<T> = T extends T ? keyof T : never;\nexport type Exact<P, I extends P> = P extends Builtin ? P\n  : P & { [K in keyof P]: Exact<P[K], I[K]> } & { [K in Exclude<keyof I, KeysOfUnion<P>>]: never };\n\nexport interface MessageFns<T> {\n  encode(message: T, writer?: BinaryWriter): BinaryWriter;\n  decode(input: BinaryReader | Uint8Array, length?: number): T;\n  create<I extends Exact<DeepPartial<T>, I>>(base?: I): T;\n  fromPartial<I extends Exact<DeepPartial<T>, I>>(object: I): T;\n}\n","// Code generated by protoc-gen-ts_proto. DO NOT EDIT.\n// versions:\n//   protoc-gen-ts_proto  v2.7.7\n//   protoc               v5.29.3\n// source: types.proto\n\n/* eslint-disable */\nimport { BinaryReader, BinaryWriter } from \"@bufbuild/protobuf/wire\";\n\nexport const protobufPackage = \"ag_ui\";\n\nexport interface ToolCall {\n  id: string;\n  type: string;\n  function: ToolCall_Function | undefined;\n}\n\nexport interface ToolCall_Function {\n  name: string;\n  arguments: string;\n}\n\nexport interface Message {\n  id: string;\n  role: string;\n  content?: string | undefined;\n  name?: string | undefined;\n  toolCalls: ToolCall[];\n  toolCallId?: string | undefined;\n  error?: string | undefined;\n}\n\nfunction createBaseToolCall(): ToolCall {\n  return { id: \"\", type: \"\", function: undefined };\n}\n\nexport const ToolCall: MessageFns<ToolCall> = {\n  encode(message: ToolCall, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.id !== \"\") {\n      writer.uint32(10).string(message.id);\n    }\n    if (message.type !== \"\") {\n      writer.uint32(18).string(message.type);\n    }\n    if (message.function !== undefined) {\n      ToolCall_Function.encode(message.function, writer.uint32(26).fork()).join();\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): ToolCall {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseToolCall();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.id = reader.string();\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.type = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.function = ToolCall_Function.decode(reader, reader.uint32());\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<ToolCall>, I>>(base?: I): ToolCall {\n    return ToolCall.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<ToolCall>, I>>(object: I): ToolCall {\n    const message = createBaseToolCall();\n    message.id = object.id ?? \"\";\n    message.type = object.type ?? \"\";\n    message.function = (object.function !== undefined && object.function !== null)\n      ? ToolCall_Function.fromPartial(object.function)\n      : undefined;\n    return message;\n  },\n};\n\nfunction createBaseToolCall_Function(): ToolCall_Function {\n  return { name: \"\", arguments: \"\" };\n}\n\nexport const ToolCall_Function: MessageFns<ToolCall_Function> = {\n  encode(message: ToolCall_Function, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.name !== \"\") {\n      writer.uint32(10).string(message.name);\n    }\n    if (message.arguments !== \"\") {\n      writer.uint32(18).string(message.arguments);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): ToolCall_Function {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseToolCall_Function();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.name = reader.string();\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.arguments = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<ToolCall_Function>, I>>(base?: I): ToolCall_Function {\n    return ToolCall_Function.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<ToolCall_Function>, I>>(object: I): ToolCall_Function {\n    const message = createBaseToolCall_Function();\n    message.name = object.name ?? \"\";\n    message.arguments = object.arguments ?? \"\";\n    return message;\n  },\n};\n\nfunction createBaseMessage(): Message {\n  return {\n    id: \"\",\n    role: \"\",\n    content: undefined,\n    name: undefined,\n    toolCalls: [],\n    toolCallId: undefined,\n    error: undefined,\n  };\n}\n\nexport const Message: MessageFns<Message> = {\n  encode(message: Message, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.id !== \"\") {\n      writer.uint32(10).string(message.id);\n    }\n    if (message.role !== \"\") {\n      writer.uint32(18).string(message.role);\n    }\n    if (message.content !== undefined) {\n      writer.uint32(26).string(message.content);\n    }\n    if (message.name !== undefined) {\n      writer.uint32(34).string(message.name);\n    }\n    for (const v of message.toolCalls) {\n      ToolCall.encode(v!, writer.uint32(42).fork()).join();\n    }\n    if (message.toolCallId !== undefined) {\n      writer.uint32(50).string(message.toolCallId);\n    }\n    if (message.error !== undefined) {\n      writer.uint32(58).string(message.error);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): Message {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseMessage();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.id = reader.string();\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.role = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.content = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n\n          message.name = reader.string();\n          continue;\n        }\n        case 5: {\n          if (tag !== 42) {\n            break;\n          }\n\n          message.toolCalls.push(ToolCall.decode(reader, reader.uint32()));\n          continue;\n        }\n        case 6: {\n          if (tag !== 50) {\n            break;\n          }\n\n          message.toolCallId = reader.string();\n          continue;\n        }\n        case 7: {\n          if (tag !== 58) {\n            break;\n          }\n\n          message.error = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<Message>, I>>(base?: I): Message {\n    return Message.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<Message>, I>>(object: I): Message {\n    const message = createBaseMessage();\n    message.id = object.id ?? \"\";\n    message.role = object.role ?? \"\";\n    message.content = object.content ?? undefined;\n    message.name = object.name ?? undefined;\n    message.toolCalls = object.toolCalls?.map((e) => ToolCall.fromPartial(e)) || [];\n    message.toolCallId = object.toolCallId ?? undefined;\n    message.error = object.error ?? undefined;\n    return message;\n  },\n};\n\ntype Builtin = Date | Function | Uint8Array | string | number | boolean | undefined;\n\nexport type DeepPartial<T> = T extends Builtin ? T\n  : T extends globalThis.Array<infer U> ? globalThis.Array<DeepPartial<U>>\n  : T extends ReadonlyArray<infer U> ? ReadonlyArray<DeepPartial<U>>\n  : T extends {} ? { [K in keyof T]?: DeepPartial<T[K]> }\n  : Partial<T>;\n\ntype KeysOfUnion<T> = T extends T ? keyof T : never;\nexport type Exact<P, I extends P> = P extends Builtin ? P\n  : P & { [K in keyof P]: Exact<P[K], I[K]> } & { [K in Exclude<keyof I, KeysOfUnion<P>>]: never };\n\nexport interface MessageFns<T> {\n  encode(message: T, writer?: BinaryWriter): BinaryWriter;\n  decode(input: BinaryReader | Uint8Array, length?: number): T;\n  create<I extends Exact<DeepPartial<T>, I>>(base?: I): T;\n  fromPartial<I extends Exact<DeepPartial<T>, I>>(object: I): T;\n}\n","export { encode, decode } from \"./proto\";\n\nexport const AGUI_MEDIA_TYPE = \"application/vnd.ag-ui.event+proto\";\n"],"names":["EventType","BinaryReader","BinaryWriter","BinaryReader","BinaryWriter","JsonPatchOperationType","BinaryWriter","BinaryReader","BinaryReader","BinaryWriter","BinaryWriter","BinaryReader","EventType","BinaryWriter","BinaryReader","EventType"],"mappings":"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"}},
    {"offset": {"line": 3403, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/node_modules/%40ag-ui/langgraph/node_modules/%40langchain/langgraph-sdk/node_modules/p-retry/index.js"],"sourcesContent":["'use strict';\nconst retry = require('retry');\n\nconst networkErrorMsgs = [\n\t'Failed to fetch', // Chrome\n\t'NetworkError when attempting to fetch resource.', // Firefox\n\t'The Internet connection appears to be offline.', // Safari\n\t'Network request failed' // `cross-fetch`\n];\n\nclass AbortError extends Error {\n\tconstructor(message) {\n\t\tsuper();\n\n\t\tif (message instanceof Error) {\n\t\t\tthis.originalError = message;\n\t\t\t({message} = message);\n\t\t} else {\n\t\t\tthis.originalError = new Error(message);\n\t\t\tthis.originalError.stack = this.stack;\n\t\t}\n\n\t\tthis.name = 'AbortError';\n\t\tthis.message = message;\n\t}\n}\n\nconst decorateErrorWithCounts = (error, attemptNumber, options) => {\n\t// Minus 1 from attemptNumber because the first attempt does not count as a retry\n\tconst retriesLeft = options.retries - (attemptNumber - 1);\n\n\terror.attemptNumber = attemptNumber;\n\terror.retriesLeft = retriesLeft;\n\treturn error;\n};\n\nconst isNetworkError = errorMessage => networkErrorMsgs.includes(errorMessage);\n\nconst pRetry = (input, options) => new Promise((resolve, reject) => {\n\toptions = {\n\t\tonFailedAttempt: () => {},\n\t\tretries: 10,\n\t\t...options\n\t};\n\n\tconst operation = retry.operation(options);\n\n\toperation.attempt(async attemptNumber => {\n\t\ttry {\n\t\t\tresolve(await input(attemptNumber));\n\t\t} catch (error) {\n\t\t\tif (!(error instanceof Error)) {\n\t\t\t\treject(new TypeError(`Non-error was thrown: \"${error}\". You should only throw errors.`));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (error instanceof AbortError) {\n\t\t\t\toperation.stop();\n\t\t\t\treject(error.originalError);\n\t\t\t} else if (error instanceof TypeError && !isNetworkError(error.message)) {\n\t\t\t\toperation.stop();\n\t\t\t\treject(error);\n\t\t\t} else {\n\t\t\t\tdecorateErrorWithCounts(error, attemptNumber, options);\n\n\t\t\t\ttry {\n\t\t\t\t\tawait options.onFailedAttempt(error);\n\t\t\t\t} catch (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!operation.retry(error)) {\n\t\t\t\t\treject(operation.mainError());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n});\n\nmodule.exports = pRetry;\n// TODO: remove this in the next major version\nmodule.exports.default = pRetry;\n\nmodule.exports.AbortError = AbortError;\n"],"names":[],"mappings":"AACA,MAAM;AAEN,MAAM,mBAAmB;IACxB;IACA;IACA;IACA,yBAAyB,gBAAgB;CACzC;AAED,MAAM,mBAAmB;IACxB,YAAY,OAAO,CAAE;QACpB,KAAK;QAEL,IAAI,mBAAmB,OAAO;YAC7B,IAAI,CAAC,aAAa,GAAG;YACrB,CAAC,EAAC,OAAO,EAAC,GAAG,OAAO;QACrB,OAAO;YACN,IAAI,CAAC,aAAa,GAAG,IAAI,MAAM;YAC/B,IAAI,CAAC,aAAa,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK;QACtC;QAEA,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,OAAO,GAAG;IAChB;AACD;AAEA,MAAM,0BAA0B,CAAC,OAAO,eAAe;IACtD,iFAAiF;IACjF,MAAM,cAAc,QAAQ,OAAO,GAAG,CAAC,gBAAgB,CAAC;IAExD,MAAM,aAAa,GAAG;IACtB,MAAM,WAAW,GAAG;IACpB,OAAO;AACR;AAEA,MAAM,iBAAiB,CAAA,eAAgB,iBAAiB,QAAQ,CAAC;AAEjE,MAAM,SAAS,CAAC,OAAO,UAAY,IAAI,QAAQ,CAAC,SAAS;QACxD,UAAU;YACT,iBAAiB,KAAO;YACxB,SAAS;YACT,GAAG,OAAO;QACX;QAEA,MAAM,YAAY,MAAM,SAAS,CAAC;QAElC,UAAU,OAAO,CAAC,OAAM;YACvB,IAAI;gBACH,QAAQ,MAAM,MAAM;YACrB,EAAE,OAAO,OAAO;gBACf,IAAI,CAAC,CAAC,iBAAiB,KAAK,GAAG;oBAC9B,OAAO,IAAI,UAAU,CAAC,uBAAuB,EAAE,MAAM,gCAAgC,CAAC;oBACtF;gBACD;gBAEA,IAAI,iBAAiB,YAAY;oBAChC,UAAU,IAAI;oBACd,OAAO,MAAM,aAAa;gBAC3B,OAAO,IAAI,iBAAiB,aAAa,CAAC,eAAe,MAAM,OAAO,GAAG;oBACxE,UAAU,IAAI;oBACd,OAAO;gBACR,OAAO;oBACN,wBAAwB,OAAO,eAAe;oBAE9C,IAAI;wBACH,MAAM,QAAQ,eAAe,CAAC;oBAC/B,EAAE,OAAO,OAAO;wBACf,OAAO;wBACP;oBACD;oBAEA,IAAI,CAAC,UAAU,KAAK,CAAC,QAAQ;wBAC5B,OAAO,UAAU,SAAS;oBAC3B;gBACD;YACD;QACD;IACD;AAEA,OAAO,OAAO,GAAG;AACjB,8CAA8C;AAC9C,OAAO,OAAO,CAAC,OAAO,GAAG;AAEzB,OAAO,OAAO,CAAC,UAAU,GAAG","ignoreList":[0]}},
    {"offset": {"line": 3476, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/node_modules/%40ag-ui/langgraph/src/index.ts","file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/node_modules/%40ag-ui/langgraph/src/agent.ts","file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/node_modules/%40ag-ui/langgraph/src/types.ts","file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/node_modules/%40ag-ui/langgraph/src/utils.ts"],"sourcesContent":["import { HttpAgent } from \"@ag-ui/client\";\n\nexport * from './agent'\nexport class LangGraphHttpAgent extends HttpAgent {}","import { Observable, Subscriber } from \"rxjs\";\nimport {\n  Client as LangGraphClient,\n  EventsStreamEvent,\n  StreamMode,\n  Config as LangGraphConfig,\n  ThreadState,\n  Assistant,\n  Message as LangGraphMessage,\n  Config,\n  Interrupt,\n  Thread,\n} from \"@langchain/langgraph-sdk\";\nimport { randomUUID } from \"@ag-ui/client\";\nimport {\n  LangGraphPlatformMessage,\n  CustomEventNames,\n  LangGraphEventTypes,\n  State,\n  MessagesInProgressRecord,\n  ThinkingInProgress,\n  SchemaKeys,\n  MessageInProgress,\n  RunMetadata,\n  PredictStateTool,\n  LangGraphReasoning,\n  StateEnrichment,\n  LangGraphToolWithName,\n} from \"./types\";\nimport {\n  AbstractAgent,\n  AgentConfig,\n  CustomEvent,\n  EventType,\n  MessagesSnapshotEvent,\n  RawEvent,\n  RunAgentInput,\n  RunErrorEvent,\n  RunFinishedEvent,\n  RunStartedEvent,\n  StateDeltaEvent,\n  StateSnapshotEvent,\n  StepFinishedEvent,\n  StepStartedEvent,\n  TextMessageContentEvent,\n  TextMessageEndEvent,\n  TextMessageStartEvent,\n  ToolCallArgsEvent,\n  ToolCallEndEvent,\n  ToolCallStartEvent,\n  ToolCallResultEvent,\n  ThinkingTextMessageStartEvent,\n  ThinkingTextMessageContentEvent,\n  ThinkingTextMessageEndEvent,\n  ThinkingStartEvent,\n  ThinkingEndEvent,\n} from \"@ag-ui/client\";\nimport { RunsStreamPayload } from \"@langchain/langgraph-sdk/dist/types\";\nimport {\n  aguiMessagesToLangChain,\n  DEFAULT_SCHEMA_KEYS,\n  filterObjectBySchemaKeys,\n  getStreamPayloadInput,\n  langchainMessagesToAgui,\n  resolveMessageContent,\n  resolveReasoningContent,\n} from \"@/utils\";\n\nexport type ProcessedEvents =\n  | TextMessageStartEvent\n  | TextMessageContentEvent\n  | TextMessageEndEvent\n  | ThinkingTextMessageStartEvent\n  | ThinkingTextMessageContentEvent\n  | ThinkingTextMessageEndEvent\n  | ToolCallStartEvent\n  | ToolCallArgsEvent\n  | ToolCallEndEvent\n  | ToolCallResultEvent\n  | ThinkingStartEvent\n  | ThinkingEndEvent\n  | StateSnapshotEvent\n  | StateDeltaEvent\n  | MessagesSnapshotEvent\n  | RawEvent\n  | CustomEvent\n  | RunStartedEvent\n  | RunFinishedEvent\n  | RunErrorEvent\n  | StepStartedEvent\n  | StepFinishedEvent;\n\ntype RunAgentExtendedInput<\n  TStreamMode extends StreamMode | StreamMode[] = StreamMode,\n  TSubgraphs extends boolean = false,\n> = Omit<RunAgentInput, \"forwardedProps\"> & {\n  forwardedProps?: Omit<RunsStreamPayload<TStreamMode, TSubgraphs>, \"input\"> & {\n    nodeName?: string;\n    threadMetadata?: Record<string, any>;\n  };\n};\n\ninterface RegenerateInput extends RunAgentExtendedInput {\n  messageCheckpoint: LangGraphMessage;\n}\n\nexport interface LangGraphAgentConfig extends AgentConfig {\n  client?: LangGraphClient;\n  deploymentUrl: string;\n  langsmithApiKey?: string;\n  propertyHeaders?: Record<string, string>;\n  assistantConfig?: LangGraphConfig;\n  agentName?: string;\n  graphId: string;\n}\n\nexport class LangGraphAgent extends AbstractAgent {\n  client: LangGraphClient;\n  assistantConfig?: LangGraphConfig;\n  agentName?: string;\n  graphId: string;\n  assistant?: Assistant;\n  messagesInProcess: MessagesInProgressRecord;\n  thinkingProcess: null | ThinkingInProgress;\n  activeRun?: RunMetadata;\n  // Stop control flags\n  private cancelRequested: boolean = false;\n  private cancelSent: boolean = false;\n  // @ts-expect-error no need to initialize subscriber right now\n  subscriber: Subscriber<ProcessedEvents>;\n  constantSchemaKeys: string[] = DEFAULT_SCHEMA_KEYS;\n  config: LangGraphAgentConfig;\n\n  constructor(config: LangGraphAgentConfig) {\n    super(config);\n    this.config = config;\n    this.messagesInProcess = {};\n    this.agentName = config.agentName;\n    this.graphId = config.graphId;\n    this.assistantConfig = config.assistantConfig;\n    this.thinkingProcess = null;\n    this.client =\n      config?.client ??\n      new LangGraphClient({\n        apiUrl: config.deploymentUrl,\n        apiKey: config.langsmithApiKey,\n        defaultHeaders: { ...(config.propertyHeaders ?? {}) },\n      });\n  }\n\n  public clone() {\n    return new LangGraphAgent(this.config);\n  }\n\n  dispatchEvent(event: ProcessedEvents) {\n    this.subscriber.next(event);\n    return true;\n  }\n\n  run(input: RunAgentInput) {\n    return new Observable<ProcessedEvents>((subscriber) => {\n      this.runAgentStream(input, subscriber);\n      return () => {};\n    });\n  }\n\n  async runAgentStream(input: RunAgentExtendedInput, subscriber: Subscriber<ProcessedEvents>) {\n    this.activeRun = {\n      id: input.runId,\n      threadId: input.threadId,\n      hasFunctionStreaming: false,\n    };\n    // Reset cancel flags for this run\n    this.cancelRequested = false;\n    this.cancelSent = false;\n    this.subscriber = subscriber;\n    if (!this.assistant) {\n      this.assistant = await this.getAssistant();\n    }\n    const threadId = input.threadId ?? randomUUID();\n    const streamMode =\n      input.forwardedProps?.streamMode ?? ([\"events\", \"values\", \"updates\"] satisfies StreamMode[]);\n    const preparedStream = await this.prepareStream({ ...input, threadId }, streamMode);\n\n    if (!preparedStream) {\n      return subscriber.error(\"No stream to regenerate\");\n    }\n\n    await this.handleStreamEvents(preparedStream, threadId, subscriber, input, Array.isArray(streamMode) ? streamMode : [streamMode]);\n  }\n\n  async prepareRegenerateStream(input: RegenerateInput, streamMode: StreamMode | StreamMode[]) {\n    const { threadId, messageCheckpoint } = input;\n\n    const timeTravelCheckpoint = await this.getCheckpointByMessage(\n      messageCheckpoint!.id!,\n      threadId,\n    );\n    if (!this.assistant) {\n      this.assistant = await this.getAssistant();\n    }\n\n    if (!timeTravelCheckpoint) {\n      return this.subscriber.error(\"No checkpoint found for message\");\n    }\n\n    const fork = await this.client.threads.updateState(threadId, {\n      values: this.langGraphDefaultMergeState(timeTravelCheckpoint.values, [], input),\n      checkpointId: timeTravelCheckpoint.checkpoint.checkpoint_id!,\n      asNode: timeTravelCheckpoint.next?.[0] ?? \"__start__\",\n    });\n\n    const payload = {\n      ...(input.forwardedProps ?? {}),\n      input: this.langGraphDefaultMergeState(\n        timeTravelCheckpoint.values,\n        [messageCheckpoint],\n        input,\n      ),\n      // @ts-ignore\n      checkpointId: fork.checkpoint.checkpoint_id!,\n      streamMode,\n    };\n    return {\n      streamResponse: this.client.runs.stream(threadId, this.assistant.assistant_id, payload),\n      state: timeTravelCheckpoint as ThreadState<State>,\n      streamMode,\n    };\n  }\n\n  async prepareStream(input: RunAgentExtendedInput, streamMode: StreamMode | StreamMode[]) {\n    let {\n      threadId: inputThreadId,\n      state: inputState,\n      messages,\n      tools,\n      context,\n      forwardedProps,\n    } = input;\n    // If a manual emittance happens, it is the ultimate source of truth of state, unless a node has exited.\n    // Therefore, this value should either hold null, or the only edition of state that should be used.\n    this.activeRun!.manuallyEmittedState = null;\n\n    const nodeNameInput = forwardedProps?.nodeName;\n    const threadId = inputThreadId ?? randomUUID();\n\n    if (!this.assistant) {\n      this.assistant = await this.getAssistant();\n    }\n\n    const thread = await this.getOrCreateThread(threadId, forwardedProps?.threadMetadata);\n    this.activeRun!.threadId = thread.thread_id;\n\n    const agentState: ThreadState<State> =\n      (await this.client.threads.getState(thread.thread_id)) ??\n      ({ values: {} } as ThreadState<State>);\n    const agentStateMessages = agentState.values.messages ?? [];\n    const inputMessagesToLangchain = aguiMessagesToLangChain(messages);\n    const stateValuesDiff = this.langGraphDefaultMergeState(\n      { ...inputState, messages: agentStateMessages },\n      inputMessagesToLangchain,\n      input,\n    );\n    // Messages are a combination of existing messages in state + everything that was newly sent\n    let threadState = {\n      ...agentState,\n      values: {\n        ...stateValuesDiff,\n        messages: [...agentStateMessages, ...(stateValuesDiff.messages ?? [])],\n      },\n    };\n    let stateValues = threadState.values;\n    this.activeRun!.schemaKeys = await this.getSchemaKeys();\n\n    if (\n      (agentState.values.messages ?? []).length > messages.filter((m) => m.role !== \"system\").length\n    ) {\n      let lastUserMessage: LangGraphMessage | null = null;\n      // Find the first user message by working backwards from the last message\n      for (let i = messages.length - 1; i >= 0; i--) {\n        if (messages[i].role === \"user\") {\n          lastUserMessage = aguiMessagesToLangChain([messages[i]])[0];\n          break;\n        }\n      }\n\n      if (!lastUserMessage) {\n        return this.subscriber.error(\"No user message found in messages to regenerate\");\n      }\n\n      return this.prepareRegenerateStream(\n        { ...input, messageCheckpoint: lastUserMessage },\n        streamMode,\n      );\n    }\n    this.activeRun!.graphInfo = await this.client.assistants.getGraph(this.assistant.assistant_id);\n\n    const mode =\n      !forwardedProps?.command?.resume &&\n      threadId &&\n      this.activeRun!.nodeName != \"__end__\" &&\n      this.activeRun!.nodeName\n        ? \"continue\"\n        : \"start\";\n\n    if (mode === \"continue\") {\n      const nodeBefore = this.activeRun!.graphInfo.edges.find(\n        (e) => e.target === this.activeRun!.nodeName,\n      );\n      await this.client.threads.updateState(threadId, {\n        values: inputState,\n        asNode: nodeBefore?.source,\n      });\n    }\n\n    const payloadInput = getStreamPayloadInput({\n      mode,\n      state: stateValues,\n      schemaKeys: this.activeRun!.schemaKeys,\n    });\n\n    let payloadConfig: LangGraphConfig | undefined;\n    const configsToMerge = [this.assistantConfig, forwardedProps?.config].filter(\n      Boolean,\n    ) as LangGraphConfig[];\n    if (configsToMerge.length) {\n      payloadConfig = await this.mergeConfigs({\n        configs: configsToMerge,\n        assistant: this.assistant,\n        schemaKeys: this.activeRun!.schemaKeys,\n      });\n    }\n    const payload = {\n      ...forwardedProps,\n      streamMode,\n      input: payloadInput,\n      config: payloadConfig,\n      context: {\n        ...context,\n        ...(payloadConfig?.configurable ?? {}),\n      }\n    };\n\n    // If there are still outstanding unresolved interrupts, we must force resolution of them before moving forward\n    const interrupts = (agentState.tasks?.[0]?.interrupts ?? []) as Interrupt[];\n    if (interrupts?.length && !forwardedProps?.command?.resume) {\n      this.dispatchEvent({\n        type: EventType.RUN_STARTED,\n        threadId,\n        runId: input.runId,\n      });\n      this.handleNodeChange(nodeNameInput)\n\n      interrupts.forEach((interrupt) => {\n        this.dispatchEvent({\n          type: EventType.CUSTOM,\n          name: LangGraphEventTypes.OnInterrupt,\n          value:\n            typeof interrupt.value === \"string\" ? interrupt.value : JSON.stringify(interrupt.value),\n          rawEvent: interrupt,\n        });\n      });\n\n      this.dispatchEvent({\n        type: EventType.RUN_FINISHED,\n        threadId,\n        runId: input.runId,\n      });\n      return this.subscriber.complete();\n    }\n\n    return {\n      // @ts-ignore\n      streamResponse: this.client.runs.stream(threadId, this.assistant.assistant_id, payload),\n      state: threadState as ThreadState<State>,\n    };\n  }\n\n  async handleStreamEvents(\n    stream: Awaited<\n      ReturnType<typeof this.prepareStream> | ReturnType<typeof this.prepareRegenerateStream>\n    >,\n    threadId: string,\n    subscriber: Subscriber<ProcessedEvents>,\n    input: RunAgentExtendedInput,\n    streamModes: StreamMode | StreamMode[],\n  ) {\n    const { forwardedProps } = input;\n    const nodeNameInput = forwardedProps?.nodeName;\n    this.subscriber = subscriber;\n    let shouldExit = false;\n    if (!stream) return;\n\n    let { streamResponse, state } = stream;\n\n    this.activeRun!.prevNodeName = null;\n    let latestStateValues = {} as ThreadState<State>[\"values\"];\n    let updatedState = state;\n\n    try {\n      this.dispatchEvent({\n        type: EventType.RUN_STARTED,\n        threadId,\n        runId: this.activeRun!.id,\n      });\n      this.handleNodeChange(nodeNameInput)\n\n      for await (let streamResponseChunk of streamResponse) {\n        // If a cancel was requested and we haven't sent it yet, try now.\n        if (\n          this.cancelRequested &&\n          !this.cancelSent &&\n          this.activeRun?.threadId &&\n          this.activeRun?.id\n        ) {\n          try {\n            await this.client.runs.cancel(this.activeRun.threadId, this.activeRun.id);\n          } catch (_) {\n            // Ignore cancellation errors\n          } finally {\n            this.cancelSent = true;\n          }\n          // Best-effort: ask iterator to close early\n          try {\n            // Many async iterables used for streaming implement return()\n            await (streamResponse as any)?.return?.();\n          } catch (_) {}\n          break;\n        }\n\n        const subgraphsStreamEnabled = input.forwardedProps?.streamSubgraphs;\n        const isSubgraphStream =\n          subgraphsStreamEnabled &&\n          (streamResponseChunk.event.startsWith(\"events\") ||\n            streamResponseChunk.event.startsWith(\"values\"));\n\n        // @ts-ignore\n        if (!streamModes.includes(streamResponseChunk.event as StreamMode) && !isSubgraphStream && streamResponseChunk.event !== 'error') {\n          continue;\n        }\n\n        // Force event type, as data is not properly defined on the LG side.\n        type EventsChunkData = {\n          __interrupt__?: any;\n          metadata: Record<string, any>;\n          event: string;\n          data: any;\n          [key: string]: unknown;\n        };\n        const chunk = streamResponseChunk as EventsStreamEvent & { data: EventsChunkData };\n\n        if (streamResponseChunk.event === \"error\") {\n          this.dispatchEvent({\n            type: EventType.RUN_ERROR,\n            message: streamResponseChunk.data.message,\n            rawEvent: streamResponseChunk,\n          });\n          break;\n        }\n\n        if (streamResponseChunk.event === \"updates\") {\n          continue;\n        }\n\n        if (streamResponseChunk.event === \"values\") {\n          latestStateValues = chunk.data;\n          continue;\n        } else if (subgraphsStreamEnabled && chunk.event.startsWith(\"values|\")) {\n          latestStateValues = {\n            ...latestStateValues,\n            ...chunk.data,\n          };\n          continue;\n        }\n\n        const chunkData = chunk.data;\n        const metadata = chunkData.metadata ?? {};\n        const currentNodeName = metadata.langgraph_node;\n        const eventType = chunkData.event;\n\n        // Set server-assigned run id as soon as available\n        if (metadata.run_id) {\n          this.activeRun!.id = metadata.run_id;\n          this.activeRun!.serverRunIdKnown = true;\n          // If cancel was requested earlier (before server id was known), send it now.\n          if (this.cancelRequested && !this.cancelSent && this.activeRun?.threadId) {\n            try {\n              await this.client.runs.cancel(this.activeRun.threadId!, this.activeRun.id);\n            } catch (_) {\n              // Ignore cancellation errors\n            } finally {\n              this.cancelSent = true;\n            }\n          }\n        }\n\n        if (currentNodeName && currentNodeName !== this.activeRun!.nodeName) {\n          this.handleNodeChange(currentNodeName)\n        }\n\n        shouldExit =\n          shouldExit ||\n          (eventType === LangGraphEventTypes.OnCustomEvent &&\n            chunkData.name === CustomEventNames.Exit);\n\n        if (eventType === LangGraphEventTypes.OnChainEnd && this.activeRun!.nodeName === currentNodeName) {\n          this.activeRun!.exitingNode = true;\n        }\n        if (this.activeRun!.exitingNode) {\n          this.activeRun!.manuallyEmittedState = null;\n        }\n\n        // we only want to update the node name under certain conditions\n        // since we don't need any internal node names to be sent to the frontend\n        if (this.activeRun!.graphInfo?.[\"nodes\"].some((node) => node.id === currentNodeName)) {\n          this.handleNodeChange(currentNodeName)\n        }\n\n        updatedState.values = this.activeRun!.manuallyEmittedState ?? latestStateValues;\n\n        if (!this.activeRun!.nodeName) {\n          continue;\n        }\n\n        const hasStateDiff = JSON.stringify(updatedState) !== JSON.stringify(state);\n        // We should not update snapshot while a message is in progress.\n        if (\n          (hasStateDiff ||\n            this.activeRun!.prevNodeName != this.activeRun!.nodeName ||\n            this.activeRun!.exitingNode) &&\n          !Boolean(this.getMessageInProgress(this.activeRun!.id))\n        ) {\n          state = updatedState;\n          this.activeRun!.prevNodeName = this.activeRun!.nodeName;\n\n          this.dispatchEvent({\n            type: EventType.STATE_SNAPSHOT,\n            snapshot: this.getStateSnapshot(state),\n            rawEvent: chunk,\n          });\n        }\n\n        this.dispatchEvent({\n          type: EventType.RAW,\n          event: chunkData,\n        });\n\n        this.handleSingleEvent(chunkData);\n      }\n\n      state = await this.client.threads.getState(threadId);\n      const tasks = state.tasks;\n      const interrupts = (tasks?.[0]?.interrupts ?? []) as Interrupt[];\n      const isEndNode = state.next.length === 0;\n      const writes = state.metadata?.writes ?? {};\n\n      // Initialize a new node name to use in the next if block\n      let newNodeName = this.activeRun!.nodeName!;\n\n      if (!interrupts?.length) {\n        newNodeName = isEndNode ? \"__end__\" : (state.next[0] ?? Object.keys(writes)[0]);\n      }\n\n      interrupts.forEach((interrupt) => {\n        this.dispatchEvent({\n          type: EventType.CUSTOM,\n          name: LangGraphEventTypes.OnInterrupt,\n          value:\n            typeof interrupt.value === \"string\" ? interrupt.value : JSON.stringify(interrupt.value),\n          rawEvent: interrupt,\n        });\n      });\n\n      this.handleNodeChange(newNodeName);\n      // Immediately turn off new step\n      this.handleNodeChange(undefined);\n\n      this.dispatchEvent({\n        type: EventType.STATE_SNAPSHOT,\n        snapshot: this.getStateSnapshot(state),\n      });\n      this.dispatchEvent({\n        type: EventType.MESSAGES_SNAPSHOT,\n        messages: langchainMessagesToAgui((state.values as { messages: any[] }).messages ?? []),\n      });\n\n      this.dispatchEvent({\n        type: EventType.RUN_FINISHED,\n        threadId,\n        runId: this.activeRun!.id,\n      });\n      // Reset cancel flags when run completes\n      this.cancelRequested = false;\n      this.cancelSent = false;\n      this.activeRun = undefined;\n      return subscriber.complete();\n    } catch (e) {\n      return subscriber.error(e);\n    }\n  }\n\n  handleSingleEvent(event: any): void {\n    switch (event.event) {\n      case LangGraphEventTypes.OnChatModelStream:\n        let shouldEmitMessages = event.metadata[\"emit-messages\"] ?? true;\n        let shouldEmitToolCalls = event.metadata[\"emit-tool-calls\"] ?? true;\n\n        if (event.data.chunk.response_metadata.finish_reason) return;\n        let currentStream = this.getMessageInProgress(this.activeRun!.id);\n        const hasCurrentStream = Boolean(currentStream?.id);\n        const toolCallData = event.data.chunk.tool_call_chunks?.[0];\n        const toolCallUsedToPredictState = event.metadata[\"predict_state\"]?.some(\n          (predictStateTool: PredictStateTool) => predictStateTool.tool === toolCallData?.name,\n        );\n\n        const isToolCallStartEvent = !hasCurrentStream && toolCallData?.name;\n        const isToolCallArgsEvent =\n          hasCurrentStream && currentStream?.toolCallId && toolCallData?.args;\n        const isToolCallEndEvent = hasCurrentStream && currentStream?.toolCallId && !toolCallData;\n\n        if (isToolCallEndEvent || isToolCallArgsEvent || isToolCallStartEvent) {\n          this.activeRun!.hasFunctionStreaming = true;\n        }\n\n        const reasoningData = resolveReasoningContent(event.data);\n        const messageContent = resolveMessageContent(event.data.chunk.content);\n        const isMessageContentEvent = Boolean(!toolCallData && messageContent);\n\n        const isMessageEndEvent =\n          hasCurrentStream && !currentStream?.toolCallId && !isMessageContentEvent;\n\n        if (reasoningData) {\n          this.handleThinkingEvent(reasoningData);\n          break;\n        }\n\n        if (!reasoningData && this.thinkingProcess) {\n          this.dispatchEvent({\n            type: EventType.THINKING_TEXT_MESSAGE_END,\n          });\n          this.dispatchEvent({\n            type: EventType.THINKING_END,\n          });\n          this.thinkingProcess = null;\n        }\n\n        if (toolCallUsedToPredictState) {\n          this.dispatchEvent({\n            type: EventType.CUSTOM,\n            name: \"PredictState\",\n            value: event.metadata[\"predict_state\"],\n          });\n        }\n\n        if (isToolCallEndEvent) {\n          const resolved = this.dispatchEvent({\n            type: EventType.TOOL_CALL_END,\n            toolCallId: currentStream?.toolCallId!,\n            rawEvent: event,\n          });\n          if (resolved) {\n            this.messagesInProcess[this.activeRun!.id] = null;\n          }\n          break;\n        }\n\n        if (isMessageEndEvent) {\n          const resolved = this.dispatchEvent({\n            type: EventType.TEXT_MESSAGE_END,\n            messageId: currentStream!.id,\n            rawEvent: event,\n          });\n          if (resolved) {\n            this.messagesInProcess[this.activeRun!.id] = null;\n          }\n          break;\n        }\n\n        if (isToolCallStartEvent && shouldEmitToolCalls) {\n          const resolved = this.dispatchEvent({\n            type: EventType.TOOL_CALL_START,\n            toolCallId: toolCallData.id,\n            toolCallName: toolCallData.name,\n            parentMessageId: event.data.chunk.id,\n            rawEvent: event,\n          });\n          if (resolved) {\n            this.setMessageInProgress(this.activeRun!.id, {\n              id: event.data.chunk.id,\n              toolCallId: toolCallData.id,\n              toolCallName: toolCallData.name,\n            });\n          }\n          break;\n        }\n\n        // Tool call args: emit ActionExecutionArgs\n        if (isToolCallArgsEvent && shouldEmitToolCalls) {\n          this.dispatchEvent({\n            type: EventType.TOOL_CALL_ARGS,\n            toolCallId: currentStream?.toolCallId!,\n            delta: toolCallData.args,\n            rawEvent: event,\n          });\n          break;\n        }\n\n        // Message content: emit TextMessageContent\n        if (isMessageContentEvent && shouldEmitMessages) {\n          // No existing message yet, also init the message\n          if (!currentStream) {\n            this.dispatchEvent({\n              type: EventType.TEXT_MESSAGE_START,\n              role: \"assistant\",\n              messageId: event.data.chunk.id,\n              rawEvent: event,\n            });\n            this.setMessageInProgress(this.activeRun!.id, {\n              id: event.data.chunk.id,\n              toolCallId: null,\n              toolCallName: null,\n            });\n            currentStream = this.getMessageInProgress(this.activeRun!.id);\n          }\n\n          this.dispatchEvent({\n            type: EventType.TEXT_MESSAGE_CONTENT,\n            messageId: currentStream!.id,\n            delta: messageContent!,\n            rawEvent: event,\n          });\n          break;\n        }\n\n        break;\n      case LangGraphEventTypes.OnChatModelEnd:\n        if (this.getMessageInProgress(this.activeRun!.id)?.toolCallId) {\n          const resolved = this.dispatchEvent({\n            type: EventType.TOOL_CALL_END,\n            toolCallId: this.getMessageInProgress(this.activeRun!.id)!.toolCallId!,\n            rawEvent: event,\n          });\n          if (resolved) {\n            this.messagesInProcess[this.activeRun!.id] = null;\n          }\n          break;\n        }\n        if (this.getMessageInProgress(this.activeRun!.id)?.id) {\n          const resolved = this.dispatchEvent({\n            type: EventType.TEXT_MESSAGE_END,\n            messageId: this.getMessageInProgress(this.activeRun!.id)!.id,\n            rawEvent: event,\n          });\n          if (resolved) {\n            this.messagesInProcess[this.activeRun!.id] = null;\n          }\n          break;\n        }\n        break;\n      case LangGraphEventTypes.OnCustomEvent:\n        if (event.name === CustomEventNames.ManuallyEmitMessage) {\n          this.dispatchEvent({\n            type: EventType.TEXT_MESSAGE_START,\n            role: \"assistant\",\n            messageId: event.data.message_id,\n            rawEvent: event,\n          });\n          this.dispatchEvent({\n            type: EventType.TEXT_MESSAGE_CONTENT,\n            messageId: event.data.message_id,\n            delta: event.data.message,\n            rawEvent: event,\n          });\n          this.dispatchEvent({\n            type: EventType.TEXT_MESSAGE_END,\n            messageId: event.data.message_id,\n            rawEvent: event,\n          });\n          break;\n        }\n\n        if (event.name === CustomEventNames.ManuallyEmitToolCall) {\n          this.dispatchEvent({\n            type: EventType.TOOL_CALL_START,\n            toolCallId: event.data.id,\n            toolCallName: event.data.name,\n            parentMessageId: event.data.id,\n            rawEvent: event,\n          });\n          this.dispatchEvent({\n            type: EventType.TOOL_CALL_ARGS,\n            toolCallId: event.data.id,\n            delta: event.data.args,\n            rawEvent: event,\n          });\n          this.dispatchEvent({\n            type: EventType.TOOL_CALL_END,\n            toolCallId: event.data.id,\n            rawEvent: event,\n          });\n          break;\n        }\n\n        if (event.name === CustomEventNames.ManuallyEmitState) {\n          this.activeRun!.manuallyEmittedState = event.data;\n          this.dispatchEvent({\n            type: EventType.STATE_SNAPSHOT,\n            snapshot: this.getStateSnapshot({\n              values: this.activeRun!.manuallyEmittedState!,\n            } as ThreadState<State>),\n            rawEvent: event,\n          });\n        }\n\n        this.dispatchEvent({\n          type: EventType.CUSTOM,\n          name: event.name,\n          value: event.data,\n          rawEvent: event,\n        });\n        break;\n      case LangGraphEventTypes.OnToolEnd:\n        const toolCallOutput = event.data?.output\n        if (!this.activeRun!.hasFunctionStreaming) {\n          this.dispatchEvent({\n            type: EventType.TOOL_CALL_START,\n            toolCallId: toolCallOutput.tool_call_id,\n            toolCallName: toolCallOutput.name,\n            parentMessageId: toolCallOutput.id,\n            rawEvent: event,\n          })\n          this.dispatchEvent({\n            type: EventType.TOOL_CALL_ARGS,\n            toolCallId: toolCallOutput.tool_call_id,\n            delta: JSON.stringify(event.data.input),\n            rawEvent: event,\n          });\n          this.dispatchEvent({\n            type: EventType.TOOL_CALL_END,\n            toolCallId: toolCallOutput.tool_call_id,\n            rawEvent: event,\n          });\n        }\n        this.dispatchEvent({\n          type: EventType.TOOL_CALL_RESULT,\n          toolCallId: toolCallOutput.tool_call_id,\n          content: toolCallOutput?.content,\n          messageId: randomUUID(),\n          role: \"tool\",\n        })\n        break;\n    }\n  }\n\n  // Request cancellation of the current run via LangGraph Platform SDK\n  public abortRun() {\n    this.cancelRequested = true;\n    const threadId = this.activeRun?.threadId;\n    const runId = this.activeRun?.id;\n    if (threadId && runId && !this.cancelSent) {\n      void this.client.runs\n        .cancel(threadId, runId)\n        .then(() => {\n          this.cancelSent = true;\n        })\n        .catch(() => {\n          // Ignore cancellation errors; streaming loop will also check cancelRequested\n        });\n    }\n    super.abortRun();\n  }\n\n  handleThinkingEvent(reasoningData: LangGraphReasoning) {\n    if (!reasoningData || !reasoningData.type || !reasoningData.text) {\n      return;\n    }\n\n    const thinkingStepIndex = reasoningData.index;\n\n    if (this.thinkingProcess?.index && this.thinkingProcess.index !== thinkingStepIndex) {\n      if (this.thinkingProcess.type) {\n        this.dispatchEvent({\n          type: EventType.THINKING_TEXT_MESSAGE_END,\n        });\n      }\n      this.dispatchEvent({\n        type: EventType.THINKING_END,\n      });\n      this.thinkingProcess = null;\n    }\n\n    if (!this.thinkingProcess) {\n      // No thinking step yet. Start a new one\n      this.dispatchEvent({\n        type: EventType.THINKING_START,\n      });\n      this.thinkingProcess = {\n        index: thinkingStepIndex,\n      };\n    }\n\n    if (this.thinkingProcess.type !== reasoningData.type) {\n      this.dispatchEvent({\n        type: EventType.THINKING_TEXT_MESSAGE_START,\n      });\n      this.thinkingProcess.type = reasoningData.type;\n    }\n\n    if (this.thinkingProcess.type) {\n      this.dispatchEvent({\n        type: EventType.THINKING_TEXT_MESSAGE_CONTENT,\n        delta: reasoningData.text,\n      });\n    }\n  }\n\n  getStateSnapshot(threadState: ThreadState<State>) {\n    let state = threadState.values;\n    const schemaKeys = this.activeRun!.schemaKeys!;\n    // Do not emit state keys that are not part of the output schema\n    if (schemaKeys?.output) {\n      state = filterObjectBySchemaKeys(state, [...this.constantSchemaKeys, ...schemaKeys.output]);\n    }\n    // return state\n    return state;\n  }\n\n  async getOrCreateThread(threadId: string, threadMetadata?: Record<string, any>): Promise<Thread> {\n    let thread: Thread;\n    try {\n      try {\n        thread = await this.getThread(threadId);\n      } catch (error) {\n        thread = await this.createThread({\n          threadId,\n          metadata: threadMetadata,\n        });\n      }\n    } catch (error: unknown) {\n      throw new Error(`Failed to create thread: ${(error as Error).message}`);\n    }\n\n    return thread;\n  }\n\n  async getThread(threadId: string) {\n    return this.client.threads.get(threadId);\n  }\n\n  async createThread(payload?: Parameters<typeof this.client.threads.create>[0]) {\n    return this.client.threads.create(payload);\n  }\n\n  async mergeConfigs({\n    configs,\n    assistant,\n    schemaKeys,\n  }: {\n    configs: Config[];\n    assistant: Assistant;\n    schemaKeys: SchemaKeys;\n  }) {\n    return configs.reduce((acc, cfg) => {\n      let filteredConfigurable = acc.configurable;\n\n      if (cfg.configurable) {\n        filteredConfigurable = schemaKeys?.config\n          ? filterObjectBySchemaKeys(cfg?.configurable, [\n              ...this.constantSchemaKeys,\n              ...(schemaKeys?.config ?? []),\n            ])\n          : cfg?.configurable;\n      }\n\n      const newConfig = {\n        ...acc,\n        ...cfg,\n        configurable: filteredConfigurable,\n      };\n\n      // LG does not return recursion limit if it's the default, therefore we check: if no recursion limit is currently set, and the user asked for 25, there is no change.\n      const isRecursionLimitSetToDefault =\n        acc.recursion_limit == null && cfg.recursion_limit === 25;\n      // Deep compare configs to avoid unnecessary update calls\n      const configsAreDifferent = JSON.stringify(newConfig) !== JSON.stringify(acc);\n\n      // Check if the only difference is the recursion_limit being set to default\n      const isOnlyRecursionLimitDifferent =\n        isRecursionLimitSetToDefault &&\n        JSON.stringify({ ...newConfig, recursion_limit: null }) ===\n          JSON.stringify({ ...acc, recursion_limit: null });\n\n      if (configsAreDifferent && !isOnlyRecursionLimitDifferent) {\n        return {\n          ...acc,\n          ...newConfig,\n        };\n      }\n\n      return acc;\n    }, assistant.config);\n  }\n\n  getMessageInProgress(runId: string) {\n    return this.messagesInProcess[runId];\n  }\n\n  setMessageInProgress(runId: string, data: MessageInProgress) {\n    this.messagesInProcess = {\n      ...this.messagesInProcess,\n      [runId]: {\n        ...(this.messagesInProcess[runId] as MessageInProgress),\n        ...data,\n      },\n    };\n  }\n\n  async getAssistant(): Promise<Assistant> {\n    try {\n      const assistants = await this.client.assistants.search();\n      const retrievedAssistant = assistants.find(\n        (searchResult) => searchResult.graph_id === this.graphId,\n      );\n      if (!retrievedAssistant) {\n        const notFoundMessage = `\n      No agent found with graph ID ${this.graphId} found..\\n\n\n      These are the available agents: [${assistants.map((a) => `${a.graph_id} (ID: ${a.assistant_id})`).join(\", \")}]\n      `\n        console.error(notFoundMessage);\n        throw new Error(notFoundMessage);\n      }\n\n      return retrievedAssistant;\n    } catch (error) {\n      const redefinedError = new Error(`Failed to retrieve assistant: ${(error as Error).message}`)\n      this.dispatchEvent({\n        type: EventType.RUN_ERROR,\n        message: redefinedError.message,\n      });\n      this.subscriber.error()\n      throw redefinedError;\n    }\n  }\n\n  async getSchemaKeys(): Promise<SchemaKeys> {\n    try {\n      const graphSchema = await this.client.assistants.getSchemas(this.assistant!.assistant_id);\n      let configSchema = null;\n      let contextSchema: string[] = []\n      if ('context_schema' in graphSchema && graphSchema.context_schema?.properties) {\n        contextSchema = Object.keys(graphSchema.context_schema.properties);\n      }\n      if (graphSchema.config_schema?.properties) {\n        configSchema = Object.keys(graphSchema.config_schema.properties);\n      }\n      if (!graphSchema.input_schema?.properties || !graphSchema.output_schema?.properties) {\n        return { config: [], input: null, output: null, context: contextSchema };\n      }\n      const inputSchema = Object.keys(graphSchema.input_schema.properties);\n      const outputSchema = Object.keys(graphSchema.output_schema.properties);\n\n      return {\n        input:\n          inputSchema && inputSchema.length ? [...inputSchema, ...this.constantSchemaKeys] : null,\n        output:\n          outputSchema && outputSchema.length\n            ? [...outputSchema, ...this.constantSchemaKeys]\n            : null,\n        context: contextSchema,\n        config: configSchema,\n      };\n    } catch (e) {\n      return { config: [], input: this.constantSchemaKeys, output: this.constantSchemaKeys, context: [] };\n    }\n  }\n\n  langGraphDefaultMergeState(state: State, messages: LangGraphMessage[], input: RunAgentExtendedInput): State<StateEnrichment> {\n    if (messages.length > 0 && \"role\" in messages[0] && messages[0].role === \"system\") {\n      // remove system message\n      messages = messages.slice(1);\n    }\n\n    // merge with existing messages\n    const existingMessages: LangGraphPlatformMessage[] = state.messages || [];\n    const existingMessageIds = new Set(existingMessages.map((message) => message.id));\n\n    const newMessages = messages.filter((message) => !existingMessageIds.has(message.id));\n\n    const langGraphTools: LangGraphToolWithName[] = [...(state.tools ?? []), ...(input.tools ?? [])].reduce((acc, tool) => {\n      let mappedTool = tool;\n      if (!tool.type) {\n        mappedTool = {\n            type: \"function\",\n            name: tool.name,\n            function: {\n                name: tool.name,\n                description: tool.description,\n                parameters: tool.parameters,\n            },\n        }\n      }\n\n      // Verify no duplicated\n      if (acc.find((t: LangGraphToolWithName) => (t.name === mappedTool.name) || t.function.name === mappedTool.function.name)) return acc;\n\n      return [...acc, mappedTool];\n    }, []);\n\n    return {\n      ...state,\n      messages: newMessages,\n      tools: langGraphTools,\n      'ag-ui': {\n        tools: langGraphTools,\n        context: input.context,\n      }\n    };\n  }\n\n  handleNodeChange(nodeName: string | undefined) {\n    if (nodeName === \"__end__\") {\n      nodeName = undefined;\n    }\n    if (nodeName !== this.activeRun?.nodeName) {\n      // End current step\n      if (this.activeRun?.nodeName) {\n        this.endStep();\n      }\n      // If we actually got a node name, start a new step\n      if (nodeName) {\n        this.startStep(nodeName);\n      }\n    }\n    this.activeRun!.nodeName = nodeName;\n  }\n\n  startStep(nodeName: string) {\n    this.dispatchEvent({\n      type: EventType.STEP_STARTED,\n      stepName: nodeName,\n    });\n  }\n\n  endStep() {\n    this.dispatchEvent({\n      type: EventType.STEP_FINISHED,\n      stepName: this.activeRun!.nodeName!,\n    });\n  }\n\n  async getCheckpointByMessage(\n    messageId: string,\n    threadId: string,\n    checkpoint?: null | {\n      checkpoint_id?: null | string;\n      checkpoint_ns: string;\n    },\n  ): Promise<ThreadState> {\n    const options = checkpoint?.checkpoint_id\n      ? {\n          checkpoint: { checkpoint_id: checkpoint.checkpoint_id },\n        }\n      : undefined;\n    const history = await this.client.threads.getHistory(threadId, options);\n    const reversed = [...history].reverse(); // oldest  newest\n\n    let targetState = reversed.find((state) =>\n      (state.values as State).messages?.some((m: LangGraphPlatformMessage) => m.id === messageId),\n    );\n\n    if (!targetState) throw new Error(\"Message not found\");\n\n    const targetStateMessages = (targetState.values as State).messages ?? [];\n    const messageIndex = targetStateMessages.findIndex(\n      (m: LangGraphPlatformMessage) => m.id === messageId,\n    );\n    const messagesAfter = targetStateMessages.slice(messageIndex + 1);\n    if (messagesAfter.length) {\n      return this.getCheckpointByMessage(messageId, threadId, targetState.parent_checkpoint);\n    }\n\n    const targetStateIndex = reversed.indexOf(targetState);\n\n    const { messages, ...targetStateValuesWithoutMessages } = targetState.values as State;\n    const selectedCheckpoint = reversed[targetStateIndex - 1] ?? { ...targetState, values: {} };\n    return {\n      ...selectedCheckpoint,\n      values: { ...selectedCheckpoint.values, ...targetStateValuesWithoutMessages },\n    };\n  }\n}\n\nexport * from \"./types\";\n","import { AssistantGraph, Message as LangGraphMessage, } from \"@langchain/langgraph-sdk\";\nimport { MessageType } from \"@langchain/core/messages\";\nimport { RunAgentInput } from \"@ag-ui/core\";\n\nexport enum LangGraphEventTypes {\n  OnChainStart = \"on_chain_start\",\n  OnChainStream = \"on_chain_stream\",\n  OnChainEnd = \"on_chain_end\",\n  OnChatModelStart = \"on_chat_model_start\",\n  OnChatModelStream = \"on_chat_model_stream\",\n  OnChatModelEnd = \"on_chat_model_end\",\n  OnToolStart = \"on_tool_start\",\n  OnToolEnd = \"on_tool_end\",\n  OnCustomEvent = \"on_custom_event\",\n  OnInterrupt = \"on_interrupt\",\n}\n\nexport type LangGraphToolWithName = {\n  type: \"function\";\n  name?: string;\n  function: {\n    name: string;\n    description: string;\n    parameters: any;\n  },\n}\n\nexport type State<TDefinedState = Record<string, any>> = {\n  [k in keyof TDefinedState]: TDefinedState[k] | null;\n} & Record<string, any>;\nexport interface StateEnrichment {\n  messages: LangGraphMessage[];\n  tools: LangGraphToolWithName[];\n  'ag-ui': {\n    tools: LangGraphToolWithName[];\n    context: RunAgentInput['context']\n  }\n}\n\nexport type SchemaKeys = {\n  input: string[] | null;\n  output: string[] | null;\n  context: string[] | null;\n  config: string[] | null;\n} | null;\n\nexport type MessageInProgress = {\n  id: string;\n  toolCallId?: string | null;\n  toolCallName?: string | null;\n};\n\nexport type ThinkingInProgress = {\n  index: number;\n  type?: LangGraphReasoning['type'];\n}\n\nexport interface RunMetadata {\n  id: string;\n  schemaKeys?: SchemaKeys;\n  nodeName?: string;\n  prevNodeName?: string | null;\n  exitingNode?: boolean;\n  manuallyEmittedState?: State | null;\n  threadId?: string;\n  graphInfo?: AssistantGraph\n  hasFunctionStreaming?: boolean;\n  // True once the platform-assigned run id is known (set from stream metadata)\n  serverRunIdKnown?: boolean;\n}\n\nexport type MessagesInProgressRecord = Record<string, MessageInProgress | null>;\n\n// The following types are our own definition to the messages accepted by LangGraph Platform, enhanced with some of our extra data.\nexport interface ToolCall {\n  id: string;\n  name: string;\n  args: Record<string, unknown>;\n}\n\ntype BaseLangGraphPlatformMessage = Omit<\n  LangGraphMessage,\n  | \"isResultMessage\"\n  | \"isTextMessage\"\n  | \"isImageMessage\"\n  | \"isActionExecutionMessage\"\n  | \"isAgentStateMessage\"\n  | \"type\"\n  | \"createdAt\"\n> & {\n  content: string;\n  role: string;\n  additional_kwargs?: Record<string, unknown>;\n  type: MessageType;\n};\n\ninterface LangGraphPlatformResultMessage extends BaseLangGraphPlatformMessage {\n  tool_call_id: string;\n  name: string;\n}\n\ninterface LangGraphPlatformActionExecutionMessage extends BaseLangGraphPlatformMessage {\n  tool_calls: ToolCall[];\n}\n\nexport type LangGraphPlatformMessage =\n  | LangGraphPlatformActionExecutionMessage\n  | LangGraphPlatformResultMessage\n  | BaseLangGraphPlatformMessage;\n\nexport enum CustomEventNames {\n  ManuallyEmitMessage = \"manually_emit_message\",\n  ManuallyEmitToolCall = \"manually_emit_tool_call\",\n  ManuallyEmitState = \"manually_emit_state\",\n  Exit = \"exit\",\n}\n\nexport interface PredictStateTool {\n  tool: string;\n  state_key: string;\n  tool_argument: string;\n}\n\nexport interface LangGraphReasoning {\n  type: 'text';\n  text: string;\n  index: number\n}\n","import { Message as LangGraphMessage } from \"@langchain/langgraph-sdk\";\nimport { State, SchemaKeys, LangGraphReasoning } from \"./types\";\nimport { Message, ToolCall, TextInputContent, BinaryInputContent, InputContent , UserMessage} from \"@ag-ui/client\";\n\nexport const DEFAULT_SCHEMA_KEYS = [\"messages\", \"tools\"];\n\nexport function filterObjectBySchemaKeys(obj: Record<string, any>, schemaKeys: string[]) {\n  return Object.fromEntries(Object.entries(obj).filter(([key]) => schemaKeys.includes(key)));\n}\n\nexport function getStreamPayloadInput({\n  mode,\n  state,\n  schemaKeys,\n}: {\n  mode: \"start\" | \"continue\";\n  state: State;\n  schemaKeys: SchemaKeys;\n}) {\n  let input = mode === \"start\" ? state : null;\n  // Do not input keys that are not part of the input schema\n  if (input && schemaKeys?.input) {\n    input = filterObjectBySchemaKeys(input, [...DEFAULT_SCHEMA_KEYS, ...schemaKeys.input]);\n  }\n\n  return input;\n}\n\n/**\n * Convert LangChain's multimodal content to AG-UI format\n */\nfunction convertLangchainMultimodalToAgui(\n  content: Array<{ type: string; text?: string; image_url?: any }>\n): InputContent[] {\n  const aguiContent: InputContent[] = [];\n\n  for (const item of content) {\n    if (item.type === \"text\" && item.text) {\n      aguiContent.push({\n        type: \"text\",\n        text: item.text,\n      });\n    } else if (item.type === \"image_url\") {\n      const imageUrl = typeof item.image_url === \"string\"\n        ? item.image_url\n        : item.image_url?.url;\n\n      if (!imageUrl) continue;\n\n      // Parse data URLs to extract base64 data\n      if (imageUrl.startsWith(\"data:\")) {\n        // Format: data:mime_type;base64,data\n        const [header, data] = imageUrl.split(\",\", 2);\n        const mimeType = header.includes(\":\")\n          ? header.split(\":\")[1].split(\";\")[0]\n          : \"image/png\";\n\n        aguiContent.push({\n          type: \"binary\",\n          mimeType,\n          data: data || \"\",\n        });\n      } else {\n        // Regular URL or ID\n        aguiContent.push({\n          type: \"binary\",\n          mimeType: \"image/png\", // Default MIME type\n          url: imageUrl,\n        });\n      }\n    }\n  }\n\n  return aguiContent;\n}\n\n/**\n * Convert AG-UI multimodal content to LangChain's format\n */\nfunction convertAguiMultimodalToLangchain(\n  content: InputContent[]\n): Array<{ type: string; text?: string; image_url?: { url: string } }> {\n  const langchainContent: Array<{ type: string; text?: string; image_url?: { url: string } }> = [];\n\n  for (const item of content) {\n    if (item.type === \"text\") {\n      langchainContent.push({\n        type: \"text\",\n        text: item.text,\n      });\n    } else if (item.type === \"binary\") {\n      // LangChain uses image_url format (OpenAI-style)\n      let url: string;\n\n      // Prioritize url, then data, then id\n      if (item.url) {\n        url = item.url;\n      } else if (item.data) {\n        // Construct data URL from base64 data\n        url = `data:${item.mimeType};base64,${item.data}`;\n      } else if (item.id) {\n        // Use id as a reference\n        url = item.id;\n      } else {\n        continue; // Skip if no source is provided\n      }\n\n      langchainContent.push({\n        type: \"image_url\",\n        image_url: { url },\n      });\n    }\n  }\n\n  return langchainContent;\n}\n\nexport function langchainMessagesToAgui(messages: LangGraphMessage[]): Message[] {\n  return messages.map((message) => {\n    switch (message.type) {\n      case \"human\":\n        // Handle multimodal content\n        let userContent: string | InputContent[];\n        if (Array.isArray(message.content)) {\n          userContent = convertLangchainMultimodalToAgui(message.content as any);\n        } else {\n          userContent = stringifyIfNeeded(resolveMessageContent(message.content));\n        }\n\n        return {\n          id: message.id!,\n          role: \"user\",\n          content: userContent,\n        };\n      case \"ai\":\n        const aiContent = resolveMessageContent(message.content)\n        return {\n          id: message.id!,\n          role: \"assistant\",\n          content: aiContent ? stringifyIfNeeded(aiContent) : '',\n          toolCalls: message.tool_calls?.map((tc) => ({\n            id: tc.id!,\n            type: \"function\",\n            function: {\n              name: tc.name,\n              arguments: JSON.stringify(tc.args),\n            },\n          })),\n        };\n      case \"system\":\n        return {\n          id: message.id!,\n          role: \"system\",\n          content: stringifyIfNeeded(resolveMessageContent(message.content)),\n        };\n      case \"tool\":\n        return {\n          id: message.id!,\n          role: \"tool\",\n          content: stringifyIfNeeded(resolveMessageContent(message.content)),\n          toolCallId: message.tool_call_id,\n        };\n      default:\n        throw new Error(\"message type returned from LangGraph is not supported.\");\n    }\n  });\n}\n\nexport function aguiMessagesToLangChain(messages: Message[]): LangGraphMessage[] {\n  return messages.map((message, index) => {\n    switch (message.role) {\n      case \"user\":\n        // Handle multimodal content\n        let content: UserMessage['content'];\n        if (typeof message.content === \"string\") {\n          content = message.content;\n        } else if (Array.isArray(message.content)) {\n          content = convertAguiMultimodalToLangchain(message.content) as any;\n        } else {\n          content = String(message.content);\n        }\n\n        return {\n          id: message.id,\n          role: message.role,\n          content,\n          type: \"human\",\n        } as LangGraphMessage;\n      case \"assistant\":\n        return {\n          id: message.id,\n          type: \"ai\",\n          role: message.role,\n          content: message.content ?? \"\",\n          tool_calls: (message.toolCalls ?? []).map((tc: ToolCall) => ({\n            id: tc.id,\n            name: tc.function.name,\n            args: JSON.parse(tc.function.arguments),\n            type: \"tool_call\",\n          })),\n        };\n      case \"system\":\n        return {\n          id: message.id,\n          role: message.role,\n          content: message.content,\n          type: \"system\",\n        };\n      case \"tool\":\n        return {\n          content: message.content,\n          role: message.role,\n          type: message.role,\n          tool_call_id: message.toolCallId,\n          id: message.id,\n        };\n      default:\n        console.error(`Message role ${message.role} is not implemented`);\n        throw new Error(\"message role is not supported.\");\n    }\n  });\n}\n\nfunction stringifyIfNeeded(item: any) {\n  if (typeof item === \"string\") return item;\n  return JSON.stringify(item);\n}\n\n/**\n * Flatten multimodal content into plain text.\n * Used for backwards compatibility or when multimodal is not supported.\n */\nfunction flattenUserContent(content: Message[\"content\"]): string {\n  if (typeof content === \"string\") {\n    return content;\n  }\n\n  if (!Array.isArray(content)) {\n    return \"\";\n  }\n\n  const parts: string[] = [];\n\n  for (const item of content) {\n    if (item.type === \"text\" && \"text\" in item) {\n      if (item.text) {\n        parts.push(item.text);\n      }\n    } else if (item.type === \"binary\" && \"mimeType\" in item) {\n      // Add descriptive placeholder for binary content\n      const binaryItem = item as BinaryInputContent;\n      if (binaryItem.filename) {\n        parts.push(`[Binary content: ${binaryItem.filename}]`);\n      } else if (binaryItem.url) {\n        parts.push(`[Binary content: ${binaryItem.url}]`);\n      } else {\n        parts.push(`[Binary content: ${binaryItem.mimeType}]`);\n      }\n    }\n  }\n\n  return parts.join(\"\\n\");\n}\n\nexport function resolveReasoningContent(eventData: any): LangGraphReasoning | null {\n  const content = eventData.chunk?.content\n\n  // Anthropic reasoning response\n  if (content && Array.isArray(content) && content.length && content[0]) {\n    if (!content[0].thinking) return null\n    return {\n      text: content[0].thinking,\n      type: 'text',\n      index: content[0].index,\n    }\n  }\n\n  /// OpenAI reasoning response\n  if (eventData.chunk.additional_kwargs?.reasoning?.summary?.[0]) {\n    const data = eventData.chunk.additional_kwargs?.reasoning.summary[0]\n    if (!data || !data.text) return null\n    return {\n      type: 'text',\n      text: data.text,\n      index: data.index,\n    }\n  }\n\n  return null\n}\n\nexport function resolveMessageContent(content?: LangGraphMessage['content']): string | null {\n  if (!content) return null;\n\n  if (typeof content === 'string') {\n    return content;\n  }\n\n  if (Array.isArray(content) && content.length) {\n    const contentText = content.find(c => c.type === 'text')?.text\n    return contentText ?? null;\n  }\n\n  return null\n}\n"],"names":["HttpAgent","Observable","LangGraphClient","randomUUID","LangGraphEventTypes","CustomEventNames","AbstractAgent","EventType","DEFAULT_SCHEMA_KEYS","filterObjectBySchemaKeys","obj","schemaKeys","key","getStreamPayloadInput","mode","state","input","convertLangchainMultimodalToAgui","content","_a","aguiContent","item","imageUrl","header","data","mimeType","convertAguiMultimodalToLangchain","langchainContent","url","langchainMessagesToAgui","messages","message","userContent","stringifyIfNeeded","resolveMessageContent","aiContent","tc","aguiMessagesToLangChain","index","_b","resolveReasoningContent","eventData","_a","_b","_c","_d","_e","content","data","resolveMessageContent","contentText","c","LangGraphAgent","_LangGraphAgent","AbstractAgent","config","_a","_b","DEFAULT_SCHEMA_KEYS","LangGraphClient","__spreadValues","event","input","Observable","subscriber","_c","threadId","randomUUID","streamMode","preparedStream","__spreadProps","messageCheckpoint","timeTravelCheckpoint","fork","payload","_d","_e","_f","_g","_h","_i","_j","inputThreadId","inputState","messages","tools","context","forwardedProps","nodeNameInput","thread","agentState","agentStateMessages","inputMessagesToLangchain","aguiMessagesToLangChain","stateValuesDiff","threadState","stateValues","m","lastUserMessage","i","mode","nodeBefore","e","payloadInput","getStreamPayloadInput","payloadConfig","configsToMerge","interrupts","EventType","interrupt","stream","streamModes","_k","_l","_m","_n","shouldExit","streamResponse","state","latestStateValues","updatedState","iter","__forAwait","more","temp","error","streamResponseChunk","_","subgraphsStreamEnabled","isSubgraphStream","chunk","chunkData","metadata","currentNodeName","eventType","node","tasks","isEndNode","writes","newNodeName","langchainMessagesToAgui","shouldEmitMessages","shouldEmitToolCalls","currentStream","hasCurrentStream","toolCallData","toolCallUsedToPredictState","predictStateTool","isToolCallStartEvent","isToolCallArgsEvent","isToolCallEndEvent","reasoningData","resolveReasoningContent","messageContent","resolveMessageContent","isMessageContentEvent","isMessageEndEvent","toolCallOutput","runId","thinkingStepIndex","schemaKeys","filterObjectBySchemaKeys","threadMetadata","configs","assistant","acc","cfg","filteredConfigurable","newConfig","isRecursionLimitSetToDefault","configsAreDifferent","isOnlyRecursionLimitDifferent","data","assistants","retrievedAssistant","searchResult","notFoundMessage","redefinedError","graphSchema","configSchema","contextSchema","inputSchema","outputSchema","existingMessages","existingMessageIds","message","newMessages","langGraphTools","tool","mappedTool","t","nodeName","messageId","checkpoint","options","reversed","targetState","targetStateMessages","messageIndex","targetStateIndex","targetStateValuesWithoutMessages","__objRest","selectedCheckpoint","LangGraphHttpAgent","HttpAgent"],"mappings":"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"}}]
}