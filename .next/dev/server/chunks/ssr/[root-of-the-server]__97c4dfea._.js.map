{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB"}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n        \"icon-sm\": \"size-8\",\n        \"icon-lg\": \"size-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 123, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 225, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/src/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction ScrollArea({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.Root>) {\n  return (\n    <ScrollAreaPrimitive.Root\n      data-slot=\"scroll-area\"\n      className={cn(\"relative\", className)}\n      {...props}\n    >\n      <ScrollAreaPrimitive.Viewport\n        data-slot=\"scroll-area-viewport\"\n        className=\"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1\"\n      >\n        {children}\n      </ScrollAreaPrimitive.Viewport>\n      <ScrollBar />\n      <ScrollAreaPrimitive.Corner />\n    </ScrollAreaPrimitive.Root>\n  )\n}\n\nfunction ScrollBar({\n  className,\n  orientation = \"vertical\",\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>) {\n  return (\n    <ScrollAreaPrimitive.ScrollAreaScrollbar\n      data-slot=\"scroll-area-scrollbar\"\n      orientation={orientation}\n      className={cn(\n        \"flex touch-none p-px transition-colors select-none\",\n        orientation === \"vertical\" &&\n          \"h-full w-2.5 border-l border-l-transparent\",\n        orientation === \"horizontal\" &&\n          \"h-2.5 flex-col border-t border-t-transparent\",\n        className\n      )}\n      {...props}\n    >\n      <ScrollAreaPrimitive.ScrollAreaThumb\n        data-slot=\"scroll-area-thumb\"\n        className=\"bg-border relative flex-1 rounded-full\"\n      />\n    </ScrollAreaPrimitive.ScrollAreaScrollbar>\n  )\n}\n\nexport { ScrollArea, ScrollBar }\n"],"names":[],"mappings":";;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OACmD;IACtD,qBACE,8OAAC,kLAAwB;QACvB,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,YAAY;QACzB,GAAG,KAAK;;0BAET,8OAAC,sLAA4B;gBAC3B,aAAU;gBACV,WAAU;0BAET;;;;;;0BAEH,8OAAC;;;;;0BACD,8OAAC,oLAA0B;;;;;;;;;;;AAGjC;AAEA,SAAS,UAAU,EACjB,SAAS,EACT,cAAc,UAAU,EACxB,GAAG,OACkE;IACrE,qBACE,8OAAC,iMAAuC;QACtC,aAAU;QACV,aAAa;QACb,WAAW,IAAA,yHAAE,EACX,sDACA,gBAAgB,cACd,8CACF,gBAAgB,gBACd,gDACF;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,6LAAmC;YAClC,aAAU;YACV,WAAU;;;;;;;;;;;AAIlB"}},
    {"offset": {"line": 295, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/src/components/ui/separator.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Separator({\n  className,\n  orientation = \"horizontal\",\n  decorative = true,\n  ...props\n}: React.ComponentProps<typeof SeparatorPrimitive.Root>) {\n  return (\n    <SeparatorPrimitive.Root\n      data-slot=\"separator\"\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Separator }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,UAAU,EACjB,SAAS,EACT,cAAc,YAAY,EAC1B,aAAa,IAAI,EACjB,GAAG,OACkD;IACrD,qBACE,8OAAC,6KAAuB;QACtB,aAAU;QACV,YAAY;QACZ,aAAa;QACb,WAAW,IAAA,yHAAE,EACX,kKACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 324, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/src/components/ui/tooltip.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction TooltipProvider({\n  delayDuration = 0,\n  ...props\n}: React.ComponentProps<typeof TooltipPrimitive.Provider>) {\n  return (\n    <TooltipPrimitive.Provider\n      data-slot=\"tooltip-provider\"\n      delayDuration={delayDuration}\n      {...props}\n    />\n  )\n}\n\nfunction Tooltip({\n  ...props\n}: React.ComponentProps<typeof TooltipPrimitive.Root>) {\n  return (\n    <TooltipProvider>\n      <TooltipPrimitive.Root data-slot=\"tooltip\" {...props} />\n    </TooltipProvider>\n  )\n}\n\nfunction TooltipTrigger({\n  ...props\n}: React.ComponentProps<typeof TooltipPrimitive.Trigger>) {\n  return <TooltipPrimitive.Trigger data-slot=\"tooltip-trigger\" {...props} />\n}\n\nfunction TooltipContent({\n  className,\n  sideOffset = 0,\n  children,\n  ...props\n}: React.ComponentProps<typeof TooltipPrimitive.Content>) {\n  return (\n    <TooltipPrimitive.Portal>\n      <TooltipPrimitive.Content\n        data-slot=\"tooltip-content\"\n        sideOffset={sideOffset}\n        className={cn(\n          \"bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n        <TooltipPrimitive.Arrow className=\"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]\" />\n      </TooltipPrimitive.Content>\n    </TooltipPrimitive.Portal>\n  )\n}\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,gBAAgB,EACvB,gBAAgB,CAAC,EACjB,GAAG,OACoD;IACvD,qBACE,8OAAC,+KAAyB;QACxB,aAAU;QACV,eAAe;QACd,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,QAAQ,EACf,GAAG,OACgD;IACnD,qBACE,8OAAC;kBACC,cAAA,8OAAC,2KAAqB;YAAC,aAAU;YAAW,GAAG,KAAK;;;;;;;;;;;AAG1D;AAEA,SAAS,eAAe,EACtB,GAAG,OACmD;IACtD,qBAAO,8OAAC,8KAAwB;QAAC,aAAU;QAAmB,GAAG,KAAK;;;;;;AACxE;AAEA,SAAS,eAAe,EACtB,SAAS,EACT,aAAa,CAAC,EACd,QAAQ,EACR,GAAG,OACmD;IACtD,qBACE,8OAAC,6KAAuB;kBACtB,cAAA,8OAAC,8KAAwB;YACvB,aAAU;YACV,YAAY;YACZ,WAAW,IAAA,yHAAE,EACX,qaACA;YAED,GAAG,KAAK;;gBAER;8BACD,8OAAC,4KAAsB;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI1C"}},
    {"offset": {"line": 411, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\n        destructive:\n          \"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"span\"> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"span\"\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB,oZACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD;IAC1D,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 457, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/src/components/chat/citation.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { FileText } from \"lucide-react\";\n\nexport interface CitationData {\n  docName: string;\n  pageNumber: number;\n  imageUrl?: string;\n  snippet: string;\n}\n\ninterface CitationProps {\n  citation: CitationData;\n  index: number;\n  onClick?: (citation: CitationData) => void;\n}\n\nexport function Citation({ citation, index, onClick }: CitationProps) {\n  return (\n    <TooltipProvider>\n      <Tooltip>\n        <TooltipTrigger asChild>\n          <Badge\n            variant=\"secondary\"\n            className=\"cursor-pointer hover:bg-blue-100 transition-colors inline-flex items-center gap-1 mx-0.5\"\n            onClick={() => onClick?.(citation)}\n          >\n            <FileText className=\"w-3 h-3\" />\n            <span className=\"text-xs\">\n              [{index + 1}] {citation.docName}, p.{citation.pageNumber}\n            </span>\n          </Badge>\n        </TooltipTrigger>\n        <TooltipContent className=\"max-w-sm\">\n          <p className=\"text-sm font-medium mb-1\">\n            {citation.docName} - Page {citation.pageNumber}\n          </p>\n          <p className=\"text-xs text-muted-foreground\">{citation.snippet}</p>\n        </TooltipContent>\n      </Tooltip>\n    </TooltipProvider>\n  );\n}\n\ninterface CitationListProps {\n  citations: CitationData[];\n  onCitationClick?: (citation: CitationData) => void;\n}\n\nexport function CitationList({ citations, onCitationClick }: CitationListProps) {\n  if (citations.length === 0) return null;\n\n  return (\n    <div className=\"flex flex-wrap gap-1 mt-2 pt-2 border-t border-gray-200\">\n      <span className=\"text-xs text-muted-foreground mr-1\">Sources:</span>\n      {citations.map((citation, index) => (\n        <Citation\n          key={`${citation.docName}-${citation.pageNumber}-${index}`}\n          citation={citation}\n          index={index}\n          onClick={onCitationClick}\n        />\n      ))}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;;AAGA;AAMA;AACA;AAVA;;;;;AAyBO,SAAS,SAAS,EAAE,QAAQ,EAAE,KAAK,EAAE,OAAO,EAAiB;IAClE,qBACE,8OAAC,sJAAe;kBACd,cAAA,8OAAC,8IAAO;;8BACN,8OAAC,qJAAc;oBAAC,OAAO;8BACrB,cAAA,8OAAC,0IAAK;wBACJ,SAAQ;wBACR,WAAU;wBACV,SAAS,IAAM,UAAU;;0CAEzB,8OAAC,0NAAQ;gCAAC,WAAU;;;;;;0CACpB,8OAAC;gCAAK,WAAU;;oCAAU;oCACtB,QAAQ;oCAAE;oCAAG,SAAS,OAAO;oCAAC;oCAAK,SAAS,UAAU;;;;;;;;;;;;;;;;;;8BAI9D,8OAAC,qJAAc;oBAAC,WAAU;;sCACxB,8OAAC;4BAAE,WAAU;;gCACV,SAAS,OAAO;gCAAC;gCAAS,SAAS,UAAU;;;;;;;sCAEhD,8OAAC;4BAAE,WAAU;sCAAiC,SAAS,OAAO;;;;;;;;;;;;;;;;;;;;;;;AAKxE;AAOO,SAAS,aAAa,EAAE,SAAS,EAAE,eAAe,EAAqB;IAC5E,IAAI,UAAU,MAAM,KAAK,GAAG,OAAO;IAEnC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAK,WAAU;0BAAqC;;;;;;YACpD,UAAU,GAAG,CAAC,CAAC,UAAU,sBACxB,8OAAC;oBAEC,UAAU;oBACV,OAAO;oBACP,SAAS;mBAHJ,GAAG,SAAS,OAAO,CAAC,CAAC,EAAE,SAAS,UAAU,CAAC,CAAC,EAAE,OAAO;;;;;;;;;;;AAQpE"}},
    {"offset": {"line": 590, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/src/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"skeleton\"\n      className={cn(\"bg-accent animate-pulse rounded-md\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n"],"names":[],"mappings":";;;;;AAAA;;;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAoC;IACpE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 614, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/src/components/ui/dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { XIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        \"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn(\"text-lg leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,8OAAC,0KAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;AAEA,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,8OAAC,6KAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;AAEA,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,8OAAC,4KAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8OAAC,2KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACkD;IACrD,qBACE,8OAAC,6KAAuB;QACtB,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,kBAAkB,IAAI,EACtB,GAAG,OAGJ;IACC,qBACE,8OAAC;QAAa,aAAU;;0BACtB,8OAAC;;;;;0BACD,8OAAC,6KAAuB;gBACtB,aAAU;gBACV,WAAW,IAAA,yHAAE,EACX,+WACA;gBAED,GAAG,KAAK;;oBAER;oBACA,iCACC,8OAAC,2KAAqB;wBACpB,aAAU;wBACV,WAAU;;0CAEV,8OAAC,yMAAK;;;;;0CACN,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,2KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,8OAAC,iLAA2B;QAC1B,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 796, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/src/components/chat/citation-panel.tsx"],"sourcesContent":["\"use client\";\n\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { X, FileText, ExternalLink, ZoomIn } from \"lucide-react\";\nimport { useState } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport type { CitationData } from \"./citation\";\n\ninterface CitationPanelProps {\n  citation: CitationData | null;\n  onClose: () => void;\n}\n\nexport function CitationPanel({ citation, onClose }: CitationPanelProps) {\n  const [imageLoading, setImageLoading] = useState(true);\n  const [imageError, setImageError] = useState(false);\n  const [isZoomed, setIsZoomed] = useState(false);\n\n  if (!citation) return null;\n\n  return (\n    <>\n      <Card className=\"h-full flex flex-col\">\n        <CardHeader className=\"flex flex-row items-center justify-between py-3 px-4 border-b\">\n          <div className=\"flex items-center gap-2\">\n            <FileText className=\"w-4 h-4 text-muted-foreground\" />\n            <CardTitle className=\"text-sm font-medium truncate\">\n              {citation.docName}\n            </CardTitle>\n          </div>\n          <Button variant=\"ghost\" size=\"sm\" onClick={onClose}>\n            <X className=\"w-4 h-4\" />\n          </Button>\n        </CardHeader>\n        <CardContent className=\"flex-1 p-0 overflow-hidden\">\n          <ScrollArea className=\"h-full\">\n            <div className=\"p-4 space-y-4\">\n              {/* Page info */}\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm text-muted-foreground\">\n                  Page {citation.pageNumber}\n                </span>\n                {citation.imageUrl && !imageError && (\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => setIsZoomed(true)}\n                    className=\"text-xs\"\n                  >\n                    <ZoomIn className=\"w-3 h-3 mr-1\" />\n                    Enlarge\n                  </Button>\n                )}\n              </div>\n\n              {/* Page image */}\n              {citation.imageUrl && (\n                <div className=\"relative rounded-lg border bg-gray-50 overflow-hidden\">\n                  {imageLoading && !imageError && (\n                    <Skeleton className=\"w-full h-48\" />\n                  )}\n                  {imageError ? (\n                    <div className=\"w-full h-32 flex items-center justify-center text-muted-foreground text-sm\">\n                      Page image unavailable\n                    </div>\n                  ) : (\n                    <img\n                      src={citation.imageUrl}\n                      alt={`Page ${citation.pageNumber} of ${citation.docName}`}\n                      className={`w-full object-contain cursor-pointer hover:opacity-90 transition-opacity ${\n                        imageLoading ? \"hidden\" : \"\"\n                      }`}\n                      onLoad={() => setImageLoading(false)}\n                      onError={() => {\n                        setImageLoading(false);\n                        setImageError(true);\n                      }}\n                      onClick={() => setIsZoomed(true)}\n                    />\n                  )}\n                </div>\n              )}\n\n              {/* Text snippet */}\n              <div>\n                <h4 className=\"text-xs font-medium text-muted-foreground mb-2\">\n                  Relevant Text\n                </h4>\n                <div className=\"text-sm bg-gray-50 p-3 rounded-md border\">\n                  {citation.snippet}\n                </div>\n              </div>\n            </div>\n          </ScrollArea>\n        </CardContent>\n      </Card>\n\n      {/* Zoom dialog */}\n      <Dialog open={isZoomed} onOpenChange={setIsZoomed}>\n        <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-auto\">\n          <DialogHeader>\n            <DialogTitle>\n              {citation.docName} - Page {citation.pageNumber}\n            </DialogTitle>\n          </DialogHeader>\n          {citation.imageUrl && (\n            <img\n              src={citation.imageUrl}\n              alt={`Page ${citation.pageNumber} of ${citation.docName}`}\n              className=\"w-full object-contain\"\n            />\n          )}\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AARA;;;;;;;;;AAqBO,SAAS,cAAc,EAAE,QAAQ,EAAE,OAAO,EAAsB;IACrE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IAEzC,IAAI,CAAC,UAAU,OAAO;IAEtB,qBACE;;0BACE,8OAAC,wIAAI;gBAAC,WAAU;;kCACd,8OAAC,8IAAU;wBAAC,WAAU;;0CACpB,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,0NAAQ;wCAAC,WAAU;;;;;;kDACpB,8OAAC,6IAAS;wCAAC,WAAU;kDAClB,SAAS,OAAO;;;;;;;;;;;;0CAGrB,8OAAC,4IAAM;gCAAC,SAAQ;gCAAQ,MAAK;gCAAK,SAAS;0CACzC,cAAA,8OAAC,iMAAC;oCAAC,WAAU;;;;;;;;;;;;;;;;;kCAGjB,8OAAC,+IAAW;wBAAC,WAAU;kCACrB,cAAA,8OAAC,wJAAU;4BAAC,WAAU;sCACpB,cAAA,8OAAC;gCAAI,WAAU;;kDAEb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAK,WAAU;;oDAAgC;oDACxC,SAAS,UAAU;;;;;;;4CAE1B,SAAS,QAAQ,IAAI,CAAC,4BACrB,8OAAC,4IAAM;gDACL,SAAQ;gDACR,MAAK;gDACL,SAAS,IAAM,YAAY;gDAC3B,WAAU;;kEAEV,8OAAC,oNAAM;wDAAC,WAAU;;;;;;oDAAiB;;;;;;;;;;;;;oCAOxC,SAAS,QAAQ,kBAChB,8OAAC;wCAAI,WAAU;;4CACZ,gBAAgB,CAAC,4BAChB,8OAAC,gJAAQ;gDAAC,WAAU;;;;;;4CAErB,2BACC,8OAAC;gDAAI,WAAU;0DAA6E;;;;;qEAI5F,8OAAC;gDACC,KAAK,SAAS,QAAQ;gDACtB,KAAK,CAAC,KAAK,EAAE,SAAS,UAAU,CAAC,IAAI,EAAE,SAAS,OAAO,EAAE;gDACzD,WAAW,CAAC,yEAAyE,EACnF,eAAe,WAAW,IAC1B;gDACF,QAAQ,IAAM,gBAAgB;gDAC9B,SAAS;oDACP,gBAAgB;oDAChB,cAAc;gDAChB;gDACA,SAAS,IAAM,YAAY;;;;;;;;;;;;kDAOnC,8OAAC;;0DACC,8OAAC;gDAAG,WAAU;0DAAiD;;;;;;0DAG/D,8OAAC;gDAAI,WAAU;0DACZ,SAAS,OAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAS7B,8OAAC,4IAAM;gBAAC,MAAM;gBAAU,cAAc;0BACpC,cAAA,8OAAC,mJAAa;oBAAC,WAAU;;sCACvB,8OAAC,kJAAY;sCACX,cAAA,8OAAC,iJAAW;;oCACT,SAAS,OAAO;oCAAC;oCAAS,SAAS,UAAU;;;;;;;;;;;;wBAGjD,SAAS,QAAQ,kBAChB,8OAAC;4BACC,KAAK,SAAS,QAAQ;4BACtB,KAAK,CAAC,KAAK,EAAE,SAAS,UAAU,CAAC,IAAI,EAAE,SAAS,OAAO,EAAE;4BACzD,WAAU;;;;;;;;;;;;;;;;;;;AAOxB"}},
    {"offset": {"line": 1059, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/src/components/chat/thinking-indicator.tsx"],"sourcesContent":["\"use client\";\n\nimport { Skeleton } from \"@/components/ui/skeleton\";\n\nexport function ThinkingIndicator() {\n  return (\n    <div className=\"flex items-center gap-2 p-4 bg-gray-50 rounded-lg animate-pulse\">\n      <div className=\"flex gap-1\">\n        <div\n          className=\"w-2 h-2 bg-blue-400 rounded-full animate-bounce\"\n          style={{ animationDelay: \"0ms\" }}\n        />\n        <div\n          className=\"w-2 h-2 bg-blue-400 rounded-full animate-bounce\"\n          style={{ animationDelay: \"150ms\" }}\n        />\n        <div\n          className=\"w-2 h-2 bg-blue-400 rounded-full animate-bounce\"\n          style={{ animationDelay: \"300ms\" }}\n        />\n      </div>\n      <span className=\"text-sm text-muted-foreground\">\n        Searching knowledge base...\n      </span>\n    </div>\n  );\n}\n\nexport function MessageSkeleton() {\n  return (\n    <div className=\"space-y-2 p-4\">\n      <Skeleton className=\"h-4 w-3/4\" />\n      <Skeleton className=\"h-4 w-1/2\" />\n      <Skeleton className=\"h-4 w-2/3\" />\n    </div>\n  );\n}\n\nexport function AnswerPaneSkeleton() {\n  return (\n    <div className=\"space-y-4 p-6\">\n      <Skeleton className=\"h-6 w-1/3\" />\n      <div className=\"space-y-2\">\n        <Skeleton className=\"h-4 w-full\" />\n        <Skeleton className=\"h-4 w-5/6\" />\n        <Skeleton className=\"h-4 w-4/5\" />\n      </div>\n      <div className=\"flex gap-2 mt-4\">\n        <Skeleton className=\"h-6 w-24\" />\n        <Skeleton className=\"h-6 w-20\" />\n        <Skeleton className=\"h-6 w-28\" />\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;AAEA;AAFA;;;AAIO,SAAS;IACd,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,WAAU;wBACV,OAAO;4BAAE,gBAAgB;wBAAM;;;;;;kCAEjC,8OAAC;wBACC,WAAU;wBACV,OAAO;4BAAE,gBAAgB;wBAAQ;;;;;;kCAEnC,8OAAC;wBACC,WAAU;wBACV,OAAO;4BAAE,gBAAgB;wBAAQ;;;;;;;;;;;;0BAGrC,8OAAC;gBAAK,WAAU;0BAAgC;;;;;;;;;;;;AAKtD;AAEO,SAAS;IACd,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,gJAAQ;gBAAC,WAAU;;;;;;0BACpB,8OAAC,gJAAQ;gBAAC,WAAU;;;;;;0BACpB,8OAAC,gJAAQ;gBAAC,WAAU;;;;;;;;;;;;AAG1B;AAEO,SAAS;IACd,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,gJAAQ;gBAAC,WAAU;;;;;;0BACpB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,gJAAQ;wBAAC,WAAU;;;;;;kCACpB,8OAAC,gJAAQ;wBAAC,WAAU;;;;;;kCACpB,8OAAC,gJAAQ;wBAAC,WAAU;;;;;;;;;;;;0BAEtB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,gJAAQ;wBAAC,WAAU;;;;;;kCACpB,8OAAC,gJAAQ;wBAAC,WAAU;;;;;;kCACpB,8OAAC,gJAAQ;wBAAC,WAAU;;;;;;;;;;;;;;;;;;AAI5B"}},
    {"offset": {"line": 1244, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/src/components/chat/answer-pane.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { MessageSquare, FileText } from \"lucide-react\";\nimport ReactMarkdown from \"react-markdown\";\nimport { CitationList, type CitationData } from \"./citation\";\nimport { CitationPanel } from \"./citation-panel\";\nimport { AnswerPaneSkeleton } from \"./thinking-indicator\";\n\ninterface AnswerPaneProps {\n  answer: string | null;\n  citations: CitationData[];\n  isLoading: boolean;\n}\n\nexport function AnswerPane({ answer, citations, isLoading }: AnswerPaneProps) {\n  const [selectedCitation, setSelectedCitation] = useState<CitationData | null>(\n    null\n  );\n\n  // Reset selected citation when answer changes\n  useEffect(() => {\n    setSelectedCitation(null);\n  }, [answer]);\n\n  return (\n    <div className=\"h-full flex\">\n      {/* Main answer area */}\n      <div\n        className={`flex-1 flex flex-col ${\n          selectedCitation ? \"w-2/3\" : \"w-full\"\n        } transition-all duration-300`}\n      >\n        <Card className=\"h-full flex flex-col border-0 rounded-none\">\n          <CardHeader className=\"border-b py-3 px-6\">\n            <div className=\"flex items-center gap-2\">\n              <MessageSquare className=\"w-5 h-5 text-blue-500\" />\n              <CardTitle className=\"text-lg\">Answer</CardTitle>\n            </div>\n          </CardHeader>\n          <CardContent className=\"flex-1 p-0 overflow-hidden\">\n            <ScrollArea className=\"h-full\">\n              <div className=\"p-6\">\n                {isLoading ? (\n                  <AnswerPaneSkeleton />\n                ) : answer ? (\n                  <div className=\"space-y-4\">\n                    {/* Rendered answer with markdown */}\n                    <div className=\"prose prose-sm max-w-none\">\n                      <ReactMarkdown\n                        components={{\n                          // Style code blocks\n                          code: ({ children, className }) => {\n                            const isInline = !className;\n                            return isInline ? (\n                              <code className=\"bg-gray-100 px-1 py-0.5 rounded text-sm\">\n                                {children}\n                              </code>\n                            ) : (\n                              <code className={className}>{children}</code>\n                            );\n                          },\n                          // Style links\n                          a: ({ children, href }) => (\n                            <a\n                              href={href}\n                              className=\"text-blue-600 hover:underline\"\n                              target=\"_blank\"\n                              rel=\"noopener noreferrer\"\n                            >\n                              {children}\n                            </a>\n                          ),\n                        }}\n                      >\n                        {answer}\n                      </ReactMarkdown>\n                    </div>\n\n                    {/* Citations section */}\n                    {citations.length > 0 && (\n                      <>\n                        <Separator />\n                        <CitationList\n                          citations={citations}\n                          onCitationClick={setSelectedCitation}\n                        />\n                      </>\n                    )}\n                  </div>\n                ) : (\n                  <div className=\"flex flex-col items-center justify-center h-64 text-center text-muted-foreground\">\n                    <FileText className=\"w-12 h-12 mb-4 opacity-50\" />\n                    <p className=\"text-lg font-medium\">\n                      Ask a question to get started\n                    </p>\n                    <p className=\"text-sm mt-2\">\n                      Your answer will appear here with citations from the\n                      knowledge base\n                    </p>\n                  </div>\n                )}\n              </div>\n            </ScrollArea>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Citation preview panel */}\n      {selectedCitation && (\n        <div className=\"w-1/3 border-l\">\n          <CitationPanel\n            citation={selectedCitation}\n            onClose={() => setSelectedCitation(null)}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAVA;;;;;;;;;;;AAkBO,SAAS,WAAW,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAmB;IAC1E,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EACtD;IAGF,8CAA8C;IAC9C,IAAA,kNAAS,EAAC;QACR,oBAAoB;IACtB,GAAG;QAAC;KAAO;IAEX,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBACC,WAAW,CAAC,qBAAqB,EAC/B,mBAAmB,UAAU,SAC9B,4BAA4B,CAAC;0BAE9B,cAAA,8OAAC,wIAAI;oBAAC,WAAU;;sCACd,8OAAC,8IAAU;4BAAC,WAAU;sCACpB,cAAA,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,yOAAa;wCAAC,WAAU;;;;;;kDACzB,8OAAC,6IAAS;wCAAC,WAAU;kDAAU;;;;;;;;;;;;;;;;;sCAGnC,8OAAC,+IAAW;4BAAC,WAAU;sCACrB,cAAA,8OAAC,wJAAU;gCAAC,WAAU;0CACpB,cAAA,8OAAC;oCAAI,WAAU;8CACZ,0BACC,8OAAC,yKAAkB;;;;+CACjB,uBACF,8OAAC;wCAAI,WAAU;;0DAEb,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC,mMAAa;oDACZ,YAAY;wDACV,oBAAoB;wDACpB,MAAM,CAAC,EAAE,QAAQ,EAAE,SAAS,EAAE;4DAC5B,MAAM,WAAW,CAAC;4DAClB,OAAO,yBACL,8OAAC;gEAAK,WAAU;0EACb;;;;;uFAGH,8OAAC;gEAAK,WAAW;0EAAY;;;;;;wDAEjC;wDACA,cAAc;wDACd,GAAG,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,iBACpB,8OAAC;gEACC,MAAM;gEACN,WAAU;gEACV,QAAO;gEACP,KAAI;0EAEH;;;;;;oDAGP;8DAEC;;;;;;;;;;;4CAKJ,UAAU,MAAM,GAAG,mBAClB;;kEACE,8OAAC,kJAAS;;;;;kEACV,8OAAC,sJAAY;wDACX,WAAW;wDACX,iBAAiB;;;;;;;;;;;;;6DAMzB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,0NAAQ;gDAAC,WAAU;;;;;;0DACpB,8OAAC;gDAAE,WAAU;0DAAsB;;;;;;0DAGnC,8OAAC;gDAAE,WAAU;0DAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAazC,kCACC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,gKAAa;oBACZ,UAAU;oBACV,SAAS,IAAM,oBAAoB;;;;;;;;;;;;;;;;;AAM/C"}},
    {"offset": {"line": 1483, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/External/dev/Projects/Work%20Projects/RAG/new_rag/questions/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { CopilotSidebar } from \"@copilotkit/react-ui\";\nimport { useCopilotChatInternal } from \"@copilotkit/react-core\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { BookOpen, Settings } from \"lucide-react\";\nimport Link from \"next/link\";\nimport { AnswerPane } from \"@/components/chat/answer-pane\";\nimport type { CitationData } from \"@/components/chat/citation\";\n\nfunction normalizeContent(content: unknown): string {\n  if (typeof content === \"string\") return content;\n  if (Array.isArray(content)) {\n    return content\n      .map((item) => {\n        if (typeof item === \"string\") return item;\n        if (item && typeof item === \"object\" && \"text\" in item) {\n          return (item as { text?: string }).text || \"\";\n        }\n        return \"\";\n      })\n      .join(\" \");\n  }\n  if (content && typeof content === \"object\" && \"text\" in content) {\n    return (content as { text?: string }).text || \"\";\n  }\n  return \"\";\n}\n\nexport default function Home() {\n  const { messages, isLoading } = useCopilotChatInternal();\n  const [citations, setCitations] = useState<CitationData[]>([]);\n  const [isFetchingCitations, setIsFetchingCitations] = useState(false);\n  const lastAnsweredRef = useRef<string | null>(null);\n\n  const lastAssistant = useMemo(\n    () => [...messages].reverse().find((m) => m.role === \"assistant\"),\n    [messages]\n  );\n  const lastUser = useMemo(\n    () => [...messages].reverse().find((m) => m.role === \"user\"),\n    [messages]\n  );\n\n  const answer = lastAssistant ? normalizeContent(lastAssistant.content) : null;\n  const userQuery = lastUser ? normalizeContent(lastUser.content) : null;\n\n  // Fetch citations once a new assistant answer arrives\n  useEffect(() => {\n    if (!lastAssistant || !userQuery || isLoading) return;\n\n    const lastId = String((lastAssistant as { id?: string }).id || userQuery);\n    if (lastAnsweredRef.current === lastId) return;\n    lastAnsweredRef.current = lastId;\n\n    setIsFetchingCitations(true);\n    fetch(`/api/citations?q=${encodeURIComponent(userQuery)}`)\n      .then(async (res) => {\n        if (!res.ok) {\n          const data = await res.json().catch(() => ({}));\n          throw new Error(data.error || \"Failed to load citations\");\n        }\n        return res.json();\n      })\n      .then((data) => {\n        setCitations(data.citations || []);\n      })\n      .catch((error) => {\n        console.error(\"Citation fetch error:\", error);\n        setCitations([]);\n      })\n      .finally(() => setIsFetchingCitations(false));\n  }, [isLoading, lastAssistant, userQuery]);\n\n  return (\n    <main className=\"h-screen flex flex-col bg-background\">\n      {/* Header */}\n      <header className=\"border-b bg-white\">\n        <div className=\"flex items-center justify-between px-6 py-3\">\n          <div className=\"flex items-center gap-3\">\n            <BookOpen className=\"w-6 h-6 text-blue-600\" />\n            <h1 className=\"text-xl font-semibold\">Knowledge Assistant</h1>\n          </div>\n          <nav className=\"flex items-center gap-2\">\n            <Link href=\"/knowledge\">\n              <Button variant=\"outline\" size=\"sm\">\n                <Settings className=\"w-4 h-4 mr-2\" />\n                Knowledge Base\n              </Button>\n            </Link>\n          </nav>\n        </div>\n      </header>\n\n      {/* Main content area - two pane layout */}\n      <div className=\"flex-1 flex overflow-hidden\">\n        {/* Left pane - Answer + citations */}\n        <div className=\"flex-1 bg-white border-r overflow-hidden\">\n          <Card className=\"h-full rounded-none border-0\">\n            <CardHeader className=\"border-b\">\n              <CardTitle>Answer & Sources</CardTitle>\n            </CardHeader>\n            <AnswerPane\n              answer={answer}\n              citations={citations}\n              isLoading={isLoading || isFetchingCitations}\n            />\n          </Card>\n        </div>\n\n        {/* Right pane - Chat sidebar */}\n        <div className=\"w-[400px] border-l bg-gray-50\">\n          <CopilotSidebar\n            defaultOpen={true}\n            clickOutsideToClose={false}\n            className=\"h-full relative\"\n            labels={{\n              title: \"Ask a Question\",\n              initial:\n                \"Hi! I'm your knowledge assistant. Ask questions about the documents in your knowledge base, and I'll provide answers with citations.\",\n            }}\n          />\n        </div>\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}