module.exports=[230574,a=>{"use strict";var b=a.i(620998),c=a.i(9878),d=a.i(584540),e=a.i(408970),f=a.i(966619),g=a.i(695768),h=a.i(697328),i=class{constructor(a){this.instructions=a.instructions,this.actions=a.actions||[],this.includeCopilotReadable=!1!==a.includeCopilotReadable,this.includeCopilotActions=!1!==a.includeCopilotActions,this.forwardedParameters=a.forwardedParameters}run(a,i){return(0,d.__async)(this,null,function*(){var j,k,l,m,n;let o=this.includeCopilotActions?Object.assign({},a.actions):{};for(let a of this.actions)o[a.name]=a;let p="";i&&(p=("string"==typeof i?i:JSON.stringify(i))+"\n\n"),this.includeCopilotReadable&&(p+=a.getContextString([],c.defaultCopilotContextCategories));let q=[new f.TextMessage({content:(m=p,n=this.instructions,`
Please act as an efficient, competent, conscientious, and industrious professional assistant.

Help the user achieve their goals, and you do so in a way that is as efficient as possible, without unnecessary fluff, but also without sacrificing professionalism.
Always be polite and respectful, and prefer brevity over verbosity.

The user has provided you with the following context:
\`\`\`
${m}
\`\`\`

They have also provided you with functions you can call to initiate actions on their behalf.

Please assist them as best you can.

This is not a conversation, so please do not ask questions. Just call a function without saying anything else.

The user has given you the following task to complete:

\`\`\`
${n}
\`\`\`
`),role:f.Role.System})],r=new e.CopilotRuntimeClient({url:a.copilotApiConfig.chatApiEndpoint,publicApiKey:a.copilotApiConfig.publicApiKey,headers:a.copilotApiConfig.headers,credentials:a.copilotApiConfig.credentials}),s=yield r.generateCopilotResponse({data:{frontend:{actions:(0,b.processActionsForRuntimeRequest)(Object.values(o)),url:window.location.href},messages:(0,g.convertMessagesToGqlInput)((0,g.filterAgentStateMessages)(q)),metadata:{requestType:h.CopilotRequestType.Task},forwardedParameters:(0,d.__spreadValues)({toolChoice:"required"},null!=(j=this.forwardedParameters)?j:{})},properties:a.copilotApiConfig.properties}).toPromise(),t=a.getFunctionCallHandler(o);for(let a of(0,g.convertGqlOutputToMessages)((null==(l=null==(k=s.data)?void 0:k.generateCopilotResponse)?void 0:l.messages)||[]).filter(a=>a.isActionExecutionMessage()))yield t({messages:q,name:a.name,args:a.arguments})})}},j=a.i(133949),k=a.i(925978),l=a.i(136552),m=a.i(572131),n=a.i(18557);function o(a,b){var c;let{setLangGraphInterruptAction:e,removeLangGraphInterruptAction:f,langGraphInterruptAction:g,threadId:h}=(0,m.useContext)(l.CopilotContext),{runChatCompletion:i}=(0,j.useCopilotChat)(),{addToast:o}=(0,k.useToast)(),p=(0,n.dataToUUID)(JSON.stringify(a),"lgAction"),q=(0,m.useMemo)(()=>!!(null==g?void 0:g.id),[g]),r=(0,m.useMemo)(()=>(null==g?void 0:g.id)&&(null==g?void 0:g.id)===p,[g]);(0,m.useEffect)(()=>{var a;q&&r&&(null==(a=null==g?void 0:g.event)?void 0:a.response)&&i()},[null==(c=null==g?void 0:g.event)?void 0:c.response,i,q,r]),(0,m.useEffect)(()=>{!a||(!q||r||a.enabled?q&&r||e(h,(0,d.__spreadProps)((0,d.__spreadValues)({},a),{id:p})):o({type:"warning",message:"An action is already registered for the interrupt event"}))},[a,q,r,e,f,h,...b||[]])}function p(a,b,c=[]){let{addDocumentContext:d,removeDocumentContext:e}=(0,l.useCopilotContext)(),f=(0,m.useRef)();return(0,m.useEffect)(()=>{let c=d(a,b);return f.current=c,()=>{e(c)}},[d,e,...c]),f.current}var q=a.i(528117);function r(a,b){let{setAction:c,removeAction:e,actions:f,chatComponentsCache:g}=(0,l.useCopilotContext)(),h=(0,m.useRef)((0,n.randomId)()),i=(0,m.useRef)(null),j=(0,m.useRef)(null),{addToast:o}=(0,k.useToast)();if(s(a=(0,d.__spreadValues)({},a))&&(a.renderAndWait||a.renderAndWaitForResponse)){a._isRenderAndWait=!0;let b=a.renderAndWait||a.renderAndWaitForResponse;a.renderAndWait=void 0,a.renderAndWaitForResponse=void 0,a._setActivatingMessageId=a=>{j.current=a},a.handler=(0,q.useAsyncCallback)(()=>(0,d.__async)(this,null,function*(){let a,b,c=j.current,d=new Promise((c,d)=>{a=c,b=d});return i.current={promise:d,resolve:a,reject:b,messageId:c},yield d}),[]),a.render=c=>{let d=c.messageId,e=c.status;"executing"===c.status&&(i.current&&i.current.promise?i.current.messageId!==d&&j.current!==d&&(e="inProgress"):e="inProgress");let f={status:e,args:c.args,result:c.result,handler:"executing"===e&&i.current&&i.current.messageId===d?i.current.resolve:void 0,respond:"executing"===e&&i.current&&i.current.messageId===d?i.current.resolve:void 0};if(b){var g;return(null==(g=a.parameters)?void 0:g.length)===0?b(f):b(f)}return(0,m.createElement)(m.Fragment)}}void 0===b&&f[h.current]&&(s(a)&&(f[h.current].handler=a.handler),"function"==typeof a.render&&null!==g.current&&(g.current.actions[a.name]=a.render)),(0,m.useEffect)(()=>{Object.values(f).some(b=>b.name===a.name&&b!==f[h.current])&&o({type:"warning",message:`Found an already registered action with name ${a.name}.`,id:`dup-action-${a.name}`})},[f]),(0,m.useEffect)(()=>(c(h.current,a),null!==g.current&&void 0!==a.render&&(g.current.actions[a.name]=a.render),()=>{e(h.current)}),[c,e,s(a)?a.description:void 0,a.name,s(a)?a.disabled:void 0,s(a)?a.available:void 0,JSON.stringify(s(a)?a.parameters:[]),"string"==typeof a.render?a.render:void 0,...b||[]])}function s(a){return"*"!==a.name}function t(a,b){r((0,d.__spreadProps)((0,d.__spreadValues)({},a),{available:"disabled"===a.available?a.available:"frontend"}),b)}function u(a,b){return`${a}: ${"string"==typeof b?b:JSON.stringify(b)}`}function v({description:a,value:b,parentId:c,categories:d,convert:e,available:f="enabled"},g){let{addContext:h,removeContext:i}=(0,l.useCopilotContext)(),j=(0,m.useRef)(),k=(e=e||u)(a,b);return(0,m.useEffect)(()=>{if("disabled"===f)return;let a=h(k,c,d);return j.current=a,()=>{i(a)}},[f,k,c,h,i,...g||[]]),j.current}function w(a,b){r((0,d.__spreadProps)((0,d.__spreadValues)({},a),{name:"*"}),b)}function x(a,b){r(a,b)}function y(a,b){let{render:c}=a,e=(0,d.__objRest)(a,["render"]);r((0,d.__spreadProps)((0,d.__spreadValues)({},e),{available:"disabled"===a.available?a.available:"remote",renderAndWaitForResponse:c}),b)}var z=a.i(276060);function A(a,b){let{setCoAgentStateRender:c,removeCoAgentStateRender:d,coAgentStateRenders:e,chatComponentsCache:f,availableAgents:g}=(0,m.useContext)(l.CopilotContext),h=(0,m.useRef)((0,n.randomId)()),{setBannerError:i,addToast:j}=(0,k.useToast)();(0,m.useEffect)(()=>{(null==g?void 0:g.length)&&!g.some(b=>b.name===a.name)&&(a.name,i(new z.CopilotKitAgentDiscoveryError({agentName:a.name,availableAgents:g.map(a=>({name:a.name,id:a.id}))})))},[g]);let o=`${a.name}-${a.nodeName||"global"}`;void 0===b&&e[h.current]&&(e[h.current].handler=a.handler,"function"==typeof a.render&&null!==f.current&&(f.current.coAgentStateRenders[o]=a.render)),(0,m.useEffect)(()=>{let b=h.current;Object.entries(e).some(([c,d])=>{if(c===b||d.name!==a.name)return!1;let e=!!a.nodeName,f=!!d.nodeName;return!e&&!f||e===f&&a.nodeName===d.nodeName})&&j({type:"warning",message:a.nodeName?`Found multiple state renders for agent ${a.name} and node ${a.nodeName}. State renders might get overridden`:`Found multiple state renders for agent ${a.name}. State renders might get overridden`,id:`dup-action-${a.name}`})},[e]),(0,m.useEffect)(()=>(c(h.current,a),null!==f.current&&void 0!==a.render&&(f.current.coAgentStateRenders[o]=a.render),()=>{d(h.current)}),[c,d,a.name,"string"==typeof a.render?a.render:void 0,...b||[]])}var B=a.i(614883);function C({instructions:a,available:b="enabled"},c){let{setAdditionalInstructions:d}=(0,l.useCopilotContext)();(0,m.useEffect)(()=>{if("disabled"!==b)return d(b=>[...b||[],a]),()=>{d(b=>(null==b?void 0:b.filter(b=>b!==a))||[])}},[b,a,d,...c||[]])}function D(a,b){let{authConfig_c:c,authStates_c:e,setAuthStates_c:f}=(0,l.useCopilotContext)(),g=(0,m.useRef)(null),h=(0,m.useCallback)(b=>"function"==typeof a.render?a.render(b):a.render||m.default.createElement(m.Fragment),[a]),i=(0,m.useCallback)(b=>Object.values(e||{}).some(a=>"authenticated"===a.status)?h(b):(g.current=b,(null==c?void 0:c.SignInComponent)?m.default.createElement(c.SignInComponent,{onSignInComplete:b=>{null==f||f(c=>(0,d.__spreadProps)((0,d.__spreadValues)({},c),{[a.name]:b})),g.current&&(h(g.current),g.current=null)}}):m.default.createElement(m.Fragment)),[a,e,f]);r((0,d.__spreadProps)((0,d.__spreadValues)({},a),{render:i}),b)}var E=a.i(100340);function F(a={}){let{copilotApiConfig:b,setBannerError:c}=(0,l.useCopilotContext)(),e=!!b.publicApiKey,f=(0,j.useCopilotChat)(a);return((0,m.useEffect)(()=>{e?c(null):(c(new z.CopilotKitError({message:"You're using useCopilotChatHeadless_c, a premium-only feature, which offers extensive headless chat capabilities. To continue, you'll need to provide a free public license key.",code:z.CopilotKitErrorCode.MISSING_PUBLIC_API_KEY_ERROR,severity:z.Severity.WARNING,visibility:z.ErrorVisibility.BANNER})),E.styledConsole.logCopilotKitPlatformMessage())},[e]),e)?f:{visibleMessages:[],messages:[],sendMessage:()=>(0,d.__async)(void 0,null,function*(){}),appendMessage:()=>(0,d.__async)(void 0,null,function*(){}),setMessages:()=>{},deleteMessage:()=>{},reloadMessages:()=>(0,d.__async)(void 0,null,function*(){}),stopGeneration:()=>{},reset:()=>{},isLoading:!1,runChatCompletion:()=>(0,d.__async)(void 0,null,function*(){return[]}),mcpServers:[],setMcpServers:()=>{},suggestions:[],setSuggestions:()=>{},generateSuggestions:()=>(0,d.__async)(void 0,null,function*(){}),resetSuggestions:()=>{},isLoadingSuggestions:!1,interrupt:null}}function G(a={}){let{visibleMessages:b,appendMessage:c,reloadMessages:d,stopGeneration:e,reset:f,isLoading:g,runChatCompletion:h,mcpServers:i,setMcpServers:k}=(0,j.useCopilotChat)(a);return{visibleMessages:b,appendMessage:c,reloadMessages:d,stopGeneration:e,reset:f,isLoading:g,runChatCompletion:h,mcpServers:i,setMcpServers:k}}var H=a.i(447284),I=a.i(143177),J={MAX_RETRIES:3,COOLDOWN_MS:5e3},K=a.i(885818),L=a.i(377902);a.s([],985568),a.i(985568),a.s(["CopilotContext",()=>l.CopilotContext,"CopilotKit",()=>c.CopilotKit,"CopilotMessagesContext",()=>L.CopilotMessagesContext,"CopilotTask",()=>i,"SUGGESTION_RETRY_CONFIG",()=>J,"defaultCopilotContextCategories",()=>c.defaultCopilotContextCategories,"extract",()=>c.extract,"reloadSuggestions",()=>c.reloadSuggestions,"runAgent",()=>B.runAgent,"shouldShowDevConsole",()=>I.shouldShowDevConsole,"startAgent",()=>B.startAgent,"stopAgent",()=>B.stopAgent,"useCoAgent",()=>B.useCoAgent,"useCoAgentStateRender",()=>A,"useCopilotAction",()=>r,"useCopilotAdditionalInstructions",()=>C,"useCopilotAuthenticatedAction_c",()=>D,"useCopilotChat",()=>G,"useCopilotChatHeadless_c",()=>F,"useCopilotChatInternal",()=>j.useCopilotChat,"useCopilotContext",()=>l.useCopilotContext,"useCopilotMessagesContext",()=>L.useCopilotMessagesContext,"useCopilotReadable",()=>v,"useCopilotRuntimeClient",()=>K.useCopilotRuntimeClient,"useDefaultTool",()=>w,"useFrontendTool",()=>x,"useHumanInTheLoop",()=>y,"useLangGraphInterrupt",()=>o,"useLangGraphInterruptRender",()=>H.useLangGraphInterruptRender,"useMakeCopilotDocumentReadable",()=>p,"useRenderToolCall",()=>t],230574)}];

//# sourceMappingURL=node_modules_%40copilotkit_react-core_dist_index_mjs_124119db._.js.map